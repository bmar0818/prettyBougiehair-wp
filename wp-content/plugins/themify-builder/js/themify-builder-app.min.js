var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(k,z,u){k instanceof String&&(k=String(k));for(var y=k.length,t=0;t<y;t++){var l=k[t];if(z.call(u,l,t,k))return{i:t,v:l}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(k,z,u){k!=Array.prototype&&k!=Object.prototype&&(k[z]=u.value)};$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(k,z,u,y){if(z){u=$jscomp.global;k=k.split(".");for(y=0;y<k.length-1;y++){var t=k[y];t in u||(u[t]={});u=u[t]}k=k[k.length-1];y=u[k];z=z(y);z!=y&&null!=z&&$jscomp.defineProperty(u,k,{configurable:!0,writable:!0,value:z})}};$jscomp.polyfill("Array.prototype.find",function(k){return k?k:function(k,u){return $jscomp.findInternal(this,k,u).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(k){var z=0;return $jscomp.iteratorPrototype(function(){return z<k.length?{done:!1,value:k[z++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};$jscomp.iteratorFromArray=function(k,z){$jscomp.initSymbolIterator();k instanceof String&&(k+="");var u=0,y={next:function(){if(u<k.length){var t=u++;return{value:z(t,k[t]),done:!1}}y.next=function(){return{done:!0,value:void 0}};return y.next()}};y[Symbol.iterator]=function(){return y};return y};
$jscomp.polyfill("Array.prototype.keys",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(k){return k})}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(k,u){return u})}},"es6","es3");
$jscomp.checkStringArgs=function(k,z,u){if(null==k)throw new TypeError("The 'this' value for String.prototype."+u+" must not be null or undefined");if(z instanceof RegExp)throw new TypeError("First argument to String.prototype."+u+" must not be a regular expression");return k+""};
$jscomp.polyfill("String.prototype.repeat",function(k){return k?k:function(k){var u=$jscomp.checkStringArgs(this,null,"repeat");if(0>k||1342177279<k)throw new RangeError("Invalid count value");k|=0;for(var y="";k;)if(k&1&&(y+=u),k>>>=1)u+=u;return y}},"es6-impl","es3");var tb_app;
(function(k,z,u,y,t,l,q,n){"function"===typeof t.document.ondragstart&&(t.document.ondragstart=y.document.ondragstart=null);var M=k.ui.sortable.prototype._mouseStart,I=l.body.classList.contains("full-section-scrolling");k.ui.sortable.prototype._mouseStart=function(a,b,c){if("mousedown"===a.type&&1===a.which){var d=a.target.classList;if(d.contains("tb_subrow_holder")||d.contains("tb_grid_drag")||d.contains("tb_column_action")&&a.target.parentNode.classList.contains("sub_column")||("row"===e.ActionBar.type||
"subrow"===e.ActionBar.type)&&!d.contains("ti-move")&&null!==a.target.parentNode.closest(".tb_clicked"))return a.stopImmediatePropagation(),a.preventDefault(),!1;this._trigger("beforeStart",a,[this,this._uiHash()])}M.apply(this,[a,b,c])};Element.prototype.closest||(Element.prototype.closest=function(a){var b=null,c=null,d=null,f=this;0===a.indexOf(".")?(b=!0,a=a.replace(".","")):0===a.indexOf("#")?(c=!0,a=a.replace("#","")):d=!0;for(;;){var e=f;e=!0===b&&e.classList.contains(a)||!0===c&&e.id===a||
!0===d&&e.nodeName.toLowerCase()===a?e:null;if(null!==e)return e;f=f.parentElement;if(!f)return null}});String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(a,b){var c=this.toString(),d=c.length;if(b===n||b>d)b=d;b-=d;c=c.indexOf(a,b);return-1!==c&&c===b}});n===k.fn.themifySerializeObject&&(k.fn.themifySerializeObject=function(){for(var a={},b=this.length-1;-1<b;--b){var c=this[b].type;if(this[b].classList.contains("wp-editor-area")&&tinyMCE!==n){var d=tinyMCE.get(this[b].id);
d&&(this[b].value=d.getContent())}if(""!==this[b].value&&("text"===c||"number"===c||"radio"===c||"checkbox"===c||"textarea"===c||"select-one"===c||"hidden"===c||"email"===c||"select"===c||"select-multiple"===c)&&(this[b].name||this[b].id)){var d=this[b].name?this[b].name:this[b].id,f=this[b].value;"radio"===c||"checkbox"===c?f=this[b].checked&&f:"select-multiple"===c&&(f=k(this[b]).val());a[d]!==n&&"radio"!==c?(!a[d].push&&(a[d]=[a[d]]),f&&a[d].push(f)):f&&(a[d]=f)}}return a});var e=tb_app={activeModel:null,
Models:{},Collections:{},Mixins:{},Views:{Modules:{},Rows:{},SubRows:{},Columns:{}},Forms:{},Constructor:{},Utils:{},Instances:{Builder:{}},cache:{},Styles:{}},C={};e.builderIndex=0;e.mode="default";e.autoSaveCid=null;e.hasChanged=null;e.editing=!1;e.scrollTo=!1;e.eventName=!1;e.beforeEvent=!1;e.saving=!1;e.activeBreakPoint="desktop";e.zoomMeta={isActive:!1,size:100};e.isPreview=!1;e.Models.Module=z.Model.extend({defaults:{element_id:null,elType:"module",mod_name:"",mod_settings:{}},initialize:function(){e.Models.Registry.register(this.cid,
this);var a=this.get("element_id");a&&1!==C[a]||(a=e.Utils.generateUniqueID(),this.set({element_id:a},{silent:!0}));C[a]=1},toRenderData:function(){return{slug:this.get("mod_name"),name:themifyBuilder.modules[this.get("mod_name")].name,excerpt:this.getExcerpt()}},getExcerpt:function(a){a=a||this.get("mod_settings");return this.limitString(a.content_text||a.content_box||a.plain_text||"",100)},limitString:function(a,b){var c="";""!==a&&(a=this.stripHtml(a).toString(),c=a.length>b?a.substr(0,b):a);return c},
stripHtml:function(a){var b=l.createElement("div");b.innerHTML=a;return b.textContent||b.innerText||""},setData:function(a){e.Utils.clearElementId([a]);a=e.Views.init_module(a);a.model.trigger("custom:change",a)},backendLivePreview:function(){k(".tb_element_cid_"+this.cid).find(".module_excerpt").text(this.getExcerpt())},getPreviewSettings:function(){return _.extend({cid:this.cid},themifyBuilder.modules[this.get("mod_name")].defaults)},getIDattr:function(){return this.get("element_id")?this.get("element_id"):
e.Utils.generateUniqueID()}});e.Models.SubRow=z.Model.extend({defaults:{element_id:null,elType:"subrow",gutter:"gutter-default",column_alignment:I?"col_align_middle":"col_align_top",column_h:"",desktop_dir:"ltr",tablet_dir:"ltr",tablet_landscape_dir:"ltr",mobile_dir:"ltr",col_mobile:"-auto",col_tablet_landscape:"-auto",col_tablet:"-auto",cols:{},styling:{}},initialize:function(){e.Models.Registry.register(this.cid,this);var a=this.get("element_id");a&&1!==C[a]||(a=e.Utils.generateUniqueID(),this.set({element_id:a},
{silent:!0}));C[a]=1},setData:function(a){e.Utils.clearElementId([a]);a=e.Views.init_subrow(a);a.model.trigger("custom:change",a)}});e.Models.Column=z.Model.extend({defaults:{element_id:null,elType:"column",grid_class:"",component_name:"column",modules:{},styling:{}},initialize:function(){e.Models.Registry.register(this.cid,this);var a=this.get("element_id");a&&1!==C[a]||(a=e.Utils.generateUniqueID(),this.set({element_id:a},{silent:!0}));C[a]=1},setData:function(a){e.Utils.clearElementId([a]);a=e.Views.init_column(a);
a.model.trigger("custom:change",a)}});e.Models.Row=z.Model.extend({defaults:{element_id:null,elType:"row",gutter:"gutter-default",column_alignment:I?"col_align_middle":"col_align_top",column_h:"",desktop_dir:"ltr",tablet_dir:"ltr",tablet_landscape_dir:"ltr",mobile_dir:"ltr",col_mobile:"-auto",col_tablet_landscape:"-auto",col_tablet:"-auto",cols:{},styling:{}},initialize:function(){e.Models.Registry.register(this.cid,this);var a=this.get("element_id");a&&1!==C[a]||(a=e.Utils.generateUniqueID(),this.set({element_id:a},
{silent:!0}));C[a]=1},setData:function(a){e.Utils.clearElementId([a]);a=e.Views.init_row(a);a.model.trigger("custom:change",a)}});e.Collections.Rows=z.Collection.extend({model:e.Models.Row});e.Models.Registry={items:{},register:function(a,b){this.items[a]=b},lookup:function(a){return this.items[a]||null},remove:function(a){this.items[a]=null;delete this.items[a]},destroy:function(){for(var a in this.items)this.items[a].destroy();this.items={}}};e.Models.setValue=function(a,b,c){c=c||!1;e.Models.Registry.lookup(a).set(b,
{silent:c})};e.vent=_.extend({},z.Events);e.Views.register_module=function(a){"default"!==e.mode&&(this.Modules[e.mode]=this.Modules["default"].extend(a))};e.Views.init_module=function(a,b){if(themifyBuilder.modules[a.mod_name]===n)return!1;!0===b&&a.mod_settings===n&&themifyBuilder.modules[a.mod_name].defaults!==n&&(a.mod_settings=_.extend({},themifyBuilder.modules[a.mod_name].defaults));var c=a instanceof e.Models.Module?a:new e.Models.Module(a),d=new (this.get_module())({model:c,type:e.mode});
return{model:c,view:d}};e.Views.get_module=function(){return this.Modules[e.mode]};e.Views.unregister_module=function(){"default"!==e.mode&&(this.Modules[e.mode]=null,delete this.Modules[e.mode])};e.Views.module_exists=function(){return this.Modules.hasOwnProperty(e.mode)};e.Views.register_column=function(a){"default"!==e.mode&&(this.Columns[e.mode]=this.Columns["default"].extend(a))};e.Views.init_column=function(a){a=a instanceof e.Models.Column?a:new e.Models.Column(a);var b=new (this.get_column())({model:a,
type:e.mode});return{model:a,view:b}};e.Views.get_column=function(){return this.Columns[e.mode]};e.Views.unregister_column=function(){"default"!==e.mode&&(this.Columns[e.mode]=null,delete this.Columns[e.mode])};e.Views.column_exists=function(){return this.Columns.hasOwnProperty(e.mode)};e.Views.register_subrow=function(a){"default"!==e.mode&&(this.SubRows[e.mode]=this.SubRows["default"].extend(a))};e.Views.init_subrow=function(a){a=a instanceof e.Models.SubRow?a:new e.Models.SubRow(a);var b=new (this.get_subrow())({model:a,
type:e.mode});return{model:a,view:b}};e.Views.get_subrow=function(){return this.SubRows[e.mode]};e.Views.unregister_subrow=function(){"default"!==e.mode&&(this.SubRows[e.mode]=null,delete this.SubRows[e.mode])};e.Views.subrow_exists=function(){return this.SubRows.hasOwnProperty(e.mode)};e.Views.register_row=function(a){"default"!==e.mode&&(this.Rows[e.mode]=this.Rows["default"].extend(a))};e.Views.init_row=function(a){var b=a.attributes;return b===n||b.cols!==n&&(0<Object.keys(b.cols).length||0<b.cols.length)||
b.styling!==n&&0<Object.keys(b.styling).length?(a=a instanceof e.Models.Row?a:new e.Models.Row(a),b=new (this.get_row())({model:a,type:e.mode}),{model:a,view:b}):!1};e.Views.get_row=function(){return this.Rows[e.mode]};e.Views.unregister_row=function(){"default"!==e.mode&&(this.Rows[e.mode]=null,delete this.Rows[e.mode])};e.Views.row_exists=function(){return this.Rows.hasOwnProperty(e.mode)};e.Constructor={data:null,key:"tb_form_templates_",styles:null,settings:null,editors:null,afterRun:null,radioChange:null,
bindings:null,stylesData:null,values:null,clicked:null,type:null,"static":null,label:null,is_repeat:null,is_new:null,is_ajax:null,breakpointsReverse:Object.keys(themifyBuilder.breakpoints).reverse(),set:function(a){try{var b="",c;for(c in themifyBuilder.modules)b+=c;var d={val:a,ver:tbLocalScript.version,h:u.hash(b)};localStorage.setItem(this.key,JSON.stringify(d));return!0}catch(f){return!1}},get:function(){if(themifyBuilder.debug)return!1;try{localStorage.removeItem("tb_form_templates");var a=localStorage.getItem(this.key),
b="";if(!a)return!1;var a=JSON.parse(a),c;for(c in themifyBuilder.modules)b+=c;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==u.hash(b)?!1:a.val}catch(d){}return!1},getForms:function(a){this.breakpointsReverse.push("desktop");var b=this,c=b.get(),d=function(c){q.Lightbox.setup();q.LiteLightbox.modal.on("attach",function(){this.el.classList.add("tb_lite_lightbox_modal")});b.data=c;a&&a()};!1!==c?d(c):k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_form_templates",
tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){a&&(d(a),b.set(a))}});b["static"]=themifyBuilder.i18n.options;themifyBuilder.i18n.options=null;this.label=themifyBuilder.i18n.label;themifyBuilder.i18n.label=null;for(var c=b["static"].fonts.safe,f=0,e=c.length;f<e;++f)""!==c[f].value&&"default"!==c[f].value&&(b.font_select.safe[c[f].value]=c[f].name);b["static"].fonts.safe=null;c=b["static"].fonts.google;f=0;for(e=c.length;f<e;++f)""!==c[f].value&&"default"!==c[f].value&&(b.font_select.google[c[f].value]=
{n:c[f].name,v:c[f].variant});b["static"].fonts.google=c=null},getOptions:function(a){if(a.options!==n)return a.options;for(var b in this["static"])if(!0===a[b])return this["static"][b];return!1},getTitle:function(a){return"custom_css"===a.type?this.label.custom_css:"title"===a.type?this.label.m_t:a.label!==n?this.label[a.label]!==n?this.label[a.label]:a.label:!1},getSwitcher:function(){var a=l.createDocumentFragment(),b=l.createElement("ul"),c=this.breakpointsReverse,d=this;b.className="tb_lightbox_switcher clearfix";
for(var f=c.length-1;-1<f;--f){var e=c[f],h=l.createElement("li"),m=l.createElement("a"),r=l.createElement("i");m.href="#"+e;m.className="tab_"+e;m.title="tablet_landscape"===e?this.label.table_landscape:e.charAt(0).toUpperCase()+e.substr(1);r.className="ti-"+e;"tablet_landscape"===e&&(r.className+=" ti-tablet");m.appendChild(r);h.appendChild(m);a.appendChild(h)}b.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();a.target!==b&&(a=a.target.closest("a"),null!==a&&
d.lightboxSwitch(a.getAttribute("href")))});b.appendChild(a);return b},lightboxSwitch:function(a){a=a.replace("#","");a!==e.activeBreakPoint&&(e.activeModel&&"visual"===e.mode&&(e.scrollTo=e.liveStylingInstance.$liveStyledElmt),k(".tb_breakpoint_switcher.breakpoint-"+a,t.document).trigger("click"))},binding:function(a,b,c,d){var f=!1,g=b.binding,h="desktop"!==e.activeBreakPoint;b=b.type;"select"===b&&0==c&&(c="");c||g.empty===n?c&&g[c]!==n?f="radio"===b||"icon_radio"===b?!0===a.checked?g[c]:!1:g[c]:
c&&g.not_empty!==n?f=g.not_empty:g.select!==n&&c!==g.select.value?f=g.select:g.checked!==n&&!0===a.checked?f=g.checked:g.not_checked!==n&&!1===a.checked&&(f=g.not_checked):f=g.empty;if(f){b=[];f.show!==n&&(b=f.show);f.hide!==n&&(b+=f.hide);if(d===n||0===d.length)d=a.closest(".tb_tab"),null===d&&(d=a.closest(".tb_expanded_opttions"),null===d&&(d=t.document.getElementById("tb_lightbox_container")));c=f.hide!==n;g=f.show!==n;a=0;for(var m=b.length;a<m;++a){if(!0===c&&f.hide[a]!==n){var r=d.querySelectorAll("."+
f.hide[a]);for(b=r.length-1;-1<b;--b)r[b].classList.add("_tb_hide_binding")}if(!0===g&&f.show[a]!==n)for(r=d.querySelectorAll("."+f.show[a]),b=r.length-1;-1<b;--b)r[b].classList.remove("_tb_hide_binding")}if(f.responsive!==n&&f.responsive.disabled!==n)for(a=f.responsive.disabled.length-1;-1<a;--a)if(f.responsive.disabled[a]!==n)for(c=d.querySelectorAll("."+f.responsive.disabled[a]),b=c.length-1;-1<b;--b)!0===h?c[a].classList.add("responsive_disable"):c[a].classList.remove("responsive_disable")}},
control:{init:function(a,b,c){c.name=b;this[b].call(this,a,c)},preview:function(a,b,c){var d;if("visual"===e.mode){var f=null,g=e.Constructor;!0===c.repeat&&(d=a.closest(".tb_row_js_wrapper"));if(c.selector!==n&&b)if(f=e.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(c.selector),0===f.length)f=null;else if(!0===c.repeat)var h=a.closest(".tb_repeatable_field"),m=Array.prototype.slice.call(d.children),f=f[m.indexOf(h)];!0===c.repeat?g.settings[d.id]=e.Utils.clear(e.Forms.parseSettings(d).v):
g.settings[c.id]=b;"refresh"===c.type||!0===g.is_ajax?e.activeModel.trigger("custom:preview:refresh",g.settings,f,b):e.activeModel.trigger("custom:preview:live",g.settings,"wp_editor"===c.name||"TEXTAREA"===a.tagName,null,f,b)}else e.activeModel.backendLivePreview();e.hasChanged=!0},change:function(a,b){var c=this,d="refresh"===b.type&&b.selector===n?1E3:50;if(b.event===n){var f="change";d=1}else f=b.event;a.addEventListener(f,_.throttle(function(a){c.preview(a.target,a.target.value,b)},d),{passive:!0})},
wp_editor:function(a,b){var c=this,d=k(a),f=a.id,g=!1,h=!1,m=_.throttle(function(f){f="setupeditor"===this.type?this.getContent():this.value;null!==e.activeModel&&g!==f&&(g=f,!1!==h?(a.value=f,d.trigger("change")):c.preview(a,f,b))},"refresh"===b.type&&b.selector===n?1E3:50);e.Utils.initQuickTags(f);tinyMCE!==n&&(tinymce.editors[f]!==n&&tinyMCE.execCommand("mceRemoveEditor",!0,f),f=e.Utils.initNewEditor(f),h=a.classList.contains("wp-editor-area")?0<d.closest("#instance_widget").length:!1,!f.type&&
(f.type="setupeditor"),f.on("change keyup",m));d.on("change keyup",m)},layout:function(a,b){if("visual"===e.mode){var c=this;a.addEventListener("change",function(a){a=a.detail.val;if(b.classSelector!==n){var d=b.id,g=e.Constructor.settings[d];(""!==b.classSelector?e.liveStylingInstance.$liveStyledElmt.find(b.classSelector).first():e.liveStylingInstance.$liveStyledElmt).removeClass(g).addClass(a);e.Constructor.settings[d]=a;e.Utils.loadContentJs(e.liveStylingInstance.$liveStyledElmt,"module")}else c.preview(this,
a,b)},{passive:!0})}},icon:function(a,b){var c=this;a.addEventListener("change",function(a){var d=a.target.value,g=this.closest(".tb_input").getElementsByClassName("themify_fa_toggle")[0];if(g!==n){g.className="tb_plus_btn themify_fa_toggle icon-close";var h=e.Utils.getIcon(d);!1===h&&(h="default_icon");g.className+=" "+h}c.preview(a.target,d,b)},{passive:!0})},checkbox:function(a,b){if("visual"===e.mode){var c=this;a.addEventListener("change",function(){for(var a=[],f=this.closest(".themify-checkbox").getElementsByClassName("tb-checkbox"),
e=0,h=f.length;e<h;++e)f[e].checked&&a.push(f[e].value);c.preview(this,a.join("|"),b)},{passive:!0})}},color:function(a,b){if("visual"===e.mode){var c=this;a.addEventListener("themify_builder_color_picker_change",function(a){c.preview(this,a.detail.val,b)},{passive:!0})}},widget_select:function(a,b){this.preview(a,a.find(":input").themifySerializeObject(),b)},queryPosts:function(a,b){if("visual"===e.mode){var c=this;a.addEventListener("queryPosts",function(a){b.id=this.id;e.Constructor.settings=e.Utils.clear(e.Forms.serialize("tb_options_setting"));
c.preview(this,e.Constructor.settings[b.id],b)},{passive:!0})}}},initControl:function(a,b){if(null!==e.activeModel){if("setting"===this.clicked&&"custom_css"!==b.type){if(!1!==b.control&&"module"===this.component){var c=b.control||{},d=b.type;!0===c.repeat?c.id=a.dataset.inputId:!0===this.is_repeat?(c.repeat=!0,c.id=a.dataset.inputId):c.id=b.id;if(c.control_type===n){if(d===n||"text"===d||"range"===d||"radio"===d||"icon_radio"===d||"select"===d||"gallery"===d||"textarea"===d||"image"===d||"date"===
d||"audio"===d||"video"===d||"select_menu"===d||"widgetized_select"===d||"layoutPart"===d||"selectSearch"===d||"hidden"===d||"toggle_switch"===d)"text"!==d&&"textarea"!==d||c.event!==n||(c.event="keyup"),d="change"}else d=c.control_type;this.control.init(a,d,c)}}else"visual"===e.mode&&"styling"===this.clicked&&e.liveStylingInstance.bindEvents(a,b);if(b.binding!==n){var f=this,g=!0===f.is_repeat;"layout"===b.type?a.addEventListener("click",function(a){a=a.target.closest(".tfl-icon");if(null!==a){var c=
g?this.closest(".tb_repeatable_field_content"):n;f.binding(this,b,a.id,c)}},{passive:!0}):a.addEventListener("change",function(a){a=g?this.closest(".tb_repeatable_field_content"):n;f.binding(this,b,this.value,a)},{passive:!0});this.bindings.push({el:a,data:b,repeat:g})}}return a},callbacks:function(){var a=this.afterRun.length;if(0<a){for(var b=0;b<a;++b)this.afterRun[b].call();this.afterRun=[]}a=this.radioChange.length;if(0<a){for(b=0;b<a;++b)this.radioChange[b].call();this.radioChange=[]}a=this.bindings.length;
if(0<a){for(b=a-1;-1<b;--b){var a=this.bindings[b].el,c=!0===this.bindings[b].repeat?a.closest(".tb_repeatable_field_content"):n,d="layout"===this.bindings[b].data.type?a.getElementsByClassName("selected")[0].id:a.value;this.binding(a,this.bindings[b].data,d,c)}this.bindings=[]}},setUpEditors:function(){for(var a=this.editors.length-1;-1<a;--a)this.initControl(this.editors[a].el,this.editors[a].data);this.editors=[]},switchTabs:function(a){a.preventDefault();a.stopPropagation();a=this.getAttribute("href");
var b=this.parentNode,c=t.document.getElementById(a.replace("#",""));if(null!==c&&!b.classList.contains("current")){for(var d=b.parentNode,f=d.children,g=c.parentNode.children,h=f.length-1;-1<h;--h)f[h].classList.remove("current");b.classList.add("current");for(h=g.length-1;-1<h;--h)g[h].classList.contains("tb_tab")&&(g[h].style.display="none");c.style.display="block";u.body.triggerHandler("themify_builder_tabsactive",[a,c]);u.triggerEvent(c,"themify_builder_tabsactive",{id:a});e.Utils.hideOnClick(d);
"visual"===e.mode&&k(l).triggerHandler("mouseup")}},run:function(a,b){this.styles={};this.settings={};this.editors=[];this.afterRun=[];this.radioChange=[];this.bindings=[];this.stylesData={};this.component=this.is_repeat=null;this.type=a;this.is_ajax=this.is_new=null;var c=!1,d=!1,f=e.activeModel;if(null!==f){this.component=f.get("elType");c=l.getElementsByClassName("tb_element_cid_"+f.cid)[0];if("module"===this.component){this.is_ajax="ajax"===themifyBuilder.modules[a].type;var g="mod_settings";
f.get("is_new")!==n&&(this.is_new=!0,c=c.closest(".module_row"))}else g="styling";this.values=k.extend(!0,{},f.get(g));e.beforeEvent=q.clone(c);d=f.get("visibileClicked")!==n;c=!1===d&&("column"===this.component||"subrow"===this.component||f.get("styleClicked")!==n);var h=this.data[a]}else this.values={},this.component=null,h=a;var m=l.createDocumentFragment(),r=l.createDocumentFragment(),p=this,x=function(a,b){var c=l.createElement("div"),d=l.createDocumentFragment();c.className="tb_options_tab_content";
"visibility"===a||"animation"===a?b=p["static"][a]:"styling"===a&&d.appendChild(p.getSwitcher());c.appendChild(p.create(b));d.appendChild(c);if("styling"===a){var c=l.createElement("a"),g=l.createElement("i");c.href="#";c.className="reset-styling";g.className="ti-close";c.appendChild(g);c.appendChild(l.createTextNode(p.label.reset_style));c.addEventListener("click",p.resetStyling.bind(p));d.appendChild(c);"visual"===e.mode&&f&&setTimeout(function(){e.liveStylingInstance.module_rules=p.styles},600)}return d};
this.clicked=null;for(var v in h){g=l.createElement("li");var w=l.createElement("a"),B=l.createElement("span"),G=l.createElement("div"),t=h[v].name!==n?h[v].name:this.label[v],F="tb_options_"+v;w.href="#"+F;w.textContent=t;"setting"!==v&&(w.className="tb_tooltip",B.textContent=t,w.appendChild(B));G.id=F;G.className="tb_tab tb_options_tab_wrapper";if(c&&"styling"===v||d&&"visibility"===v||!c&&!d&&"setting"===v||null===this.component)g.className="current",p.clicked=v,h[v].html!==n?G.appendChild(h[v].html):
G.appendChild(x(v,h[v].options)),G.style.display="block",new SimpleBar(G),G.dataset.done=!0;G.addEventListener("themify_builder_tabsactive",function(a){a=a.detail.id.replace("#tb_options_","");p.clicked=a;this.dataset.done===n&&(this.dataset.done=!0,this.appendChild(x(a,h[a].options)),p.callbacks(),new SimpleBar(this),"setting"===a&&p.setUpEditors())},{passive:!0});w.addEventListener("click",this.switchTabs);r.appendChild(G);g.appendChild(w);m.appendChild(g)}v=q.Lightbox.$lightbox[0].getElementsByClassName("tb_options_tab")[0];
for(w=q.Lightbox.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0];v.firstChild;)v.removeChild(v.firstChild);for(;w.firstChild;)w.removeChild(w.firstChild);v.appendChild(m);if(b!==n||f){var A=l.createElement("button");A.className="builder_button builder_save_button";A.title=b!==n&&b.ctr_save!==n?this.label[b.ctr_save]:this.label.ctr_save;A.textContent=b!==n&&b.done!==n?this.label[b.done]:this.label.done;if(f){e.autoSaveCid=f.cid;if("visual"===e.mode&&(e.liveStylingInstance.init(),
"subrow"!==this.component&&"column"!==this.component))var D=e.liveStylingInstance.$liveStyledElmt[0].outerHTML;var K=function(a){a.preventDefault();a.stopImmediatePropagation();p.saveComponent(!1)&&(A.removeEventListener("click",K,{once:!1}),E.removeEventListener("click",K,{once:!0}))};var E=l.createElement("a");g=l.createElement("li");m=l.createElement("span");g.className="tb_top_save_btn";E.className="ti-check tb_tooltip";m.textContent=this.label.done;E.appendChild(m);g.appendChild(E);v.appendChild(g);
A.addEventListener("click",K,{once:!1});E.addEventListener("click",K,{once:!0})}w.appendChild(A)}u.body.one("themify_builder_lightbox_close",function(){p.radioChange=p.bindings=p.stylesData=p.is_ajax=p.is_repeat=p.afterRun=p.editors=p.clicked=p.settings=p.styles=null;if(f){"function"===typeof K&&A.removeEventListener("click",K,{once:!0});if(!0!==e.saving&&D!==n&&e.hasChanged){var a=e.Models.Registry.lookup(f.cid);a&&a.trigger("custom:restorehtml",D)}p.is_new?(f.unset("is_new",{silent:!0}),!0!==e.saving&&
f.trigger("dom:module:unsaved")):(f.unset("styleClicked",{silent:!0}),f.unset("visibileClicked",{silent:!0}));if(tinyMCE!==n)for(a=tinymce.editors.length-1;-1<a;--a)"content"!==tinymce.editors[a].id&&tinyMCE.execCommand("mceRemoveEditor",!0,tinymce.editors[a].id);"visual"===e.mode&&e.liveStylingInstance.clear();e.activeModel=f=null}u.body.off("themify_builder_change_mode.updatestyles");D=p.values=p.type=p.component=p.is_new=null;p.tabs.click=0}).on("themify_builder_change_mode.updatestyles",this.updateStyles.bind(this));
setTimeout(function(){"setting"===p.clicked&&p.setUpEditors();p.callbacks();u.triggerEvent(l,"tb_editing_"+p.type);"row"!==p.type&&"column"!==p.type&&"subrow"!==p.type&&u.triggerEvent(l,"tb_editing_module")},5);c?f.unset("styleClicked",{silent:!0}):d&&f.unset("visibileClicked",{silent:!0});return r},getStyleVal:function(a,b){if(null!==e.activeModel){b===n&&(b=e.activeBreakPoint);if("styling"!==this.clicked||"desktop"===b)return""!==this.values[a]?this.values[a]:n;for(var c=this.breakpointsReverse,
d=c.indexOf(b),f=c.length;d<f;++d)if("desktop"!==c[d]){if(this.values["breakpoint_"+c[d]]!==n&&this.values["breakpoint_"+c[d]][a]!==n&&""!==this.values["breakpoint_"+c[d]][a])return this.values["breakpoint_"+c[d]][a]}else if(""!==this.values[a])return this.values[a]}return n},updateStyles:function(a,b,c){this.setStylingValues(b);a=this.clicked;this.clicked="styling";for(var d in this.stylesData)if(c=this.stylesData[d].type,"video"!==c&&"gallery"!==c&&"custom_css"!==c&&"builder"!==c&&!1!==this.stylesData[d].is_responsive&&
("icon_radio"===c?c="radio":"icon_checkbox"===c?c="checkbox":"textarea"===c||"icon"===c?c="text":"image"===c?c="file":"padding"===c||"border_radius"===c?c="margin":"frame"===c&&(c="layout"),b=this.getStyleVal(d),this[c].update(d,b,this),this.stylesData[d].binding!==n)){var f=t.document.getElementById(d);c="layout"===c?f.getElementsByClassName("tfl-icon"):"radio"===c||"checkbox"===c?f.getElementsByTagName("input"):[f];for(var f=this.stylesData[d],e=0,h=c.length;e<h;++e)this.binding(c[e],f,b)}this.clicked=
a},setStylingValues:function(a){var b=e.Forms.serialize("tb_options_styling",!0),c="desktop"===a;c||this.values["breakpoint_"+a]!==n||(this.values["breakpoint_"+a]={});for(var d in b)!0===c?this.values[d]=b[d]:this.values["breakpoint_"+a][d]=b[d]},saveComponent:function(a){e.saving=!0;var b=e.Forms,c="module"===this.component;if(c&&!b.isValidate(t.document.getElementById("tb_options_setting"))||q.Lightbox.$lightbox[0].getElementsByClassName("tb_disable_save")[0]!==n)return e.beforeEvent=null,e.saving=
!1;u.body.triggerHandler("themify_builder_save_component");"visual"===e.mode&&t.jQuery("body").trigger("themify_builder_save_component");delete this.values.cid;var d=!1,f=k.extend(!0,{},this.beforeData?this.beforeData:this.values),g="styling",h=l.getElementsByClassName("tb_element_cid_"+e.activeModel.cid)[0];h===n&&(h=l.querySelector('[data-cid="'+e.activeModel.cid+'"]'));h=k(h);if("column"!==this.component){if("subrow"!==this.component){c&&(g="mod_settings");var m=b.serialize("tb_options_setting",
!0);for(r in m)this.values[r]=m[r]}m=b.serialize("tb_options_animation",!0);for(r in m)this.values[r]=m[r];b=b.serialize("tb_options_visibility",!0);for(r in b)this.values[r]=b[r];"visual"===e.mode&&("hide_all"===b.visibility_all||"hide"===b.visibility_desktop||"hide"===b.visibility_tablet||"hide"===b.visibility_mobile?h[0].classList.add("tb_visibility_hidden"):h[0].classList.remove("tb_visibility_hidden"))}this.setStylingValues(e.activeBreakPoint);var r={};r[g]=k.extend(!0,{},e.Utils.clear(this.values));
e.activeModel.set(r,{silent:!0});c&&(this.is_new&&(d=h.closest(".module_column"),d.closest(".module_row").removeClass("tb_row_empty"),d.closest(".module_subrow").removeClass("tb_row_empty"),d=q.clone(d)),e.Instances.Builder[e.builderIndex].removeLayoutButton());if("visual"===e.mode){var p=k.extend(!0,{},e.liveStylingInstance.undoData);h[0].classList.remove("tb_visual_hover");h.find(".tb_visual_hover").removeClass("tb_visual_hover")}e.undoManager.push(e.activeModel.cid,e.beforeEvent,h,"save",{bsettings:f,
asettings:this.values,styles:p,column:d});q.Lightbox.close(a);e.beforeEvent=null;e.saving=!1;return!0},resetStyling:function(a){a.preventDefault();a.stopPropagation();if(!this.beforeData){this.beforeData=k.extend(!0,{},this.values);var b=this;u.body.one("themify_builder_lightbox_before_close",function(){b.beforeData=null})}e.hasChanged=!0;var c=k("#tb_options_styling",ThemifyBuilderCommon.Lightbox.$lightbox)[0],d=c.getElementsByClassName("tb_lb_option"),f=e.activeModel.get("elType");"module"===f&&
(f=e.activeModel.get("mod_name"));f=ThemifyStyles.getStyleOptions(f);if("visual"===e.mode){var g={};var h={};for(var m=e.liveStylingInstance.prefix,r=this.breakpointsReverse,p=r.length-1;-1<p;--p){var l=ThemifyStyles.getSheet(r[p]),v=l.cssRules?l.cssRules:l.rules;if(0<v.length)for(g[r[p]]===n&&(g[r[p]]={},h[r[p]]={}),l=v.length-1;-1<l;--l)if(-1!==v[l].selectorText.indexOf(m)){var w=v[l].cssText.split("{")[1].split(";");g[r[p]][l]===n&&(g[r[p]][l]={},h[r[p]][l]={});for(var B=w.length-2;-1<B;--B){var q=
w[B].trim().split(": ")[0].trim();if(v[l].style[q]!==n){var t=v[l].style[q];g[r[p]][l][q]=t;h[r[p]][l][q]={a:"",b:t};v[l].style[q]=""}}}}"module"!==e.activeModel.get("elType")&&(e.liveStylingInstance.removeBgSlider(),e.liveStylingInstance.removeBgVideo(),e.liveStylingInstance.getComponentBgOverlay().remove(),e.liveStylingInstance.bindBackgroundMode("repeat","background_repeat"),e.liveStylingInstance.bindBackgroundMode("repeat","b_r_h"),e.liveStylingInstance.$liveStyledElmt[0].removeAttribute("data-tb_slider_videos"),
e.liveStylingInstance.$liveStyledElmt.children(".tb_slider_videos,.tb_row_frame").remove())}for(p in this.values)m=-1!==p.indexOf("_color")?"color":-1!==p.indexOf("_style")?"style":!1,r=null,0===p.indexOf("breakpoint_")||f[p]!==n||-1!==p.indexOf("_apply_all")?r=!0:-1!==p.indexOf("_unit")?(m=p.replace(/_unit$/ig,"",""),f[m]!==n&&(r=!0)):-1!==p.indexOf("_w")?(m=p.replace(/_w$/ig,"",""),f[m]!==n&&"font_select"===f[m].type&&(r=!0)):!1!==m&&(m=p.replace("_"+m,"_width"),f[m]!==n&&"border"===f[m].type&&
(r=!0)),!0===r&&delete this.values[p];f=null;for(p=d.length-1;-1<p;--p)if(f=d[p].value,m=d[p].classList,"px"!==f&&"solid"!==f&&"default"!==f&&"linear"!==f&&"n"!==f&&!m.contains("exclude-from-reset-field"))if(r=d[p].getAttribute("id"),this.values[r]!==n&&delete this.values[r],m.contains("tb_radio_input_container"))m.contains("tb_icon_radio")?(f=c.querySelector('[name="'+r+'"]:checked'),null!==f&&f.parentNode.click()):(f=c.querySelector('[name="'+r+'"]'),!0!==f.checked&&(f.checked=!0,u.triggerEvent(f,
"change")));else if(m.contains("tb_uploader_input"))f&&d[p].parentNode.getElementsByClassName("tb_delete_thumb")[0].click(a);else if(m.contains("minicolors-input"))m=d[p].closest(".minicolors"),r=m.getElementsByClassName("tb_clear_btn")[0],f&&(d[p].value="",d[p].removeAttribute("data-opacity"),f=m.getElementsByClassName("minicolors-swatch-color")[0],f.style.opacity=f.style.backgroundColor="",m.nextElementSibling.value=""),r!==n&&(r.style.display="none");else if(f&&"SELECT"===d[p].tagName){if(m.contains("font-family-select"))d[p].value=
"";else if(m.contains("font-weight-select")){for(d[p].value="";d[p].firstChild;)d[p].removeChild(d[p].firstChild);this.font_select.updateFontVariant("",d[p],this)}else if(m.contains("tb_unit"))d[p].value=m.contains("tb_frame_unit")?"%":"px";else{if("repeat"===f&&"background_repeat"===r||"scroll"===f&&"background_attachment"===r||"left top"===f&&"background_position"===r)continue;d[p].selectedIndex=0}m.contains("themify-gradient-type")||u.triggerEvent(d[p],"change")}else if(m.contains("themify-layout-icon"))f=
d[p].getElementsByClassName("tfl-icon")[0],f.classList.contains("selected")||f.click();else if(m.contains("tb_row_js_wrapper")){f=d[p].getElementsByClassName("tb_repeatable_field");for(l=f.length-1;-1<l;--l)f[l].parentNode.removeChild(f[l]);d[p].getElementsByClassName("add_new")[0].click()}else m.contains("themify-gradient-angle")?d[p].value="180":m.contains("themify-gradient")?d[p].nextElementSibling.click():(d[p].value="",f=k(d[p]),f.closest(".tb_gradient_container").is(":visible")&&f.trigger(m.contains("tb_range")?
"keyup":"change"));"visual"===e.mode&&(e.liveStylingInstance.tempData=g,e.liveStylingInstance.undoData=h)},create:function(a){var b=l.createDocumentFragment();if("tabs"===a.type)b.appendChild(this.tabs.render(a,this));else for(var c in a)if(!0!==a[c].hide){var d=a[c].type,f=this[d].render(a[c],this);if("separator"!==d&&"expand"!==d&&"group"!==d){var g=a[c].id;"tabs"!==d&&"multi"!==d&&("styling"===this.clicked?("visual"===e.mode&&a[c].prop!==n&&(this.styles[g]=k.extend(!0,{},a[c])),this.stylesData[g]=
k.extend(!0,{},a[c])):"visual"===e.mode&&"setting"===this.clicked&&this.values[g]!==n&&!0!==this.is_repeat&&(this.settings[g]=this.values[a[c].id],a[c].units!==n&&this.values[g+"_unit"]!==n&&(this.settings[g+"_unit"]=this.values[g+"_unit"])));if("builder"!==d){var h=l.createElement("div");h.className="tb_field";g!==n&&(h.className+=" "+g);a[c].wrap_class!==n&&(h.className+=" "+a[c].wrap_class);"custom_css"===d?h.appendChild(this.separator.render(a[c],this)):"toggle_switch"===d?h.className+=" switch-wrapper":
"slider"===d?h.className+=" tb_slider_options":"message"===d&&a[c].hideIf!==n&&new Function("return "+a[c].hideIf)?h.className+=" tb_hide_option":a[c].required!==n&&"setting"===this.clicked&&(g=a[c].required.message!==n?a[c].required.message:themifyBuilder.i18n.not_empty,h.setAttribute("data-validation",a[c].required.rule!==n?a[c].required.rule:"not_empty"),h.setAttribute("data-error-msg",g),h.className+=" tb_must_validate");"styling"===this.clicked&&!1===a[c].is_responsive&&(h.className+=" responsive_disable");
g=this.getTitle(a[c]);if(!1!==g){var g=g.trim(),m=l.createElement("div"),r=l.createElement("span");m.className="tb_label";r.className="tb_label_text";r.textContent=g;m.appendChild(r);""===g&&(m.className+=" tb_empty_label");a[c].help!==n&&""!==a[c].label&&(m.classList.add("contains-help"),r.appendChild(this.help(a[c].help)));h.appendChild(m);"multi"!==d?(d=l.createElement("div"),d.className="tb_input",d.appendChild(f),h.appendChild(d)):h.appendChild(f)}else h.appendChild(f);b.appendChild(h)}else b.appendChild(f)}else b.appendChild(f)}return b},
tabs:{click:0,render:function(a,b){var c=a.options,d=l.createDocumentFragment(),f=l.createDocumentFragment(),e=l.createElement("ul"),h="styling"===b.clicked&&0===this.click&&"module"===b.component?l.createElement("div"):null,m=l.createElement("div"),r=null;m.className="tb_tabs";e.className="clearfix tb_tab_wrapper";++this.click;for(var p in c){var k=l.createElement("li"),v=l.createElement("a"),w=l.createElement("div"),B="tb_"+this.click+"_"+p;w.id=B;w.className="tb_tab";v.href="#"+B;v.textContent=
c[p].label!==n?c[p].label:b.label[p];null===r?(r=!0,k.className="current",w.appendChild(b.create(c[p].options)),w.style.display="block"):function(){var a=p;w.addEventListener("themify_builder_tabsactive",function F(d){this.appendChild(b.create(c[a].options));"setting"===b.clicked&&b.setUpEditors();b.callbacks();w.removeEventListener("themify_builder_tabsactive",F,{once:!0,passive:!0});a=null},{once:!0,passive:!0})}();v.addEventListener("click",b.switchTabs);k.appendChild(v);d.appendChild(k);f.appendChild(w)}e.appendChild(d);
null!==h?(h.className="tb_styling_tab_nav",h.appendChild(e),m.appendChild(h)):m.appendChild(e);m.appendChild(f);setTimeout(b.callbacks.bind(b),5);return m}},group:{render:function(a,b){var c=l.createElement("div");a.wrap_class!==n&&(c.className+=" "+a.wrap_class);c.appendChild(b.create(a.options));return c}},builder:{render:function(a,b){b.is_repeat=!0;var c=l.createDocumentFragment(),d=l.createElement("div"),f=l.createElement("a"),e=this;d.className="tb_row_js_wrapper tb_lb_option";a.wrap_class!==
n&&(d.className+=" "+a.wrap_class);d.id=a.id;f.className="add_new tb_icon add";f.href="#";f.textContent=a.new_row!==n?a.new_row:b.label.new_row;if(b.values[a.id]!==n){for(var h=b.values[a.id].slice(),m=l.createDocumentFragment(),r=k.extend(!0,{},b.values),p=0,x=h.length;p<x;++p)b.values=h[p],m.appendChild(this.builderFields(a,b));d.appendChild(m);b.values=r;r=h=m=null}else d.appendChild(this.builderFields(a,b));d.appendChild(f);c.appendChild(d);b.afterRun.push(function(){e.sortable(d,b);f.addEventListener("click",
function(c){c.preventDefault();c.stopPropagation();b.is_repeat=!0;f.parentNode.insertBefore(e.builderFields(a,b),f);setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();b.callbacks()},5);b.control.preview(d,null,{repeat:!0});b.is_repeat=null})});b.is_repeat=null;return c},builderFields:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),h=l.createElement("div"),m=l.createElement("ul"),r=l.createElement("li"),p=l.createElement("li"),
n=l.createElement("div"),v=l.createElement("div"),w=this;d.className="tb_repeatable_field clearfix";f.className="tb_repeatable_field_top";g.className="row_menu";h.tabIndex="-1";h.className="menu_icon";m.className="tb_down";r.className="tb_duplicate_row";p.className="tb_delete_row";r.textContent=b.label.duplicate;p.textContent=b.label["delete"];n.className="toggle_row";v.className="tb_repeatable_field_content";c.appendChild(b.create(a.options));v.appendChild(c);m.appendChild(r);m.appendChild(p);g.appendChild(h);
g.appendChild(m);f.appendChild(g);f.appendChild(n);d.appendChild(f);d.appendChild(v);setTimeout(function(){f.addEventListener("click",function(c){c.stopPropagation();c.preventDefault();var f=c.target.classList;if(f.contains("tb_delete_row")){if(confirm(themifyBuilder.i18n.rowDeleteConfirm)){var g=c.target.closest(".tb_row_js_wrapper");w["delete"](c.target);b.control.preview(g,null,{repeat:!0});u.triggerEvent(g,"duplicate")}}else f.contains("tb_duplicate_row")?(b.is_repeat=!0,c=k.extend(!0,{},b.values),
b.values=e.Forms.serialize(d,!0,!0),d.parentNode.insertBefore(w.builderFields(a,b),d.nextElementSibling),b.values=c,c=null,setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();b.callbacks();u.triggerEvent(d.parentNode,"duplicate")},5),b.control.preview(d,null,{repeat:!0}),b.is_repeat=null):f.contains("toggle_row")&&w.toggle(c.target);f.contains("menu_icon")||e.Utils.hideOnClick(m)})}.bind(this),1500);return d},sortable:function(a,b){var c=k(a),d=!1,f={};c.sortable({items:".tb_repeatable_field",
handle:".tb_repeatable_field_top",axis:"y",placeholder:"tb_state_highlight",tolerance:"pointer",cursor:"move",cancel:".row_menu",start:_.debounce(function(b,c){if(tinyMCE!==n)for(var d=a.getElementsByClassName("tb_lb_wp_editor"),e=d.length-1;-1<e;--e){var g=d[e].id;f[g]=tinymce.get(g).getContent();tinyMCE.execCommand("mceRemoveEditor",!1,g)}},300),stop:_.debounce(function(e,h){if(tinyMCE!==n){for(var g in f)tinyMCE.execCommand("mceAddEditor",!1,g),tinymce.get(g).setContent(f[g]);f={}}d&&(h.item.removeClass("collapsed").find(".tb_repeatable_field_content").show(),
d=!1);c.find(".tb_state_highlight").remove();b.control.preview(a,null,{repeat:!0});u.triggerEvent(a,"sortable")},300),beforeStart:function(a,b,f){e.Utils.hideOnClick(f.item[0].getElementsByClassName("tb_down")[0]);c.find(".tb_state_highlight").height(30);f.item[0].classList.contains("collapsed")||(f.item.addClass("collapsed").find(".tb_repeatable_field_content").hide(),d=!0,c.sortable("refresh"))}})},toggle:function(a){k(a).closest(".tb_repeatable_field").toggleClass("collapsed").find(".tb_repeatable_field_content").slideToggle()},
"delete":function(a){k(a).closest(".tb_repeatable_field").remove()}},multi:{render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div");d.className="tb_multi_fields tb_fields_count_"+a.options.length;c.appendChild(b.create(a.options));d.appendChild(c);return d}},color:{is_typing:null,controlChange:function(a,b,c){var d=this,f=k(a),g=c.id,h=l.createElement("div");h.className="tb_clear_btn";h.addEventListener("click",function(){h.style.display="none";a.value="";f.trigger("keyup")},
{passive:!0});f.minicolors({opacity:1,changeDelay:10,beforeShow:function(){var a=q.Lightbox.$lightbox,b=f.closest(".minicolors"),c=b.find(".minicolors-panel");c.css("visibility","hidden").show();a.offset().left+a.width()<=c.offset().left+c.width()?b[0].classList.add("tb_minicolors_right"):b[0].classList.remove("tb_minicolors_right");c.css("visibility","").hide();e.hasChanged=!0},hide:function(){h.style.display=""!==a.value?"block":"none"},change:function(a,c){a?c&&("0.99"==c?c=1:0>=parseFloat(c)&&
(c=0)):c="";d.is_typing||c===l.activeElement||(b.value=c);a&&0>=parseFloat(k(this).minicolors("opacity"))&&k(this).minicolors("opacity",0);"visual"===e.mode&&u.triggerEvent(this,"themify_builder_color_picker_change",{id:g,val:a?k(this).minicolors("rgbaString"):""})}}).minicolors("show");c=function(b){var c=parseFloat(this.value.trim());if(1<c||isNaN(c)||""===c||0>c)c=a.value?1:"","blur"===b.type&&(this.value=c);d.is_typing="keyup"===b.type;f.minicolors("opacity",c)};b.addEventListener("blur",c,{passive:!0});
b.addEventListener("keyup",c,{passive:!0});a.parentNode.appendChild(h);a.setAttribute("data-minicolors-initialized",!0)},setColor:function(a,b,c,d){var f=d,g="";""!==d&&(-1!==d.indexOf("_")?(e.Utils.toRGBA(d),d=d.split("_"),(g=d[1])?0>=parseFloat(g)&&(g=0):g=1,f=d[0]):(f=d,g=1),-1===f.indexOf("#")&&(f="#"+f));a.value=f;a.setAttribute("data-opacity",g);b.style.background=f;b.style.opacity=g;c.value=g},update:function(a,b,c){a=t.document.getElementById(a);null!==a&&(c=a.parentNode,b===n&&(b=""),this.setColor(a,
c.getElementsByClassName("minicolors-swatch-color")[0],c.nextElementSibling,b))},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),f=l.createElement("div"),e=l.createElement("input"),h=l.createElement("input"),m=l.createElement("span"),r=l.createElement("span"),p=b.getStyleVal(a.id),k=this;d.className="minicolors_wrapper";f.className="minicolors minicolors-theme-default";e.type="text";e.className="minicolors-input";a["class"]!==n&&(e.className+=" "+a["class"]);!0===b.is_repeat?
(e.className+=" tb_lb_option_child",e.dataset.inputId=a.id):(e.id=a.id,e.className+=" tb_lb_option");m.className="minicolors-swatch";r.className="minicolors-swatch-color";h.type="text";h.className="color_opacity";m.appendChild(r);f.appendChild(e);f.appendChild(m);d.appendChild(f);d.appendChild(h);b.initControl(e,a);m.addEventListener("click",function w(){d.insertAdjacentElement("afterbegin",e);f.parentNode.removeChild(f);k.controlChange(e,h,a);m.removeEventListener("click",w,{once:!0,passive:!0})},
{once:!0,passive:!0});e.addEventListener("focusin",function B(){m.click();e.removeEventListener("focusin",B,{once:!0,passive:!0})},{once:!0,passive:!0});h.addEventListener("focusin",function(){e.dataset.minicolorsInitialized?e.focus():(e.dataset.opacity=this.value,m.click())},{passive:!0});p!==n&&this.setColor(e,r,h,p);c.appendChild(d);a.after!==n&&c.appendChild(b.after(a));a.description!==n&&c.appendChild(b.description(a.description));a.tooltip!==n&&c.appendChild(b.tooltip(a.tooltip));return c}},
text:{update:function(a,b,c){a=t.document.getElementById(a);null!==a&&(a.value=b!==n?b:"")},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("input"),f=b.getStyleVal(a.id);d.type="text";!0===b.is_repeat?(d.className="tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);a.placeholder!==n&&(d.placeholder=a.placeholder);f!==n&&(d.value=f);a["class"]!==n&&(d.className+=" "+a["class"]);c.appendChild(b.initControl(d,a));a.unit!==n&&c.appendChild(b.select.render(a.unit,
b));a.after!==n&&c.appendChild(b.after(a));a.description!==n&&c.appendChild(b.description(a.description));a.tooltip!==n&&c.appendChild(b.tooltip(a.tooltip));return c}},file:{_frames:{},clicked:null,browse:function(a,b,c,d){var f=this;a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=c.label.upload_image;var g=c.label.insert_image;if(f._frames[d]!==n)var m=f._frames[d];else m=wp.media.frames.file_frame=wp.media({title:a,library:{type:d},button:{text:g},multiple:!1}),f._frames[d]=
m;m.off("select").on("select",function(){e.ActionBar.disable=!0;var a=m.state().get("selection").first().toJSON();b.value=a.url;u.triggerEvent(b,"change");e.hasChanged=!0;k(b).trigger("change");var c=q.Lightbox.$lightbox.find("#"+b.id+"_id")[0];c!==n&&(c.value=a.id)});m.on("close",function(){e.ActionBar.disable=!0;setTimeout(function(){e.ActionBar.disable=null},5)});m.open()});"image"===d&&b.addEventListener("change",function(b){e.hasChanged=!0;f.setImage(a,this.value.trim())},{passive:!0})},setImage:function(a,
b){for(;a.firstChild;)a.removeChild(a.firstChild);if(b){var c=l.createElement("img");c.width=40;c.height=40;c.src=b;a.appendChild(c)}},update:function(a,b,c){a=t.document.getElementById(a);null!==a&&(b===n&&(b=""),a.value=b,this.setImage(a.parentNode.getElementsByClassName("thumb_preview")[0],b))},render:function(a,b,c){var d=l.createElement("div"),f=l.createElement("input"),e=l.createElement("a"),h=l.createElement("span"),m=c.getStyleVal(b.id);f.type="text";f.className="tb_uploader_input";f.required=
!0;f.setAttribute("pattern",/.*\S.*/.source);f.setAttribute("autocomplete","off");if(!0===c.is_repeat){f.className+=" tb_lb_option_child";var r=Math.random().toString(36).substr(2,7);f.dataset.inputId=b.id}else f.className+=" tb_lb_option",r=b.id;f.id=r;m!==n&&(f.value=m);h.className="tb_clear_input";e.className="tb_media_uploader tb_upload_btn thumb_preview tb_plus_btn";e.href="#";e.dataset.libraryType=a;e.title=c.label.browse_image;d.className="tb_uploader_wrapper";d.appendChild(c.initControl(f,
b));d.appendChild(h);d.appendChild(e);"image"===a&&this.setImage(e,m);this.browse(e,f,c,a);b.after!==n&&d.appendChild(c.after(b));b.description!==n&&d.appendChild(c.description(b.description));b.tooltip!==n&&d.appendChild(c.tooltip(b.tooltip));if(null===this.clicked&&!0===c.is_new&&"setting"===c.clicked&&("image"===c.type||"pro-image"===c.type)){this.clicked=!0;var p=this;c.afterRun.push(function(){e.click();p.clicked=null})}return d}},image:{render:function(a,b){return b.file.render("image",a,b)}},
video:{render:function(a,b){return b.file.render("video",a,b)}},audio:{render:function(a,b){return b.file.render("audio",a,b)}},icon_radio:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();b.target!==a&&(b=b.target.closest("label").getElementsByTagName("input")[0],!0===b.checked?(b.checked=!1,b.value=n):(b.checked=!0,b.value=b.getAttribute("data-value")),e.hasChanged=!0,u.triggerEvent(b,"change"))})},render:function(a,b){return b.radioGenerate("icon_radio",
a)}},radio:{controlChange:function(a){if(a.classList.contains("tb_radio_dnd"))var b=a.closest(".tb_repeatable_field_content");else b=a.closest(".tb_tab"),null===b&&(b=a.closest(".tb_expanded_opttions"),null===b&&(b=q.Lightbox.$lightbox[0]));var c=a.parentNode.parentNode.getElementsByTagName("input");a=a.value;for(var d=c.length-1;-1<d;--d){var f=c[d].value;if(a!==f){f=b.getElementsByClassName("tb_group_element_"+f);for(var e=f.length-1;-1<e;--e)f[e].style.display="none"}}f=b.getElementsByClassName("tb_group_element_"+
a);for(e=f.length-1;-1<e;--e)f[e].style.display="block"},update:function(a,b,c){a=t.document.getElementById(a);if(null!==a){c=a.getElementsByTagName("input");for(var d=a.classList.contains("tb_icon_radio"),f=null,e=c.length-1;-1<e;--e)if(c[e].value===b){f=c[e];break}null===f&&(b=a.dataset["default"],b!==n&&(f=a.querySelector('[value="'+b+'"]')),!1===d&&null===f&&(f=c[0]));if(null!==f)f.checked=!0,!1===d&&a.classList.contains("tb_option_radio_enable")&&this.controlChange(f);else if(!0===d)for(e=c.length-
1;-1<e;--e)c[e].checked=!1}},render:function(a,b){return b.radioGenerate("radio",a)}},icon_checkbox:{render:function(a,b){return b.checkboxGenerate("icon_checkbox",a)}},checkbox:{update:function(a,b,c){c=t.document.getElementById(a);if(null!==c){a=c.getElementsByTagName("input");c=c.classList.contains("tb_option_checkbox_enable");b=b?b.split("|"):[];for(var d=a.length-1;-1<d;--d)a[d].checked=-1!==b.indexOf(a[d].value),!0===c&&this.controlChange(a[d])}},controlChange:function(a){var b=a.classList.contains("tb_radio_dnd")?
a.closest(".tb_repeatable_field_content"):q.Lightbox.$lightbox[0],c=a.parentNode.parentNode;a=c.getElementsByTagName("input");for(var c=c.classList.contains("tb_option_checkbox_revert"),d=a.length-1;-1<d;--d)for(var f=b.getElementsByClassName("tb-checkbox_element_"+a[d].value),e=a[d].checked,h=f.length-1;-1<h;--h)!0===c&&!1===e||!1===c&&!0===e?f[h].classList.remove("_tb_hide_binding"):f[h].classList.add("_tb_hide_binding")},render:function(a,b){return b.checkboxGenerate("checkbox",a)}},radioGenerate:function(a,
b){var c=l.createDocumentFragment(),d=l.createDocumentFragment(),f=l.createElement("div"),e="icon_radio"===a,h=this.getOptions(b),m=b["default"]!==n?b["default"]:!1,r=this.getStyleVal(b.id),p=!0===b.option_js,k=this,v=null;f.className="tb_radio_input_container";f.setAttribute("tabIndex","-1");if(!0===p){var w=[];f.className+=" tb_option_radio_enable"}!0===e&&(f.className+=" tb_icon_radio",v=b.no_toggle===n);if(!0===this.is_repeat){f.className+=" tb_lb_option_child";var B=Math.random().toString(36).substr(2,
7);f.dataset.inputId=b.id}else f.className+=" tb_lb_option",f.id=B=b.id;!1!==m?f.dataset["default"]=m:!1===e&&r===n&&(m=h[0].value);b.before!==n&&d.appendChild(l.createTextNode(b.before));for(var q=0,t=h.length;q<t;++q){var u=l.createElement("label"),A=l.createElement("input");A.type="radio";A.name=B;A.value=h[q].value;!0===e&&A.setAttribute("data-value",h[q].value);!0===this.is_repeat&&(A.className="tb_radio_dnd");b["class"]!==n&&(A.className+=!0===this.is_repeat?" "+b["class"]:b["class"]);!0===
h[q].disable&&(A.disabled=!0);if(r===h[q].value||r===n&&m===h[q].value)A.checked=!0,!0===p&&w.push(A);u.appendChild(A);!0===p&&A.addEventListener("change",function(){this.parentNode.parentNode.blur();k.radio.controlChange(this)},{passive:!0});if(!0===e){if(h[q].icon!==n){var D=l.createElement("span");D.className="tb_icon_wrapper";D.innerHTML=h[q].icon;u.insertAdjacentElement("beforeend",D)}h[q].label_class!==n&&(u.className+=h[q].label_class);h[q].name!==n&&(D=l.createElement("span"),D.className=
"themify_tooltip",D.textContent=h[q].name,u.appendChild(D))}else h[q].name!==n&&(D=l.createElement("span"),D.textContent=h[q].name,u.appendChild(D));c.appendChild(u);b.new_line!==n&&c.appendChild(l.createElement("br"));this.initControl(A,b)}f.appendChild(c);d.appendChild(f);b.after!==n&&d.appendChild(k.after(b));b.description!==n&&d.appendChild(k.description(b.description));!0===e&&!0===v&&k.icon_radio.controlChange(f);!0===p&&this.radioChange.push(function(){for(var a=0,b=w.length;a<b;++a)k.radio.controlChange(w[a]);
w=null});return d},checkboxGenerate:function(a,b){var c=l.createDocumentFragment(),d=l.createDocumentFragment(),f=l.createElement("div"),e=this.getOptions(b),h="icon_checkbox"===a,m=null,r=null,p=!0===b.option_js,k=b.new_line===n,v=this.getStyleVal(b.id);f.className="themify-checkbox";if(!0===p){var w=this;var q=[];f.className+=" tb_option_checkbox_enable";b.reverse!==n&&(f.className+=" tb_option_checkbox_revert")}!0===this.is_repeat?(f.className+=" tb_lb_option_child",f.dataset.inputId=b.id):(f.className+=
" tb_lb_option",f.id=b.id);b.wrap_checkbox!==n&&(f.className+=" "+b.wrap_checkbox);v===n?b["default"]!==n&&(m=b["default"],r=Array.isArray(m)):v=!1!==v?v.split("|"):n;!0===h&&(f.className+=" tb_icon_checkbox");b.before!==n&&d.appendChild(l.createTextNode(b.before));for(var t=0,u=e.length;t<u;++t){var F=l.createElement("label"),A=l.createElement("input");A.type="checkbox";A.className="tb-checkbox";A.value=e[t].name;!0===this.is_repeat&&(A.className+=" tb_radio_dnd");b["class"]!==n&&(A.className+=" "+
b["class"]);if(v!==n&&-1!==v.indexOf(e[t].name)||m===e[t].name||!0===r&&-1!==m.indexOf(e[t].name))A.checked=!0;!0===p&&(A.addEventListener("change",function(){w.checkbox.controlChange(this)},{passive:!0}),q.push(A));!1===k&&(F.className="pad-right");F.appendChild(A);if(!0===h){if(F.insertAdjacentHTML("beforeend",e[t].icon),e[t].value!==n){var D=l.createElement("span");D.className="themify_tooltip";D.textContent=e[t].value;F.appendChild(D)}}else e[t].value!==n&&F.appendChild(l.createTextNode(e[t].value));
c.appendChild(F);e[t].help!==n&&c.appendChild(this.help(e[t].help));!0===k&&c.appendChild(l.createElement("br"));this.initControl(A,b)}f.appendChild(c);d.appendChild(f);b.after!==n&&(b.label!==n&&""!==b.label||b.help===n||""===b.help?d.appendChild(this.after(b)):(f.classList.add("contains-help"),f.appendChild(this.after(b))));b.description!==n&&d.appendChild(this.description(b.description));!0===p&&this.afterRun.push(function(){for(var a=0,b=q.length;a<b;++a)w.checkbox.controlChange(q[a]);q=null});
return d},date:{loaded:null,render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("input"),e=l.createElement("button"),g=this,h=function(){var b=t.$.fn.themifyDatetimepicker?t.$.fn.themifyDatetimepicker:t.$.fn.datetimepicker;if(b){var c=a.picker!==n?a.picker:{};e.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();d.value="";d.dispatchEvent(new Event("change"));this.style.display="none"});b.call(k(d),{showButtonPanel:!0,changeYear:!0,dateFormat:c.dateformat||
"yy-mm-dd",timeFormat:c.timeformat||"HH:mm:ss",stepMinute:5,stepSecond:5,controlType:c.timecontrol||"select",oneLine:!0,separator:c.timeseparator||" ",onSelect:function(a){e.style.display=""===a?"none":"block";d.dispatchEvent(new Event("change"))},beforeShow:function(){t.document.getElementById("ui-datepicker-div").classList.add("themify-datepicket-panel")}})}};d.type="text";d.className="themify-datepicker";!0===b.is_repeat?(d.className+=" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=
" tb_lb_option",d.id=a.id);d.readonly=!0;e.className="themify-datepicker-clear";e.textContent=b.label.clear_date;b.values[a.id]!==n&&(d.value=b.values[a.id]);a["class"]!==n&&(d.className+=" "+a["class"]);d.value||(e.style.display="none");c.appendChild(b.initControl(d,a));c.appendChild(e);a.after!==n&&c.appendChild(b.after(a));a.description!==n&&c.appendChild(b.description(a.description));null===this.loaded?b.afterRun.push(function(){t.Themify.LoadCss(themifyBuilder.meta_url+"css/jquery-ui-timepicker.min.css",
tbLocalScript.version);t.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/datepicker.min.js",function(){t.Themify.LoadAsync(themifyBuilder.meta_url+"js/jquery-ui-timepicker.min.js",function(){g.loaded=!0;h()},tbLocalScript.version,null,function(){return t.$.fn.themifyDatetimepicker!==n||t.$.fn.datetimepicker!==n})},tbLocalScript.version,null,function(){return t.$.fn.datepicker!==n})}):b.afterRun.push(h);return c}},gradient:{controlChange:function(a,b,c,d,f,g,h,m,r){var p=!1,l=k(b),n=a.getStyleVal(c.id),
w={angle:a.getStyleVal(g.id),onChange:function(a,b){p&&(a=b="");"visual"===e.mode&&u.triggerEvent(c,"themify_builder_gradient_change",{val:b});c.value=a;e.hasChanged=!0},onInit:function(){b.style.display="block"}};n&&(w.gradient=n,c.value=n);r||l.ThemifyGradient(w);var q=l.data("themifyGradient"),t=function(a){var b=g.parentNode;b.classList.contains("gradient-angle-knob")||(b=g);"radial"===a?(m.style.display=b.style.display="none",h.parentNode.style.display="inline-block"):(m.style.display=b.style.display=
"inline-block",h.parentNode.style.display="none")};r?(q.settings=k.extend({},q.settings,w),q.settings.type=a.getStyleVal(f.id),q.settings.circle=h.checked,q.isInit=!1,q.update(),q.isInit=!0):(d.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();p=!0;q.settings.gradient=k.ThemifyGradient["default"];q.update();p=!1}),f.addEventListener("change",function(a){a=this.value;q.setType(a);t(a)},{passive:!0}),h.addEventListener("change",function(){q.setRadialCircle(this.checked)},
{passive:!0}),g.addEventListener("mousedown",function F(){k(this).knob({min:0,max:360,step:1,width:63,height:63,thickness:.45,cursor:!0,lineCap:"round",change:function(a){q.setAngle(Math.round(a))}});this.removeAttribute("style");var a=this.parentNode;a.classList.add("gradient-angle-knob");a.removeAttribute("style");a.insertAdjacentElement("afterbegin",this);this.addEventListener("change",function(){var a=parseInt(this.value);a||(a=0);q.setAngle(a)},{passive:!0});g.removeEventListener("mousedown",
F,{once:!0,passive:!0})},{once:!0,passive:!0}));t(a.getStyleVal(f.id))},update:function(a,b,c){var d=a+"-gradient";b=t.document.getElementById(d);if(null!==b){var e=t.document.getElementById(d+"-angle"),d=t.document.getElementById(d+"-type");a=t.document.getElementById(a+"-circle-radial");var g=a.previousElementSibling;this.controlChange(c,b.previousElementSibling,b,null,d,e,a.getElementsByClassName("tb-checkbox")[0],g,!0)}},render:function(a,b){var c=l.createElement("div"),d=l.createDocumentFragment(),
e=l.createElement("div"),g=l.createElement("select"),h=["linear","radial"],m=l.createElement("input"),r=l.createElement("span"),p=l.createElement("div"),k=l.createElement("input"),v=l.createElement("a");c.className="themify-gradient-field";a.option_js!==n&&(c.className+=" tb_group_element_gradient");e.className="selectwrapper";g.className="tb_lb_option themify-gradient-type";g.id=a.id+"-gradient-type";m.type="text";m.className="xsmall tb_lb_option themify-gradient-angle";m.id=a.id+"-gradient-angle";
m.autocomplete="off";m.value=180;r.textContent=b.label.rotation;p.className="tb_gradient_container";p.tabIndex=-1;k.type="hidden";k.className="themify-gradient tb_lb_option";k.dataset.id=a.id;k.id=a.id+"-gradient";v.className="tb_clear_gradient ti-close";v.href="#";v.title=b.label.clear_gradient;for(var w=0;2>w;++w){var q=l.createElement("option");q.value=h[w];q.textContent=b.label[h[w]];g.appendChild(q)}e.appendChild(g);d.appendChild(e);d.appendChild(m);d.appendChild(r);d.appendChild(b.checkboxGenerate("checkbox",
{id:a.id+"-circle-radial",options:[{name:"1",value:b.label.circle_radial}]}));d.appendChild(p);d.appendChild(k);d.appendChild(v);c.appendChild(d);var t=this;b.initControl(k,a);b.afterRun.push(function(){t.controlChange(b,p,k,v,g,m,c.getElementsByClassName("tb-checkbox")[0],r)});return c}},fontColor:{update:function(a,b,c){c.radio.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isFontColor=!0;var c={id:a.id,type:"radio",option_js:!0,isFontColor:!0,options:[{value:a.s+"_solid",name:b.label.solid},
{value:a.g+"_gradient",name:b.label.gradient}]},d=b.radioGenerate("radio",c),e=d.querySelector(".tb_lb_option"),c=k.extend(!0,{},a);c.label="";c.type="color";c.id=a.s;c.prop="color";c.wrap_class="tb_group_element_"+a.s+"_solid";var g=b.create([c]);c.id=a.g;c.wrap_class="tb_group_element_"+a.g+"_gradient";c.type="gradient";c.prop="background-image";var h=b.create([c]);c=c=null;b.afterRun.push(function(){var a=e.parentNode.closest(".tb_field");a.parentNode.insertBefore(g,a.nextElementSibling);a.parentNode.insertBefore(h,
a.nextElementSibling);h=g=e=null});return d}},imageGradient:{update:function(a,b,c){c.radio.update(a+"-type",c.getStyleVal(a+"-type"),c);c.file.update(a,b,c);c.gradient.update(a,b,c);a=t.document.getElementById(a);if(null!==a){b=a.closest(".tb_tab");a=b.getElementsByClassName("tb_image_options");b=b.getElementsByClassName("tb_gradient_image_color")[0].getElementsByClassName("minicolors-input")[0].id;c.color.update(b,c.getStyleVal(b),c);for(var d=0;d<a.length;++d)b=a[d].getElementsByClassName("tb_lb_option")[0].id,
c.select.update(b,c.getStyleVal(b),c)}},render:function(a,b){var c=l.createElement("div"),d=l.createDocumentFragment(),e=l.createElement("div");c.className="tb_image_gradient_field";e.className="tb_group_element_image";d.appendChild(b.radioGenerate("radio",{type:a.type,id:a.id+"-type",options:[{name:b.label.image,value:"image"},{name:b.label.gradient,value:"gradient"}],option_js:!0}));var g=k.extend(!0,{},a);g.type="image";g["class"]="xlarge";e.appendChild(b.file.render("image",k.extend(!0,{},g),
b));d.appendChild(e);g.type="gradient";delete g["class"];delete g.binding;d.appendChild(b.gradient.render(g,b));b.afterRun.push(function(){var a={wrap_class:"tb_group_element_image",type:"group",options:[]};g.prop="background-color";g.wrap_class="tb_gradient_image_color";g.label=b.label.bg_c;g.type="color";g.id=g.colorId;a.options.push(k.extend({},g));g.prop="background-mode";g.wrap_class="tb_image_options";g.label=b.label.b_r;g.repeat=!0;g.type="select";g.id=g.repeatId;a.options.push(k.extend({},
g));g.prop="background-position";g.wrap_class="tb_image_options";g.label=b.label.b_p;g.position=!0;g.type="select";g.id=g.posId;delete g.repeat;a.options.push(k.extend({},g));var c=e.parentNode.closest(".tb_field");c.parentNode.insertBefore(b.create([a]),c.nextElementSibling);g=null});c.appendChild(d);return c}},layout:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();if(b.target!==a&&(b=b.target.closest("a"),null!==b)){for(var c=this.getElementsByClassName("tfl-icon"),
d=c.length-1;-1<d;--d)c[d].classList.remove("selected");b.classList.add("selected");e.hasChanged=!0;u.triggerEvent(this,"change",{val:b.id})}})},update:function(a,b,c){c=t.document.getElementById(a);if(null!==c){a=c.getElementsByClassName("tfl-icon");for(var d=a.length-1;-1<d;--d)b===a[d].id?a[d].classList.add("selected"):a[d].classList.remove("selected");b===n&&(b=c.dataset["default"],b=b===n?a[0]:b.querySelector("#"+b),b.classList.add("selected"))}},render:function(a,b){var c=l.createDocumentFragment(),
d=l.createElement("div"),f=b.getStyleVal(a.id),g=b.getOptions(a);!0===a.color&&!0===a.transparent&&(g=g.slice(),g.push({img:"transparent",value:"transparent",label:b.label.transparent}));d.className="themify-layout-icon";!0===b.is_repeat?(d.className+=" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);a["class"]!==n&&(d.className+=" "+a["class"]);f===n&&(f=themifyBuilder.modules[b.type],f=f!==n&&f.defaults!==n&&f.defaults[a.id]?f.defaults[a.id]:g[0].value);for(var h=
0,m=g.length;h<m;++h){var r=l.createElement("a"),p=l.createElement("span");r.href="#";r.className="tfl-icon";r.id=g[h].value;f===g[h].value&&(r.className+=" selected");p.className="themify_tooltip";p.textContent=g[h].label;if("sprite"===a.mode&&-1===g[h].img.indexOf(".png")){var k=l.createElement("span");k.className="tb_sprite";-1!==g[h].img.indexOf("http")?k.style.backgroundImage="url("+g[h].img+")":k.className+=" tb_"+g[h].img}else k=l.createElement("img"),k.alt=g[h].label,k.src=-1!==g[h].img.indexOf("http")?
g[h].img:themifyBuilder.builder_url+"/img/builder/"+g[h].img;r.appendChild(k);r.appendChild(p);c.appendChild(r)}d.appendChild(c);this.controlChange(d);"row"!==b.component||"row_width"!==a.id&&"row_height"!==a.id?b.initControl(d,a):e.Utils.changeOptions(d,a.type);return d}},layoutPart:{data:[],get:function(a){var b=this;k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_library_items",nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend:function(a){q.showLoader("show")},
success:function(c){q.showLoader("hide");b.data=c;a()},error:function(){q.showLoader("error")}})},render:function(a,b){function c(){var c=l.createDocumentFragment(),f=b.values[a.id],g=null!==e.Forms.LayoutPart.id?e.Forms.LayoutPart.id.toString():null;c.appendChild(l.createElement("option"));for(var h=0,m=d.data.length;h<m;++h)if(g!==d.data[h].id.toString()){var p=l.createElement("option");p.value=d.data[h].post_name;p.textContent=d.data[h].post_title;f===d.data[h].post_name&&(p.selected=!0);c.appendChild(p)}k.appendChild(c);
k=null}var d=this,f=l.createDocumentFragment(),g=b.select.render(a,b),h=l.createElement("a"),m=l.createElement("a"),r=l.createElement("span"),p=l.createElement("span"),k=g.querySelector("select");0===d.data.length?d.get(c):c();f.appendChild(g);g=null;h.target=m.target="_blank";h.className=m.className="add_new";h.href=a.edit_url;m.href=a.add_url;r.className="tb_icon add";p.className="tb_icon ti-folder";h.appendChild(p);h.appendChild(l.createTextNode(b.label.mlayout));m.appendChild(r);m.appendChild(l.createTextNode(b.label.nlayout));
f.appendChild(l.createElement("br"));f.appendChild(m);f.appendChild(h);return f}},separator:{render:function(a,b){var c=b.label[a.label]!==n?b.label[a.label]:a.label;if(c!==n){var d=a.wrap_class!==n?l.createElement("div"):l.createDocumentFragment();var e=l.createElement("h4");e.textContent=c;d.appendChild(l.createElement("hr"));d.appendChild(e)}else a.html!==n?(d=l.createElement("div"),d.innerHTML=a.html,d=d.firstChild):d=l.createElement("hr");a.wrap_class!==n&&(d.className=a.wrap_class);return d}},
multiColumns:{render:function(a,b){for(var c=[],d=[{id:a.id+"_gap",label:b.label.c_g,type:"range",prop:"column-gap",selector:a.selector,wrap_class:"tb_multi_columns_wrap",units:{px:{min:0,max:500}}},{type:"multi",wrap_class:"tb_multi_columns_wrap",label:b.label.c_d,options:[{type:"color",id:a.id+"_divider_color",prop:"column-rule-color",selector:a.selector},{type:"range",id:a.id+"_divider_width","class":"tb_multi_columns_width",prop:"column-rule-width",selector:a.selector,units:{px:{min:0,max:500}}},
{type:"select",id:a.id+"_divider_style",options:b["static"].border,prop:"column-rule-style",selector:a.selector}]}],e=0;7>e;++e)c[e]=0===e?"":e;a.options=c;c=null;c=k.extend(!0,{},a);c.type="select";var c=b.select.render(c,b),g=c.querySelector("select");b.afterRun.push(function(){var a=g.closest(".tb_field");a.parentNode.insertBefore(b.create(d),a.nextElementSibling)});return c}},expand:{render:function(a,b){var c=l.createElement("fieldset"),d=l.createElement("div"),e=l.createElement("div"),g=l.createElement("i"),
h=b.label[a.label]!==n?b.label[a.label]:a.label;c.className="tb_expand_wrap";e.className="tb_style_toggle tb_closed";d.className="tb_expanded_opttions";g.className="ti-angle-up";e.appendChild(l.createTextNode(h));e.appendChild(g);c.appendChild(e);c.appendChild(d);e.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();this.dataset.done===n&&(this.dataset.done=!0,d.appendChild(b.create(a.options)),"setting"===b.clicked&&b.setUpEditors(),b.callbacks());this.classList.contains("tb_closed")?
this.classList.remove("tb_closed"):this.classList.add("tb_closed")});return c}},gallery:{file_frame:null,cache:{},init:function(a,b){var c=wp.media.gallery.shortcode,d=this,f=b.value.trim(),g=function(a,c){var d=l.createElement("div"),e=l.createDocumentFragment(),f=b.parentNode.getElementsByClassName("tb_shortcode_preview")[0];d.className="tb_shortcode_preview";f!==n&&f.parentNode.removeChild(f);for(var f=0,g=a.length;f<g;++f){var h=l.createElement("img");h.width=h.height=50;if(!0===c)h.src=a[f];
else{var m=a[f].attributes;h.src=m.sizes.thumbnail?m.sizes.thumbnail.url:m.url}e.appendChild(h)}d.appendChild(e);b.parentNode.insertBefore(d,b.nextElementSibling)};0<f.length&&(this.cache[f]!==n?g(this.cache[f],!0):k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_shortcode_preview",tb_load_nonce:themifyBuilder.tb_load_nonce,shortcode:f},success:function(a){g(a,!0);d.cache[f]=a}}));a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();null===
d.file_frame?(d.file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"gallery-library",library:{type:"image"},title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),d.file_frame.el.classList.add("themify_gallery_settings")):d.file_frame.options.selection.reset();wp.media.gallery.shortcode=function(a){var b=a.props.toJSON(),d=_.pick(b,"orderby","order");a.gallery&&_.extend(d,a.gallery.toJSON());d.ids=a.pluck("id");b.uploadedTo&&(d.id=b.uploadedTo);d._orderbyRandom&&
(d.orderby="rand",delete d._orderbyRandom);d.ids&&"post__in"===d.orderby&&delete d.orderby;for(var e in wp.media.gallery.defaults)wp.media.gallery.defaults[e]===d[e]&&delete d[e];delete d._orderByField;a=new t.wp.shortcode({tag:"gallery",attrs:d,type:"single"});wp.media.gallery.shortcode=c;return a};a=b.value.trim();0<a.length?(d.file_frame=wp.media.gallery.edit(a),d.file_frame.state("gallery-edit")):(d.file_frame.state("gallery-library"),d.file_frame.open(),d.file_frame.$el.find(".media-menu .media-menu-item").last().trigger("click"));
a=function(a){var c=wp.media.gallery.shortcode(a).string().slice(1,-1);b.value="["+c+"]";g(a.models);u.triggerEvent(b,"change");e.hasChanged=!0};d.file_frame.off("update",a).on("update",a)})},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("a"),e=this,g=a["class"]!==n?a["class"]:"";d.href="#";d.className="builder_button tb_gallery_btn";d.textContent=b.label.add_gallery;a["class"]=g+" tb_shortcode_input";c.appendChild(b.textarea.render(a,b));c.appendChild(d);b.afterRun.push(function(){e.init(d,
d.previousElementSibling);!0===b.is_new&&"gallery"===b.type&&"setting"===b.clicked&&d.click()});return c}},textarea:{render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("textarea"),e=b.getStyleVal(a.id);!0===b.is_repeat?(d.className="tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);d.className+=" "+(a["class"]!==n?a["class"]:"xlarge");e!==n&&(d.value=e);a.rows!==n&&(d.rows=a.rows);c.appendChild(b.initControl(d,a));a.after!==n&&c.appendChild(b.after(a));
a.description!==n&&c.appendChild(b.description(a.description));return c}},wp_editor:{render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("div"),g=l.createElement("button"),h=l.createElement("span"),m=l.createElement("div"),r=l.createElement("button"),p=l.createElement("button"),k=l.createElement("div"),v=l.createElement("div"),w=l.createElement("textarea");c.className="wp-core-ui wp-editor-wrap tmce-active";w.className="tb_lb_wp_editor fullwidth";if(!0===b.is_repeat){var q=
Math.random().toString(36).substr(2,7);w.className+=" tb_lb_option_child";w.dataset.inputId=a.id;!1!==a.control&&(a.control===n&&(a.control={}),a.control.repeat=!0)}else w.className+=" tb_lb_option",q=a.id;w.id=q;c.id="wp-"+q+"-wrap";d.id="wp-"+q+"-editor-tools";d.className="wp-editor-tools";e.id="wp-"+q+"-media-buttons";e.className="wp-media-buttons";g.type="button";g.className="button insert-media add_media";h.className="wp-media-buttons-icon";m.className="wp-editor-tabs";r.type="button";r.className=
"wp-switch-editor switch-tmce";r.id=q+"-tmce";r.dataset.wpEditorId=q;r.textContent=b.label.visual;p.type="button";p.className="wp-switch-editor switch-html";p.id=q+"-html";p.dataset.wpEditorId=q;p.textContent=b.label.text;k.id="wp-"+q+"-editor-container";k.className="wp-editor-container";v.id="qt_"+q+"_toolbar";v.className="quicktags-toolbar";a["class"]!==n&&(w.className+=" "+a["class"]);b.values[a.id]!==n&&(w.value=b.values[a.id]);w.rows=12;w.cols=40;k.appendChild(w);k.appendChild(v);m.appendChild(r);
m.appendChild(p);g.appendChild(h);g.appendChild(l.createTextNode(b.label.add_media));e.appendChild(g);d.appendChild(e);d.appendChild(m);c.appendChild(d);c.appendChild(k);b.editors.push({el:w,data:a});return c}},select:{update:function(a,b,c){a=t.document.getElementById(a);null!==a&&(b!==n?a.value=b:a[0]!==n&&(a[0].selected=!0))},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=b.getOptions(a),g=l.createElement("select"),h=b.getStyleVal(a.id);d.className="selectwrapper";
!0===b.is_repeat?(g.className="tb_lb_option_child",g.dataset.inputId=a.id):(g.className="tb_lb_option",g.id=a.id);a["class"]!==n&&(g.className+=" "+a["class"]);for(var m in e){var k=l.createElement("option");k.value=m;k.text=e[m];h===m?k.selected=!0:h===n&&m===a["default"]&&(k.selected=!0);c.appendChild(k)}g.appendChild(c);d.appendChild(b.initControl(g,a));c=l.createDocumentFragment();c.appendChild(d);a.after!==n&&c.appendChild(b.after(a));a.description!==n&&c.appendChild(b.description(a.description));
a.tooltip!==n&&c.appendChild(b.tooltip(a.tooltip));return c}},font_select:{loaded_fonts:[],fonts:[],safe:[],google:[],updateFontVariant:function(a,b,c){if(b)if(this.google[a]===n||this.google[a].v===n)b.closest(".tb_field").classList.add("_tb_hide_binding");else{var d=this.google[a].v;c=c.getStyleVal(b.id);var e=l.createDocumentFragment();c===n&&(c="regular");b.dataset.selected=a;a=0;for(var g=d.length;a<g;++a){var h=l.createElement("option");h.value=h.textContent=d[a];d[a]===c&&(h.selected=!0);e.appendChild(h)}for(;b.firstChild;)b.removeChild(b.firstChild);
b.appendChild(e);b.closest(".tb_field").classList.remove("_tb_hide_binding")}},loadGoogleFonts:function(a,b){a=k.unique(a.split("|"));for(var c=[],d=[],e=this,g=a.length-1;-1<g;--g)if(a[g]&&-1===this.loaded_fonts.indexOf(a[g])&&-1===c.indexOf(a[g])){var h=a[g].split(":"),m="regular"===h[1]||"italic"===h[1]||parseInt(h[1])?h[1]:"400,700",h=h[0].split(" ").join("+")+":"+m;-1===this.loaded_fonts.indexOf(h)&&(c.push(h+":latin,latin-ext"),d.push(h))}if(0<c.length){a=null;var r=function(){for(var a=d.length-
1;-1<a;--a)-1===e.loaded_fonts.indexOf(d[a])&&e.loaded_fonts.push(d[a])},c={google:{families:c},fontloading:function(a,b){r()},fontinactive:function(a,b){r()}};WebFont.load(c);b&&(c.context=b,WebFont.load(c))}},controlChange:function(a,b,c,d){for(var f=this,g=k(a).comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",
markerClass:"themify-combo-marker"}).parent("div"),h=g[0].getElementsByClassName("themify-combo-item"),m=function(a){f.fonts.push(a);c.classList.remove("themify_show_wait")},r=h.length-1;-1<r;--r)h[r].addEventListener("click",function(b){var c=this.dataset.value;e.hasChanged=!0;c&&-1===f.loaded_fonts.indexOf(c)&&(b=a.querySelector('option[value="'+c+'"]'),null!==b&&"webfont"===b.dataset.type||WebFont.load({classes:!1,google:{families:[c]},fontloading:function(a,b){f.loaded_fonts.push(c)},fontinactive:function(a,
b){f.loaded_fonts.push(c)}}));f.updateFontVariant(c,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],d);setTimeout(function(){u.triggerEvent(a,"change")},10)},{passive:!0}),h[r].addEventListener("mouseenter",function(){var d=this.dataset.value;if(d){var e=k(this);e.is(":visible")&&("default"===d&&(d="inherit"),b.style.top=e.position().top+30+"px",b.style.fontFamily=d,b.style.display="block","inherit"===d||this.classList.contains("tb_font_loaded")||(this.classList.add("tb_font_loaded"),
-1===f.fonts.indexOf(d)&&(c.classList.add("themify_show_wait"),e=a.querySelector('option[value="'+d+'"]'),null===e||"webfont"!==e.dataset.type?WebFont.load({classes:!1,context:t,google:{families:[d]},fontloading:function(a,b){m(d)},fontinactive:function(a,b){m(d)}}):m(d)),this.classList.add("tb_font_loaded"),this.style.fontFamily=d))}},{passive:!0});h=null;g.trigger("comboselect:open").on("comboselect:close",function(){b.style.display="none"});g[0].getElementsByClassName("themify-combo-arrow")[0].addEventListener("click",
function(){b.style.display="none"},{passive:!0})},update:function(a,b,c){a=t.document.getElementById(a);if(null!==a)if(b===n&&(b=""),a.value=b,this.updateFontVariant(b,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],c),a.dataset.init===n){for(c=a.getElementsByTagName("optgroup");c[0].firstChild;)c[0].removeChild(c[0].firstChild);for(;c[1].firstChild;)c[1].removeChild(c[1].firstChild);a=l.createElement("option");a.value=b;a.selected=!0;this.safe[b]!==n?(a.textContent=this.safe[b],
c[0].appendChild(a)):this.google[b]!==n?(a.textContent=this.google[b].n,c[1].appendChild(a)):(a.textContent=b,c[0].appendChild(a))}else a.parentNode.getElementsByClassName("themify-combo-input")[0].value=b},render:function(a,b){var c=l.createElement("div"),d=l.createElement("select"),e=l.createElement("span"),g=l.createElement("span"),h=l.createDocumentFragment(),m=l.createElement("option"),k=b.getStyleVal(a.id),p=this,x=[b.label.safe_fonts,b.label.google_fonts];c.className="tb_font_preview_wrapper";
d.className="tb_lb_option font-family-select";d.id=a.id;e.className="tb_font_preview";g.textContent=b.label.font_preview;m.value="";m.textContent="---";h.appendChild(m);a["class"]!==n&&(d.className+=" "+a["class"]);for(m=0;2>m;++m){var v=l.createElement("optgroup");v.label=x[m];if(k!==n){var w=l.createElement("option");w.value=k;w.selected=!0;w.textContent=0===m&&this.safe[k]!==n?this.safe[k]:1===m&&this.google[k]!==n?this.google[k].n:k;v.appendChild(w)}h.appendChild(v)}c.addEventListener("focusin",
function G(){var a=p.safe,f=l.createDocumentFragment(),h=d.getElementsByTagName("optgroup");d.dataset.init=!0;if(k!==n){for(;h[0].firstChild;)h[0].removeChild(h[0].firstChild);for(;h[1].firstChild;)h[1].removeChild(h[1].firstChild)}for(var m in a){var r=l.createElement("option");r.value=m;r.textContent=a[m];r.dataset.type="webfont";k===m&&(r.selected=!0);f.appendChild(r)}h[0].appendChild(f);a=p.google;f=l.createDocumentFragment();for(m in a)r=l.createElement("option"),r.value=m,r.textContent=a[m].n,
k===m&&(r.selected=!0),f.appendChild(r);h[1].appendChild(f);p.controlChange(d,e,g,b);c.removeEventListener("focusin",G,{once:!0,passive:!0})},{once:!0,passive:!0});d.appendChild(h);e.appendChild(g);c.appendChild(b.initControl(d,a));c.appendChild(e);b.afterRun.push(function(){var d=b.create([{type:"select",label:"f_w",selector:a.selector,"class":"font-weight-select",id:a.id+"_w",prop:"font-weight"}]),e=c.closest(".tb_field"),f=d.querySelector(".tb_field");e.parentNode.insertBefore(d,e.nextElementSibling);
p.updateFontVariant(k,f.querySelector(".font-weight-select"),b)});return c}},animation_select:{render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=b["static"].preset_animation,g=l.createElement("select"),h=b.values[a.id];d.className="selectwrapper";g.className="tb_lb_option";g.id=a.id;c.appendChild(l.createElement("option"));for(var m in e){var k=l.createElement("optgroup"),p=l.createDocumentFragment();k.label=m;for(var n in e[m]){var v=l.createElement("option");v.value=
n;v.text=e[m][n];h===n&&(v.selected=!0);p.appendChild(v)}k.appendChild(p);c.appendChild(k)}g.appendChild(c);d.appendChild(g);return d}},select_menu:{data:null,get:function(a,b){var c=this,d=function(){var d=l.createDocumentFragment(),e;for(e in c.data){var h=l.createElement("option");h.value=c.data[e].slug;h.text=c.data[e].name;h.dataset.termid=c.data[e].term_id;b===c.data[e].slug&&(h.selected=!0);d.appendChild(h)}a.appendChild(d)};null===c.data?k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",
data:{action:"tb_get_menu",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){c.data=a;d()}}):d()},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=l.createElement("select"),g=l.createElement("small"),h=b.values[a.id];d.className="selectwrapper";e.className="select_menu_field";!0===b.is_repeat?(e.className+=" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id);a["class"]!==n&&(e.className+=" "+a["class"]);g.innerHTML=b.label.menu_help;
var m=l.createElement("option");m.value="";m.text=b.label.select_menu;c.appendChild(m);this.get(e,h);d.appendChild(b.initControl(e,a));c=l.createDocumentFragment();c.appendChild(d);c.appendChild(l.createElement("br"));c.appendChild(g);return c}},sticky:{render:function(a,b){for(var c={},d=e.activeModel.get("element_id"),f=k.extend(!0,{},a),g=e.Utils.getUIDList(a.key),h=0,m=g.length;h<m;++h)if(g[h].element_id!==d){var r="row"===g[h].elType?"Row #"+g[h].element_id:g[h].mod_name+" #"+g[h].element_id;
"row"===g[h].elType&&g[h].styling&&g[h].styling.custom_css_id?r="#"+g[h].styling.custom_css_id:"module"===g[h].elType&&g[h].mod_settings&&g[h].mod_settings.custom_css_id&&(r="#"+g[h].mod_settings.custom_css_id);c[g[h].element_id]=r}f.options=c;return b.select.render(f,b)}},selectSearch:{update:function(a,b,c,d){d=l.createDocumentFragment();var e=null;b.removeAttribute("data-value");b.value="";if(c!==n){for(var g in c){var h=l.createElement("div");null===e&&(e=g);h.dataset.value=g;h.className="tb_search_item";
h.textContent=c[g];a===g&&(h.className+=" selected",b.setAttribute("data-value",g),b.value=c[g]);d.appendChild(h)}""===b.value&&null!==e&&(b.value=c[e],b.setAttribute("data-value",e))}return d},events:function(a,b){a.addEventListener("keyup",function(a){a=b.getElementsByClassName("tb_search_item");for(var c=this.value.trim(),e=new RegExp(c,"i"),g=0,h=a.length;g<h;++g)""===c||e.test(a[g].textContent)?a[g].style.display="block":a[g].style.display="none"},{passive:!0});b.addEventListener("mousedown",
function(b){if(1===b.which&&b.target.classList.contains("tb_search_item")){b.preventDefault();b.stopPropagation();var c=this.getElementsByClassName("tb_search_item");b=b.target;for(var e=c.length-1;-1<e;--e)c[e].classList.remove("selected");b.classList.add("selected");c=b.dataset.value;a.value=b.textContent;a.dataset.value=c;a.blur();a.previousElementSibling.blur();u.triggerEvent(a,"selectElement",{val:c})}})},render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("input"),
g=l.createElement("span"),h=l.createElement("div");c.className="tb_search_wrapper";e.className="tb_search_input";e.autocomplete="off";h.className="tb_search_container";!0===b.is_repeat?(e.className+=" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id);a["class"]!==n&&(e.className+=" "+a["class"]);g.className="fa fa-spin fa-spinner";h.tabIndex=1;d.tabIndex=1;d.className="tb_search_arrow";e.type="text";e.placeholder=(a.placeholder!==n?a.placeholder:a.label)+"...";h.appendChild(this.update(b.values[a.id],
e,a.options,b));d.appendChild(g);c.appendChild(d);c.appendChild(b.initControl(e,a));c.appendChild(h);a.after!==n&&c.appendChild(b.after(a));a.description!==n&&c.appendChild(b.description(a.description));a.tooltip!==n&&c.appendChild(b.tooltip(a.tooltip));this.events(e,h);setTimeout(function(){new SimpleBar(h)},100);return c}},optin_provider:{cache:null,render:function(a,b){var c=l.createElement("div"),d=this;null===this.cache?(q.showLoader("show"),k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",
data:{action:"tb_optin_get_settings",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){q.showLoader("spinhide");d.cache=a;c.appendChild(b.create(d.cache));b.callbacks()},error:function(){q.showLoader("error")}})):c.appendChild(b.create(d.cache));return c}},check_map_api:{render:function(a,b){return themifyBuilder[a.map+"_api"]?l.createElement("span"):b.separator.render({type:"separator",html:"<span>"+themifyBuilder[a.map+"_api_err"]+"</span>",wrap_class:"tb_group_element_"+a.map},b)}},
query_posts:{cacheTypes:null,cacheTerms:[],render:function(a,b){var c=this,d,f=a.description,g=a.after,h=function(a){var b=[],c;for(c in a)b[c]=a[c].name;return b},m=function(a,c,d){var e=a.nextElementSibling.getElementsByClassName("simplebar-content")[0];e===n&&(e=a.nextElementSibling);for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(b.selectSearch.update(c,a,d,b))},r=function(a,b,c){a.classList.add("tb_search_wait");return k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",
data:{action:"tb_get_post_types",tb_load_nonce:themifyBuilder.tb_load_nonce,type:c,v:b},complete:function(){a.classList.remove("tb_search_wait")}})};(function(){var p=k.extend(!0,{},a),x=null;d=l.createElement("div");d.id=a.id?a.id:a.term_id;b.afterRun.push(function(){for(var k=["id","tax_id","term_id"],w=l.createDocumentFragment(),q=null,t=function(d,h){var k=function(){var k=a.term_id.replace("#tmp_id#",h),r=d.closest(".tb_input"),p;d.id=k;null===q&&b.values[k]!==n&&(p=b.values[k].split("|")[0]);
p||(p=0);m(d,p,c.cacheTerms[h]);if(null===q){var k=l.createElement("input"),v=l.createElement("span"),w=l.createElement("div");v.innerHTML=b.label.or;k.type="text";k.className="query_category_multiple";w.className="tb_query_multiple_wrap";w.appendChild(v);w.appendChild(k);r.insertBefore(w,r.nextSibling);g!==n&&r.appendChild(b.after(g));f!==n&&r.appendChild(b.description(f));if(a.slug_id!==n){var v=r.parentNode,w=b.create([{type:"radio",id:"term_type",label:b.label.query_by,"default":b.values.term_type===
n&&"post_slug"===b.values[a.tax_id]?"post_slug":!1,option_js:!0,options:[{value:"category",name:b.label.query_term_id},{value:"post_slug",name:b.label.slug_label}]}]),t=b.create([{id:a.slug_id,type:"text","class":"large",wrap_class:"tb_group_element_post_slug",help:b.label.slug_desc,label:b.label.slug_label}]);v.parentNode.insertBefore(w,v);v.parentNode.appendChild(t)}k.addEventListener("change",function(a){u.triggerEvent(d,"queryPosts",{val:p})},{passive:!0});null!==x&&clearTimeout(x);x=setTimeout(function(){b.callbacks()},
2)}r.getElementsByClassName("query_category_multiple")[0].value=p;!0===q||b.is_new?u.triggerEvent(d,"queryPosts",{val:p}):e.Constructor.settings=e.Utils.clear(e.Forms.serialize("tb_options_setting"));q=!0};c.cacheTerms[h]===n?r(d.parentNode,h,"terms").done(function(a){c.cacheTerms[h]=a;k()}):k()},J=0,F=k.length;J<F;++J)if(p[k[J]]){p.id=p[k[J]];p.label=b.label["query_"+k[J]];p.type="selectSearch";"term_id"===k[J]&&(p.wrap_class="tb_search_term_wrap tb_group_element_category",p["class"]="query_category_single",
p.help=b.label.query_desc,p.control={control_type:"queryPosts"});delete p.description;delete p.after;var A=b.create([p]);(function(){var d="id"===k[J],e="term_id"===k[J],f=e?"":b.values[p.id],g=A.querySelector(".tb_search_input");g.addEventListener("selectElement",function(f){f=f.detail.val;var g=this.closest(".tb_field");e?(g.getElementsByClassName("query_category_multiple")[0].value=f,u.triggerEvent(g.getElementsByClassName("tb_search_input")[0],"queryPosts",{val:f})):(g=g.nextElementSibling,d||
!0!==q||a.slug_id===n||(g=g.nextElementSibling),g=g.getElementsByClassName("tb_search_input")[0],d?c.cacheTypes[f]!==n&&(m(g,b.values[a.tax_id],h(c.cacheTypes[f].options)),u.triggerEvent(g,"selectElement",{val:g.getAttribute("data-value")})):t(g,f))},{passive:!0});if(d){var l=function(){f||(f="post");m(g,f,h(c.cacheTypes));u.triggerEvent(g,"selectElement",{val:f});g=null};null===c.cacheTypes?r(g.parentNode,null,"post_types").done(function(a){c.cacheTypes=a;l()}):setTimeout(l,10)}else e&&!a.id&&a.taxonomy!==
n&&t(g,a.taxonomy)})();w.appendChild(A)}d.parentNode.replaceChild(w,d);p=d=null})})();return d}},range:{update:function(a,b,c){var d=t.document.getElementById(a);null!==d&&(d.value=b!==n?b:"",b=a+"_unit",a=t.document.getElementById(b),null!==a&&"SELECT"===a.tagName&&(b=c.getStyleVal(b),b===n&&(b=a[0].value),a.value=b,this.setData(d,-1!==a.selectedIndex?a[a.selectedIndex]:a[0])))},setData:function(a,b){a.dataset.min=b.dataset.min;a.dataset.max=b.dataset.max;a.dataset.increment=b.dataset.increment},
controlChange:function(a,b,c){function d(b){var c=a.dataset.increment;if(c){var d=0!==c%1,e=parseFloat(a.dataset.max),f=parseFloat(a.dataset.min),g=a.value,g=d?parseFloat(g||0):parseInt(g||0),c=d?parseFloat(c):parseInt(c);if("increase"===b&&g<e){if(g<f){a.value=d?parseFloat(f).toFixed(1):parseInt(f);return}a.value=d?parseFloat(g+c).toFixed(1):g+c}else if(g>f){if(g>e){a.value=d?parseFloat(e).toFixed(1):parseInt(e);return}a.value=d?parseFloat(g-c).toFixed(1):g-c}a.value.trim()&&(a.value=d?parseFloat(a.value).toFixed(1):
parseInt(a.value))}}var f=b!==n&&"SELECT"===b.tagName,g=this;a.addEventListener("mousedown",function(b){if(1===b.which){var f=b.pageY,g=this,h=a.value,k=function(a){a.pageY<f?d("increase"):a.pageY>f&&d("decrease");f=a.pageY;u.triggerEvent(g,c)};t.document.addEventListener("mousemove",k,{passive:!0});t.document.addEventListener("mouseup",function w(){t.document.removeEventListener("mousemove",k,{passive:!0});a.value!==h&&u.triggerEvent(g,c);e.hasChanged=!0;t.document.removeEventListener("mouseup",
w,{once:!0,passive:!0})},{once:!0,passive:!0})}},{passive:!0});a.addEventListener("keydown",function(a){38===a.which?d("increase"):40===a.which&&d("decrease");u.triggerEvent(this,c)},{passive:!0});!0===f&&b.addEventListener("change",function(c){g.setData(a,b.options[b.selectedIndex]);u.triggerEvent(a,"change")},{passive:!0});b!==n&&g.setData(a,f?-1!==b.selectedIndex?b[b.selectedIndex]:b[0]:b)},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=l.createElement("span"),
g=l.createElement("input");var h=b.getStyleVal(a.id);d.className="tb_tooltip_container";a.wrap_class!==n&&(d.className=" "+a.wrap_class);e.className="tb_range_input";g.autocomplete="off";g.type="text";g.className="tb_range";h!==n&&(g.value=h);!0===b.is_repeat?(g.className+=" tb_lb_option_child",g.dataset.inputId=a.id):(g.className+=" tb_lb_option",g.id=a.id);a["class"]!==n&&(g.className+=" "+a["class"]);e.appendChild(g);a.tooltip!==n&&e.appendChild(b.tooltip(a.tooltip));c.appendChild(e);if(a.units===
n)g.dataset.min=0,g.dataset.max=500,g.dataset.increment=1;else{e=l.createElement("div");var m=Object.keys(a.units);e.className="selectwrapper noborder";if(1<m.length){var r=l.createDocumentFragment();h=b.getStyleVal(a.id+"_unit");var p=a.id+"_unit";m=l.createElement("select");m.className="tb_unit";!0===b.is_repeat?(m.className+=" tb_lb_option_child",m.dataset.inputId=p):(m.className+=" tb_lb_option",m.id=p);a.select_class!==n&&(m.className+=" "+a.select_class);for(var x in a.units){var v=l.createElement("option");
v.value=x;v.textContent=x;v.dataset.min=a.units[x].min;v.dataset.max=a.units[x].max;v.dataset.increment=a.units[x].increment!==n?a.units[x].increment:"em"===x||"em"===x?.1:1;h===x&&(v.selected=!0);r.appendChild(v)}m.appendChild(r);b.initControl(m,{type:"select",id:p,control:a.control})}else x=m[0],m=l.createElement("span"),m.className="tb_unit",m.id=a.id+"_unit",m.dataset.min=a.units[x].min,m.dataset.max=a.units[x].max,m.dataset.increment=a.units[x].increment!==n?a.units[x].increment:"em"===x||"em"===
x?.1:1,m.textContent=x;e.appendChild(m);c.appendChild(e)}a.after!==n&&c.appendChild(b.after(a.after));a.description!==n&&c.appendChild(b.description(a.description));d.appendChild(c);this.controlChange(g,m,"styling"===b.clicked?"keyup":"change");c=k.extend({},a);c.type="range";b.initControl(g,c);return d}},icon:{render:function(a,b){var c=l.createElement("div"),d=l.createElement("input"),f=l.createElement("span"),g=l.createElement("span"),h=b.getStyleVal(a.id);d.type="text";d.className="themify_field_icon";
f.className="tb_plus_btn themify_fa_toggle icon-close";c.className="tb_icon_wrap";g.className="tb_clear_input";!0===b.is_repeat?(d.className+=" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);a["class"]!==n&&(d.className+=" "+a["class"]);h!==n?(d.value=h,h=e.Utils.getIcon(h),!1===h&&(h="default_icon"),f.className+=" "+h):f.className+=" default_icon";c.appendChild(b.initControl(d,a));c.appendChild(f);c.appendChild(g);return c}},createMarginPadding:function(a,b,
c){var d=b.options!==n?b.options:[{id:"top",label:e.Constructor.label.top},{id:"right",label:e.Constructor.label.right},{id:"bottom",label:e.Constructor.label.bottom},{id:"left",label:e.Constructor.label.left}],f=l.createDocumentFragment(),g=l.createElement("ul"),h=b.id,m=k.extend(!0,{},b);m["class"]="tb_multi_field";m.units={px:{min:"margin"===a?-500:0,max:500},em:{min:"margin"===a?-10:0,max:10},"%":{min:"margin"===a?-100:0,max:100}};m.prop=null;g.className="tb_seperate_items tb_inline_list";for(var r=
0,p=d.length;r<p;++r){var x=l.createElement("li"),v=h+"_"+d[r].id;m.id=v;m.tooltip=d[r].label;x.appendChild(c.range.render(m,c));f.appendChild(x);this.styles[v]={prop:a+"-"+d[r].id,selector:b.selector}}g.appendChild(f);m=null;f=l.createDocumentFragment();f.appendChild(g);if(4===p){f.appendChild(c.checkboxGenerate("icon_checkbox",{id:"checkbox_"+h+"_apply_all","class":"style_apply_all",options:[{name:"1",value:c.label.all,icon:'<span class="apply_all_checkbox_icon"></span>'}],"default":"module"===
this.component&&!0===this.is_new||0===Object.keys(this.values).length?"1":!1,new_line:!1}));var w=f.querySelector(".style_apply_all");w.addEventListener("change",function(a){c.margin.apply_all(this,!0)},{passive:!0});!0===w.checked&&c.afterRun.push(function(){c.margin.apply_all(w)})}return f},margin:{apply_all:function(a,b){var c=a.closest(".tb_input").getElementsByClassName("tb_seperate_items")[0],d=c.getElementsByTagName("li")[0];!0===a.checked?(c.setAttribute("data-checked",1),c=e.Constructor.label.all):
(c.removeAttribute("data-checked"),c=e.Constructor.label.top);!0===b&&u.triggerEvent(d.getElementsByTagName("select")[0],"change");d.getElementsByClassName("tb_tooltip_up")[0].textContent=c},update:function(a,b,c){b=["top","right","bottom","left"];for(var d="checkbox_"+a+"_apply_all",e=0;4>e;++e){var g=a+"_"+b[e];null!==t.document.getElementById(g)&&c.range.update(g,c.getStyleVal(g),c)}c.checkbox.update(d,c.getStyleVal(d),c);this.apply_all(t.document.getElementById(d).getElementsByClassName("style_apply_all")[0])},
render:function(a,b){return b.createMarginPadding("margin",a,b)}},padding:{render:function(a,b){return b.createMarginPadding("padding",a,b)}},box_shadow:{update:function(a,b,c){b=["hOffset","vOffset","blur"];for(var d=2;-1<d;--d){var e=a+"_"+b[d];null!==t.document.getElementById(e)&&c.range.update(e,c.getStyleVal(e),c)}b=a+"_color";a+="_inset";c.color.update(b,c.getStyleVal(b),c);c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){var c={hOffset:{label:b.label.h_o,units:{px:{min:-200,max:200},
em:{min:0,max:10}}},vOffset:{label:b.label.v_o,units:{px:{min:-200,max:200},em:{min:0,max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}}},d=l.createDocumentFragment(),e=l.createElement("ul"),g=a.id,h=k.extend(!0,{},a);h["class"]="tb_shadow_field";h.prop=null;e.className="tb_seperate_items tb_inline_list tb_shadow_inputs";for(var m in c)if(c[m]!==n){var r=c[m];var p=l.createElement("li");var x=g+"_"+m;h.id=x;h.tooltip=r.label;h.units=r.units;h.selector=a.selector;p.appendChild(b.range.render(h,
b));d.appendChild(p);b.styles[x]={prop:a.prop,selector:a.selector}}p=l.createElement("li");x=g+"_color";c={id:x,type:"color","class":h["class"],selector:a.selector};b.styles[x]={prop:a.prop,selector:a.selector,type:"color"};p.appendChild(b.color.render(c,b));d.appendChild(p);p=l.createElement("li");x=g+"_inset";g=b.checkboxGenerate("checkbox",{id:x,origID:g,type:"checkbox","class":h["class"],isBoxShadow:!0,prop:a.prop,options:[{value:b.label.in_sh,name:"inset"}]});b.styles[x]={prop:a.prop,selector:a.selector};
p.className="tb_box_shadow_inset";p.appendChild(g);d.appendChild(p);e.appendChild(d);return e}},text_shadow:{update:function(a,b,c){b=[c.label.h_sh,c.label.v_sh,c.label.bl];for(var d=2;-1<d;--d){var e=a+"_"+b[d];null!==t.document.getElementById(e)&&c.range.update(e,c.getStyleVal(e),c)}a+="_color";c.color.update(a,c.getStyleVal(a),c)},render:function(a,b){var c={hShadow:{label:b.label.h_sh,units:{px:{min:-200,max:200},em:{min:0,max:10}}},vShadow:{label:b.label.v_sh,units:{px:{min:-200,max:200},em:{min:0,
max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}}},d=l.createDocumentFragment(),e=l.createElement("ul"),g=a.id,h=k.extend(!0,{},a);h["class"]="tb_shadow_field";h.prop=null;e.className="tb_seperate_items tb_inline_list tb_shadow_inputs";for(var m in c)if(c.hasOwnProperty(m)){var r=c[m];var p=l.createElement("li");var n=g+"_"+m;h.id=n;h.tooltip=r.label;h.units=r.units;p.appendChild(b.range.render(h,b));d.appendChild(p);b.styles[n]={prop:a.prop,selector:a.selector}}p=l.createElement("li");
n=g+"_color";c={id:n,type:"color","class":h["class"],selector:a.selector};b.styles[n]={prop:a.prop,selector:a.selector,type:"color"};p.appendChild(b.color.render(c,b));d.appendChild(p);e.appendChild(d);return e}},border_radius:{render:function(a,b){return b.createMarginPadding(a.prop,a,b)}},border:{changeControl:function(a){var b=a.parentNode;a=a.value;for(var c=b.parentNode.children,d=c.length-1;-1<d;--d)c[d]!==b&&("none"===a?c[d].classList.add("_tb_hide_binding"):c[d].classList.remove("_tb_hide_binding"))},
apply_all:function(a,b){for(var c=b.getElementsByTagName("input"),d=function(b,d){for(var e=c.length-1;0<e;--e){var f=c[e].parentNode;!0===b?f.classList.add("_tb_disable"):f.classList.remove("_tb_disable")}!0===b?a.dataset.checked=1:a.removeAttribute("data-checked");!0===d&&u.triggerEvent(a.children[0].getElementsByTagName("select")[0],"change")},e=c.length-1;-1<e;--e)c[e].addEventListener("change",function(){d("all"===this.value,!0)},{passive:!0}),!0===c[e].checked&&"all"===c[e].value&&d(!0,null)},
update:function(a,b,c){b=["top","right","bottom","left"];for(var d=a+"-type",e=0;4>e;++e){var g=a+"_"+b[e],h=g+"_color",m=g+"_style",g=g+"_width";c.color.update(h,c.getStyleVal(h),c);c.select.update(m,c.getStyleVal(m),c);this.changeControl(t.document.getElementById(m));c.range.update(g,c.getStyleVal(g),c)}c.radio.update(d,c.getStyleVal(d),c)},render:function(a,b){var c=["top","right","bottom","left"],d=l.createElement("ul"),e=l.createDocumentFragment(),g=l.createDocumentFragment(),h=a.id,m=k.extend(!0,
{},a),r=this,p=k.extend(!0,{},a);p.options=[{value:"all",name:b.label.all,"class":"style_apply_all",icon:'<i class="tic-border-all"></i>',label_class:"tb_radio_label_borders"}];p.option_js=!0;p.id=h+"-type";p.no_toggle=!0;p["default"]="top";p.prop=null;m.options=b["static"].border;m.prop=null;d.className="tb_seperate_items tb_borders tb_group_element_border";for(var n=0;4>n;++n){var v=l.createElement("li"),w=h+"_"+c[n];p.options.push({value:c[n],name:b.label[c[n]],icon:'<i class="tic-border-'+c[n]+
'"></i>',label_class:"tb_radio_label_borders"});v.className="tb_group_element_"+c[n];"top"===c[n]&&(v.className+=" tb_group_element_all");b.styles[w+"_color"]={prop:"border-"+c[n],selector:a.selector};m.id=w+"_color";m.type="color";m["class"]="border_color";e.appendChild(b.color.render(m,b));b.styles[w+"_width"]={prop:"border-"+c[n],selector:a.selector};m.id=w+"_width";m.type="range";m["class"]="border_width";m.wrap_class="range_wrapper";m.units={px:{min:0,max:300}};e.appendChild(b.range.render(m,
b));b.styles[w+"_style"]={prop:"border-"+c[n],selector:a.selector};m.id=w+"_style";m.type="select";m["class"]="border_style tb_multi_field";var w=b.select.render(m,b),q=w.querySelector("select");e.appendChild(w);v.appendChild(e);g.appendChild(v);q.addEventListener("change",function(a){r.changeControl(this)},{passive:!0});"none"===q.value&&r.changeControl(q)}d.appendChild(g);e=l.createDocumentFragment();e.appendChild(b.radioGenerate("icon_radio",p,b));r.apply_all(d,e.querySelector("#"+p.id));e.appendChild(d);
return e}},slider:{render:function(a,b){return b.create(b.getOptions(a))}},custom_css:{render:function(a,b){a["class"]="large";a.control=!1;a.help=b.label.custom_css_help;var c=b.text.render(a,b);e.Utils.changeOptions(c.querySelector("#"+a.id),a.type);return c}},custom_css_id:{render:function(a,b){var c=b.create([{id:"custom_css_id",type:"text",label:b.label.id_name,help:b.label.id_help,control:!1,"class":"large"}],b);e.Utils.changeOptions(c.querySelector("#custom_css_id"),a.type);return c}},hidden:{render:function(a,
b){var c=l.createElement("input"),d=b.getStyleVal(a.id);c.type="hidden";!0===b.is_repeat?(c.className+=" tb_lb_option_child",c.dataset.inputId=a.id):(c.className+=" tb_lb_option",c.id=a.id);a["class"]!==n&&(c.className+=" "+a["class"]);d!==n?c.value=d:a.value!==n&&(c.value=a.value);return b.initControl(c,a)}},frame:{render:function(a,b){a.options=b["static"].frame;a["class"]="tb_frame";return b.layout.render(a,b)}},title:{render:function(a,b){a["class"]="large";a.control={event:"keyup",control_type:"change",
selector:".module-title"};return b.text.render(a,b)}},button:{render:function(a,b){var c=l.createElement("button");c.className="builder_button";c.id=a.id;a["class"]!==n&&(c.className+=" "+a["class"]);c.textContent=a.name;return b.initControl(c,a)}},row_anchor:{render:function(a,b){a.control=!1;var c=b.text.render(a,b);e.Utils.changeOptions(c.querySelector("#"+a.id),a.type);return c}},widget_form:{render:function(a,b){var c=l.createElement("div");c.id=a.id;c.className="module-widget-form-container wp-core-ui tb_lb_option";
return c}},widget_select:{data:null,el:null,cache:[],mediaInit:null,textInit:null,render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),f=l.createElement("i"),g=l.createElement("input"),h=l.createElement("div"),m=l.createElement("div");d.id="available-widgets-filter";f.className="fa fa-spin fa-spinner tb_loading_widgets";g.type="text";g.id="widgets-search";g.dataset.validation="not_empty";g.dataset.errorMsg=b.label.widget_validate;g.autocomplete="off";g.placeholder=b.label.search_widget;
h.id="available-widgets";h.tabIndex=1;m.id=a.id;m.className="tb_lb_option tb_widget_select";this.el=m;d.appendChild(f);d.appendChild(g);h.appendChild(m);c.appendChild(d);c.appendChild(h);var r=this,p=b.values[a.id],q=function(){var c=l.createDocumentFragment(),d=[],k=function(b,c){for(var e=d.length-1;-1<e;--e)d[e].classList.remove("selected");b.classList.add("selected");e=b.dataset.value;g.value=b.getElementsByClassName("widget-title")[0].textContent;h.style.display="none";r.select(e,r.data[e].b,
c,a)},v;for(v in r.data){var q=l.createElement("div"),x=l.createElement("div"),t=l.createElement("h3");q.className="widget-tpl "+r.data[v].b;q.dataset.value=v;x.className="widget-title";t.textContent=r.data[v].n;x.appendChild(t);q.appendChild(x);q.addEventListener("click",function(c){c.preventDefault();c.stopPropagation();b.settings[a.id]=this.dataset.value;k(this,null)});d.push(q);r.data[v].d!==n&&(x=l.createElement("div"),x.className="widget-description",x.innerHTML=r.data[v].d,q.appendChild(x));
c.appendChild(q);p===v&&k(q,b.values.instance_widget)}m.appendChild(c);p||new SimpleBar(m);r.search(g,h);f.parentNode.removeChild(f);f=null;e.hasChanged=!0};if(null===r.data){k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_widget_items",nonce:themifyBuilder.tb_load_nonce},success:function(a){r.data=a;q()}});for(var v in themifyBuilder.widget_css)t.Themify.LoadCss(themifyBuilder.widget_css[v],tbLocalScript.version);themifyBuilder.widget_css=null}else setTimeout(q,
5);return c},search:function(a,b){var c=this;a.addEventListener("focus",this.show.bind(this),{passive:!0});a.addEventListener("blur",function(a){a.relatedTarget&&"available-widgets"===a.relatedTarget.id||(b.style.display="none")},{passive:!0});a.addEventListener("keyup",function(a){c.show();a=this.value.trim();for(var b=new RegExp(a,"i"),d=c.el.getElementsByClassName("widget-tpl"),e=0,m=d.length;e<m;++e)if(""===a)d[e].style.display="block";else{var k=d[e].getElementsByTagName("h3")[0],k=k.textContent||
k.innerText;b.test(k)?d[e].style.display="block":d[e].style.display="none"}},{passive:!0})},show:function(){this.el.closest("#available-widgets").style.display="block"},hide:function(){this.el.closest("#available-widgets").style.display="none"},select:function(a,b,c,d){var f=this,g=k("#instance_widget",q.Lightbox.$lightbox),h=function(h){var m=function(){var m=k(h.form);g.addClass("open").html(m.html());if(c)for(var r in c)m.find('[name="'+r+'"]').val(c[r]);m=null;"text"===b?wp.textWidgets&&(f.textInit||
(f.textInit=!0,wp.textWidgets.init()),c&&delete wp.textWidgets.widgetControls[c["widget-id"]]):wp.mediaWidgets&&(f.mediaInit||(wp.mediaWidgets.init(),f.mediaInit=!0),c&&delete wp.mediaWidgets.widgetControls[c["widget-id"]]);k(l).trigger("widget-added",[g]);"text"===b&&e.Constructor.initControl(g.find(".wp-editor-area")[0],{control:{control_type:"wp_editor",type:"refresh"}});c&&setTimeout(function(){new SimpleBar(t.document.getElementById("tb_options_setting"));new SimpleBar(f.el)},100);if("visual"===
e.mode){var p=k.extend(!0,{},d);p.id=g[0].id;g.on("change",":input",function(){!1===e.is_ajax_call&&e.Constructor.control.widget_select(g,p)});a&&e.Constructor.control.widget_select(g,p)}g.removeClass("tb_loading_widgets_form").find("select").wrap('<span class="selectwrapper"/>')},p=function(a,b){var c=a.length;(function(a,b){u.LoadAsync(a,b,h.v)})(a[b].src,function(){if(a[b].extra&&a[b].extra.after){var d=a[b].extra.after,e="";if("object"===typeof d)for(var f in d)d[f]&&(e+=d[f]);""!==e&&(d=l.createElement("script"),
d.type="text/javascript",d.text=e,e=l.getElementsByTagName("script")[0],e.parentNode.insertBefore(d,e))}++b;b<c?p(a,b):m()})};f.cache[b]===n?(h.template&&l.body.insertAdjacentHTML("beforeend",h.template),0<h.src.length?p(h.src,0):m()):m()};g.addClass("tb_loading_widgets_form").html('<i class="fa fa-refresh fa-spin"></i>');c&&k.each(c,function(a,b){var d=a.match(/.*\[\d\]\[(.*)\]/);k.isArray(d)&&"undefined"!==d[1]&&(delete c[a],c[d[1]]=b)});k.ajax({type:"POST",dataType:"json",url:themifyBuilder.ajaxurl,
data:{action:"module_widget_get_form",tb_load_nonce:themifyBuilder.tb_load_nonce,load_class:a,tpl_loaded:1===f.cache[b]?1:0,id_base:b,widget_instance:c},success:function(a){a&&a.form&&(h(a),f.cache[b]=1)}})}},message:{render:function(a,b){var c=l.createElement("div");a["class"]!==n&&(c.className+=a["class"]);c.innerHTML=a.comment;return c}},help:function(a){var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("i");b.className="tb_help";d.className="icon ti-help";c.className="tb_help_content";
d.tabIndex=-1;c.innerHTML=a;b.appendChild(d);b.appendChild(c);return b},tooltip:function(a){var b=l.createElement("span");b.className="tb_tooltip_up";b.textContent=a;return b},description:function(a){var b=l.createElement("small");b.innerHTML=a;return b},after:function(a){var b=l.createElement("span");b.className="tb_input_after";b.textContent=a.after;a.label!==n&&""!==a.label||a.help===n||""===a.help||b.appendChild(this.help(a.help));return b},height:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),
c)},render:function(a,b){a.isHeight=!0;var c={id:a.id+"_auto_height",heightID:a.id,type:"checkbox",isHeight:!0,prop:"height",options:[{value:b.label.a_ht,name:"auto"}]},d=b.checkboxGenerate("checkbox",c),e=d.querySelector(".tb_lb_option"),c=d.querySelector("input"),g=k.extend(!0,{},a);c.addEventListener("change",function(b){var c=t.document.getElementsByClassName("tb_group_element_"+a.id+"_height")[0];b.target.checked?c.classList.add("hide-auto-height"):c.classList.remove("hide-auto-height")});g.label=
"ht";g.type="range";g.id=a.id;g.prop="height";g.wrap_class="tb_group_element_"+a.id+"_height";"auto"===b.values[a.id+"_auto_height"]&&(g.wrap_class+=" hide-auto-height");g.units={px:{min:0,max:1200},vh:{min:0,max:100},"%":{min:0,max:100},em:{min:0,max:200}};var h=b.create([g]);g=c=null;b.afterRun.push(function(){var a=e.parentNode.closest(".tb_field");a.parentNode.insertBefore(h,a);h=e=null});return d}},toggle_switch:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),c)},controlChange:function(a,
b){a.addEventListener("change",function(){this.value=!0===this.checked?b.on.name:b.off!==n?b.off.name:""},{passive:!0})},render:function(a,b){var c=k.extend(!0,{},a),d={},e=l.createElement("div"),g="off",h=b.getStyleVal(a.id);c.control=!1;c["class"]=c["class"]===n?"toggle_switch":c["class"]+" toggle_switch";var m=c.options;if(m===n||"simple"===m)"simple"===m?m={on:{name:"yes",value:b.label.y},off:{name:"no",value:b.label.no}}:(m={on:{name:"no",value:b.label.s},off:{name:"yes",value:b.label.hi}},c["default"]===
n&&(c["default"]="on"));h===n?("on"===c["default"]&&(g="on"),h="on"===g?m.on.name:m.off!==n?m.off.name:""):(!1===h&&(h=""),g=m.on.name===h?"on":"off");for(var r in m)c.after===n&&m[r].value!==n&&e.setAttribute("data-"+r,b.label[m[r].value]!==n?b.label[m[r].value]:m[r].value),d[r]=m[r];r=Object.keys(m)[0];delete c.binding;delete m[r].value;delete c["default"];c.options=[m[r]];c.wrap_checkbox===n&&(c.wrap_checkbox="");c.wrap_checkbox+=" tb_switcher";e.className="switch_label";c=b.checkboxGenerate("checkbox",
c);m=c.querySelector(".toggle_switch");m.value=h;m.checked="on"===g;this.controlChange(m,d);m.parentNode.appendChild(e);b.initControl(m,a);return c}}};e.Views.BaseElement=z.View.extend({type:"default",initialize:function(){this.listenTo(this.model,"custom:change",this.modelChange);this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"edit",this.edit);this.listenTo(this.model,"duplicate",this.duplicate);this.listenTo(this.model,"save",this.save);this.listenTo(this.model,"importExport",
this.importExport);this.listenTo(this.model,"delete",this["delete"]);this.listenTo(this.model,"copy",this.copy);this.listenTo(this.model,"paste",this.paste);this.listenTo(this.model,"change:view",this.setView)},setView:function(a){this.setElement(a)},modelChange:function(){this.$el.attr(_.extend({},_.result(this,"attributes")));var a=this.render(),b=e.beforeEvent.data("cid"),c=l.getElementsByClassName("tb_element_cid_"+b)[0];c.parentNode.replaceChild(a.el,c);"visual"===e.mode?this.model.trigger("visual:change"):
("row"===e.eventName&&(b=this.$el.data("cid")),e.undoManager.push(b,e.beforeEvent,this.$el,e.eventName),e.Mixins.Builder.update(this.$el))},remove:function(){this.$el.remove()},copy:function(a,b){var c=this.$el,d=this.model,f=d.get("elType");"column"===f&&(f=d.get("component_name"));c=this.getData(c,f);e.Utils.clearElementId([c]);"sub-column"===f&&(f="column");q.Clipboard.set(f,c)},paste:function(a,b){var c=this.$el,d=this.model,f=d.get("elType"),g=null;"column"===f?f=d.get("component_name"):"module"===
f&&(g=d.get("mod_name"));"sub-column"===f&&(f="column");var h=b.classList.contains("tb_paste_style"),m=q.Clipboard.get(f);if(!1===m||!0===h&&"module"===f&&g!==m.mod_name)q.alertWrongPaste();else{e.eventName="row";if(!0===h){var g=ThemifyStyles.getStyleOptions("module"===f?g:f),k="module"===f?"mod_settings":"styling",p=this.getData(c,"column"===f?d.get("component_name"):f);p[k]===n&&(p[k]={});for(var l in m[k]){var v;if(v=g[l]===n){v=l;var w=-1!==v.indexOf("_color")?"color":-1!==v.indexOf("_style")?
"style":!1,t=!1;-1!==v.indexOf("breakpoint_")&&-1!==v.indexOf("_apply_all")?t=!0:!1!==w?(w=v.replace("_"+w,"_width"),g[w]!==n&&"border"===g[w].type&&(t=!0)):-1!==v.indexOf("_unit")?(w=v.replace(/_unit$/ig,"",""),g[w]!==n&&(t=!0)):-1!==v.indexOf("_w")?(w=v.replace(/_w$/ig,"",""),g[w]!==n&&"font_select"===g[w].type&&(t=!0)):g[v]!==n&&"radio"===g[v].type&&(t=!0);v=!t}v?delete m[k][l]:(p[k][l]=m[k][l],g[l]!==n&&(!0===g[l].isFontColor&&m[k][g[l].g+"-gradient"]!==n?p[k][g[l].g+"-gradient"]=m[k][g[l].g+
"-gradient"]:(g[l].posId!==n&&m[k][g[l].posId]!==n&&(p[k][g[l].posId]=m[k][g[l].posId]),g[l].repeatId!==n&&m[k][g[l].repeatId]!==n&&(p[k][g[l].repeatId]=m[k][g[l].repeatId]))))}m=p;delete m.element_id}"column"===f&&(m.grid_class=e.Utils.filterClass(c.prop("class")),c.hasClass("first")?m.grid_class+=" first":c.hasClass("last")&&(m.grid_class+=" last"),f=c[0].style.width,m.grid_width=f?f.replace("%",""):null,m.component_name=d.get("component_name"));!1===h&&e.Utils.clearElementId([m]);e.hasChanged=
!0;e.beforeEvent=q.clone(c);d.setData(m)}},importExport:function(a,b){var c=b.classList.contains("ti-import")?"import":"export",d=this,f=this.$el,g=this.model,h=g.get("elType"),m=h.charAt(0).toUpperCase()+h.slice(1),l="subrow"===h?"Sub-Row":"sub-column"===h?"Sub-Column":m,m={contructor:!0,loadMethod:"html",data:{component_form:{name:e.Constructor.label[c+"_tab"].replace("%s",m),options:[{id:"tb_data_field",type:"textarea",label:e.Constructor.label.import_label.replace("%s",l),help:e.Constructor.label[c+
"_data"].replace("%s",m),"class":"fullwidth",rows:13}]}}};"import"===c&&(m.save={});q.Lightbox.$lightbox[0].style.display="none";q.Lightbox.open(m,function(){t.document.body.classList.add("tb_standalone_lightbox")},function(){var b=this.$lightbox;b.addClass("tb_import_export_lightbox");this.setStandAlone(a.clientX,a.clientY);if("import"===c)b.find(".builder_save_button").on("click.tb_import",function(a){a.preventDefault();a.stopPropagation();a=b.find("#tb_data_field");a=JSON.parse(a.val());if("column"===
h&&"sub-column"===a.component_name||"sub-column"===h&&"column"===a.component_name)a.component_name=h,a.grid_class=f.closest(".module_column").prop("class");a.component_name===n||a.component_name!==h?q.alertWrongPaste():(a=e.Utils.clear(a),e.eventName="row",e.beforeEvent=q.clone(f),e.hasChanged=!0,g.setData(a),q.Lightbox.close())});else{var m=d.getData(f,h);m.component_name=h;m=JSON.stringify(m);b.find("#tb_data_field").val(m).on("click",function(){k(this).trigger("focus").trigger("select")})}u.body.one("themify_builder_lightbox_close",
function(){b.removeClass("tb_import_export_lightbox");t.document.body.classList.remove("tb_standalone_lightbox");"import"===c&&b.find(".builder_save_button").off("click.tb_import")})})},getData:function(a,b){var c={};switch(b){case "row":case "subrow":c=e.Utils._getRowSettings(a.closest(".module_"+b)[0],b);break;case "module":c=e.Models.Registry.lookup(a.closest(".active_module").data("cid")).attributes;break;case "column":case "sub-column":var c=a.closest(".module_column"),d=c.closest("column"===
b?".module_row":".module_subrow"),c=e.Utils._getRowSettings(d[0],"column"===b?"row":"subrow").cols[c.index()]}return e.Utils.clear(c)},duplicate:function(){var a=this.$el,b=q.clone(a);e.activeModel&&q.Lightbox.$lightbox.is(":visible")&&e.Constructor.saveComponent();a.removeClass("tb_element_cid_"+this.model.cid);b.hide().insertAfter(a);var c=this.getData(b,this.model.get("elType"));e.eventName="duplicate";e.beforeEvent=b;e.hasChanged=!0;this.model.setData(c);a.addClass("tb_element_cid_"+this.model.cid)},
edit:function(a,b){var c;if(e.isPreview)return!0;var d=c=e.hasChanged=!1,f=q.Lightbox.$lightbox,g=this.model.get("elType"),h="module"===g?this.model.get("mod_name"):g;if(null!==a){"dblclick"===a.type&&this.model.cid!==e.autoSaveCid&&e.ActionBar.clear();var m=b.classList;c=m.contains("tb_styling");if("visual"===e.mode&&"layout-part"===h&&!e.Forms.LayoutPart.id&&!m.contains("tb_swap")&&("dblclick"===a.type||m.contains("tb_edit"))){e.activeModel=this.model;e.Forms.LayoutPart.edit(this.el);return}!0===
c?this.model.set({styleClicked:!0},{silent:!0}):m.contains("tb_visibility_component")&&(d=!0,this.model.set({visibileClicked:!0},{silent:!0}))}null!==e.activeModel&&null!==e.autoSaveCid&&this.model.cid!==e.autoSaveCid&&e.Constructor.saveComponent(!0);e.activeModel=this.model;if(e.autoSaveCid===this.model.cid){m=null;if(!0===c)m=f.find('a[href="#tb_options_styling"]'),this.model.unset("styleClicked",{silent:!0});else if(!0===d)m=f.find('a[href="#tb_options_visibility"]'),this.model.unset("visibileClicked",
{silent:!0});else if("module"===g||"row"===g)m=f.find('a[href="#tb_options_setting"]');null!==m&&0<m.length&&m[0].click()}else q.Lightbox.open({loadMethod:"inline",templateID:h},!1,!1)},"delete":function(){var a,b=this.$el,c=this.model,d=c.cid,f=c.get("elType");if(confirm(themifyBuilder.i18n[f+"DeleteConfirm"])){var g=b.closest(".module_row"),h="row",m="",l={},p=d;"row"===f?(l.pos_cid=g.next(".module_row"),l.pos="before",0===l.pos_cid.length&&(l.pos="after",l.pos_cid=g.prev(".module_row")),h="delete_row",
l.pos_cid=l.pos_cid.data("cid")):d=g.data("cid");g=q.clone(g);"row"!==f&&(a=b.closest(".module_subrow"));c.destroy();"row"!==f&&0<a.length&&0===a.find(".active_module").length&&a.addClass("tb_row_empty");"row"!==f&&(m=k(".tb_element_cid_"+d),a=m.closest(".module_row"),0===a.find(".active_module").length&&a.addClass("tb_row_empty"));e.hasChanged=!0;e.undoManager.push(d,g,m,h,l);null!==e.activeModel&&e.activeModel.cid===p&&q.Lightbox.$lightbox.find(".tb_close_lightbox")[0].click();e.toolbar.pageBreakModule.countModules()}},
save:function(a){var b=this.model.get("elType"),c={contructor:!0,loadMethod:"html",save:{done:"save"},data:{}},d=this.model.cid;c.data["s"+b]={options:[{id:"item_title_field",type:"text",label:e.Constructor.label.title},{id:"item_layout_save",type:"checkbox",label:"",options:[{name:"layout_part",value:e.Constructor.label.slayout_part}],new_line:!1,after:"",help:'The Layout Parts are re-usable layout parts that can be included into Builder content or anywhere (<a href="https://themify.me/docs/builder#layout-parts" target="_blank">learn more</a>)'}]};
q.Lightbox.$lightbox[0].style.display="none";q.Lightbox.open(c,function(){t.document.body.classList.add("tb_standalone_lightbox")},function(c){var f=this.$lightbox,h=function(a){if("keypress"!==a.type||13===a.keyCode){a.preventDefault();a.stopPropagation();q.showLoader("show");a=e.Models.Registry.lookup(d);switch(b){case "row":var f=b;var g=e.Utils._getRowSettings(k(".tb_element_cid_"+d)[0]);e.Utils.clearElementId([g],!0);break;case "module":f=a.get("mod_name"),g={mod_name:f,element_id:e.Utils.generateUniqueID(),
mod_settings:a.get("mod_settings")}}f=ThemifyStyles.createCss([g],f);g=e.Utils.clear(g);f=k.extend(e.Forms.serialize(c),{action:"tb_save_custom_item",item:JSON.stringify(g),css:JSON.stringify(f),tb_load_nonce:themifyBuilder.tb_load_nonce,postid:themifyBuilder.post_ID,type:b});var h=f.item_layout_save;k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:f,success:function(a){g=null;if("success"===a.status){k("#tb_module_panel",t.document).find(".tb_module_panel_search_text").val("");
if(h){e.hasChanged=!0;var c={mod_name:"layout-part",mod_settings:{selected_layout_part:a.post_name}};delete a.status;0<e.Constructor.layoutPart.data.length&&e.Constructor.layoutPart.data.push(a);var f=k(".tb_element_cid_"+d),m=q.clone(f);if("row"===b){c=e.Views.init_row({cols:[{grid_class:"col-full first last",element_id:e.Utils.generateUniqueID(),modules:[c]}]});var p=c.view.render();c=e.Models.Registry.lookup(p.$el.find(".active_module").data("cid"))}else c=e.Views.init_module(c),p=c.view.render(),
c=c.model;f.replaceWith(p.el);if("visual"===e.mode)k(l).ajaxComplete(function E(a,c,d){-1!==d.data.indexOf("tb_load_module_partial",3)&&(k(this).off("ajaxComplete",E),r="row"===b?e.liveStylingInstance.$liveStyledElmt.closest(".module_row"):e.liveStylingInstance.$liveStyledElmt,e.undoManager.push(p.$el.data("cid"),m,r,"row"))}),c.trigger("custom:preview:refresh",c.get("mod_settings"));else{var r=p.el;e.Mixins.Builder.updateModuleSort(p.$el);e.undoManager.push(p.$el.data("cid"),m,r,"row")}}f=k(".tb_library_item_list");
a=e.toolbar.libraryItems.template([a]);"visual"===e.mode&&(f=f.add(e.toolbar.$el.find(".tb_library_item_list")));f=f.get();c=0;for(var n=f.length;c<n;++c){var v=f[c].getElementsByClassName("simplebar-content");0<v.length?v[0].insertAdjacentHTML("afterbegin",a):f[c].insertAdjacentHTML("afterbegin",a);f[c].previousElementSibling.getElementsByClassName("current")[0].click()}e.toolbar.libraryItems.bindEvents(!0);q.showLoader("hide");q.Lightbox.close()}else alert(a.msg)}})}};f.addClass("tb_save_module_lightbox");
this.setStandAlone(a.clientX,a.clientY);f.on("click.saveLayout",".builder_save_button",h).on("keypress.saveLayout","input",h);u.body.one("themify_builder_lightbox_close",function(){f.removeClass("tb_save_module_lightbox").off(".saveLayout");t.document.body.classList.remove("tb_standalone_lightbox")})})}});e.Views.BaseElement.extend=function(a){var b=this,c=z.View.extend.apply(this,arguments);c.prototype.events=_.extend({},this.prototype.events,a.events);c.prototype.initialize=function(){"function"===
typeof b.prototype.initialize&&b.prototype.initialize.apply(this,arguments);"function"===typeof a.initialize&&a.initialize.apply(this,arguments)};return c};e.Views.Modules["default"]=e.Views.BaseElement.extend({tagName:"div",attributes:function(){var a=this.model.get("mod_settings"),b={"data-cid":this.model.cid,"class":"active_module module-"+this.model.get("mod_name")+" tb_"+this.model.get("element_id")+" tb_element_cid_"+this.model.cid};if("visual"===e.mode){if(b["class"]+=" tb_module_front","hide_all"===
a.visibility_all||"hide"===a.visibility_desktop||"hide"===a.visibility_tablet||"hide"===a.visibility_mobile)b["class"]+=" tb_visibility_hidden"}else b["class"]+=" tb_module";a.custom_css_id!==n&&""!==a.custom_css_id&&(b.id=a.custom_css_id);return b},template:"visual"===e.mode?null:wp.template("builder_module_item"),initialize:function(){this.listenTo(this.model,"dom:module:unsaved",this.removeUnsaved)},removeUnsaved:function(){this.model.destroy()},render:function(){"visual"!==e.mode&&(this.el.innerHTML=
this.template(this.model.toRenderData()));return this}});e.Views.Columns["default"]=e.Views.BaseElement.extend({tagName:"div",attributes:function(){var a={"class":"module_column tb-column tb_element_cid_"+this.model.cid+" tb_"+this.model.get("element_id")+" "+this.model.get("grid_class"),"data-cid":this.model.cid};this.model.get("grid_width")&&(a.style="width:"+this.model.get("grid_width")+"%");"column"!==this.model.get("component_name")&&(a["class"]+=" sub_column");return a},render:function(){var a=
this.model.get("component_name");this.el.innerHTML=q.templateCache.get("tmpl-builder_column_item");var b=this.model.get("modules");if(b){var c=l.createDocumentFragment(),d;for(d in b)if(b[d]!==n&&null!==b[d]){var f=b[d];(f=f.cols===n?e.Views.init_module(f):e.Views.init_subrow(f))&&c.appendChild(f.view.render().el)}b=this.el.getElementsByClassName("tb_holder")[0];b.appendChild(c);"sub-column"===a&&b.classList.add("tb_subrow_holder")}return this}});e.Views.SubRows["default"]=e.Views.BaseElement.extend({tagName:"div",
attributes:function(){return{"class":"themify_builder_sub_row module_subrow active_module clearfix tb_element_cid_"+this.model.cid+" tb_"+this.model.get("element_id"),"data-cid":this.model.cid}},render:function(){var a=this.model.get("cols"),b=Object.keys(a).length;this.el.innerHTML=q.templateCache.get("tmpl-builder_subrow_item");if(0<b){for(var c=l.createDocumentFragment(),d=!1,f=0;f<=b;++f)a[f]!==n&&(a[f].component_name="sub-column",c.appendChild(e.Views.init_column(a[f]).view.render().el),!1===
d&&a[f].modules!==n&&0<a[f].modules.length&&(d=!0));!1===d&&this.el.classList.add("tb_row_empty");this.el.getElementsByClassName("subrow_inner")[0].appendChild(c)}e.Utils.selectedGridMenu(this.el,"subrow");return this}});e.Views.Rows["default"]=e.Views.BaseElement.extend({tagName:"div",attributes:function(){var a=this.model.get("styling"),b={"class":"themify_builder_row module_row clearfix tb_element_cid_"+this.model.cid+" tb_"+this.model.get("element_id"),"data-cid":this.model.cid};a.custom_css_row!==
n&&""!==a.custom_css_row&&(b["class"]+=" "+a.custom_css_row);a.custom_css_id!==n&&""!==a.custom_css_id&&(b.id=a.custom_css_id);return b},render:function(){var a=this.model.get("cols"),b=Object.keys(a).length,c=!1;this.el.innerHTML=q.templateCache.get("tmpl-builder_row_item");if(0<b){for(var d=l.createDocumentFragment(),f=0;f<=b;++f)a[f]!==n&&(a[f].component_name="column",d.appendChild(e.Views.init_column(a[f]).view.render().el),!1===c&&a[f].modules!==n&&(0<a[f].modules.length||"object"===typeof a[f].modules&&
0<Object.keys(a[f].modules).length)&&(c=!0));this.el.getElementsByClassName("row_inner")[0].appendChild(d)}else e.Utils._addNewColumn({newclass:"col-full",component:"column"},this.el.getElementsByClassName("row_inner")[0]);!1===c&&this.el.classList.add("tb_row_empty");e.Utils.selectedGridMenu(this.el,"row");return this}});e.Views.Builder=z.View.extend({type:"default",lastRow:null,events:{"click .tb_import_layout_button":"importLayoutButton"},initialize:function(){this.$el.off("tb_init tb_new_row").on("tb_init",
this.init.bind(this)).on("tb_init",this.newRowAvailable.bind(this))},init:function(a){e.Mixins.Builder.rowSort(this.$el);"visual"===e.mode?(e.Mixins.Builder.updateModuleSort(this.$el),setTimeout(function(){e.Utils._onResize(!0)},1500)):(e.Mixins.Builder.updateModuleSort(this.$el),e.Mixins.Builder.initModuleDraggable(e.toolbar.$el.find(".tb_module_panel_modules_wrap").first(),".tb_module"),e.Mixins.Builder.initModuleDraggable(e.toolbar.$el,".tb_row_grid"));var b=this;setTimeout(function(){e.ActionBar.init();
e.Mixins.Builder.columnHover(b.$el);e.Utils.setCompactMode(b.el.getElementsByClassName("module_column"));b.insertLayoutButton()},1E3);C={}},render:function(){var a=l.createDocumentFragment(),b=this.collection;e.Utils.clearLastEmptyRow(b.models);for(var c=0;c<b.models.length;++c){var d=e.Views.init_row(b.models[c]);!1!==d&&a.appendChild(d.view.render().el)}this.el.appendChild(a);e.Utils.columnDrag(!1,!1);return this},insertLayoutButton:function(){this.removeLayoutButton();this.lastRowAddBtn();var a=
this.el.getElementsByClassName("module_row");2>a.length&&a[0]!==n&&a[0].classList.contains("tb_row_empty")&&(a=l.createElement("a"),a.className="tb_import_layout_button",a.href="#",a.textContent=themifyBuilder.i18n.text_import_layout_button,this.el.appendChild(a))},removeLayoutButton:function(){for(var a=this.el.getElementsByClassName("tb_import_layout_button"),b=a.length-1;-1<b;--b)a[b].parentNode.removeChild(a[b])},importLayoutButton:function(a){e.Views.Toolbar.prototype.loadLayout(a)},newRowAvailable:function(a,
b){var c=this.el.children,d=!0,f=c.length;a=a||1;if(0!==f&&!0!==b)for(--f;-1<f;--f)if(c[f].classList.contains("module_row")){d=!1;break}if(!0===d)return c=e.Views.init_row(e.Utils.grid(a)[0]).view.render().$el,this.el.insertBefore(c[0],this.lastRow),e.Utils.setCompactMode(c[0].getElementsByClassName("module_column")),e.Mixins.Builder.update(c),"visual"===e.mode&&"desktop"!==e.activeBreakPoint&&k("body",t.document).height(l.body.scrollHeight),c},lastRowShowHide:function(a){this.lastRow&&(a?this.lastRow.classList.remove("hide"):
(this.lastRow.classList.remove("expanded"),this.lastRow.classList.add("hide")))},lastRowAddBtn:function(){var a=l.getElementById("tb_add_container");null!==a&&a.parentNode.removeChild(a);this.lastRow=l.createElement("div");var a=l.createElement("div"),b=null;this.lastRow.id="tb_add_container";a.className="tb_last_add_btn";a.textContent="+";this.lastRow.appendChild(a);this.lastRow.addEventListener("click",function(a){a.preventDefault();var c=a.target,f=c.closest(".tb_row_grid");null!==f?(this.classList.remove("expanded"),
e.Mixins.Builder.rowDrop(e.Utils.grid(f.dataset.col),k("<div>").insertBefore(this),!0,!0)):c.classList.contains("tb_add_blocks")?(this.classList.remove("expanded"),e.toolbar.common.show(a,k(this).find(".tb_last_add_btn")),e.toolbar.common.clicked=this.previousElementSibling?k(this.previousElementSibling):null,e.toolbar.common.btn[0].querySelector('[data-target="tb_module_panel_rows_wrap"]').click()):c.classList.contains("tb_last_add_btn")&&(null===b&&(b=!0,a=q.is_template_support?l.getElementById("tmpl-last_row_add_btn").content.cloneNode(!0):
q.templateCache.get("tmpl-last_row_add_btn"),q.is_template_support?this.appendChild(a):this.insertAdjacentHTML("beforeend",a)),this.classList.add("expanded"))});a=null;this.el.appendChild(this.lastRow)}});e.Mixins.Builder={before:null,zindex:null,r:null,w:null,h:null,type:null,moduleHolderArgs:null,update:function(a){if("visual"===e.mode){var b=null!==e.activeModel?e.activeModel.get("elType"):e.Models.Registry.lookup(a.data("cid")).get("elType");e.Utils.loadContentJs(a,b)}a=a.closest(".module_row");
e.Utils.columnDrag(a.find(".row_inner"),!1);e.Utils.columnDrag(a.find(".subrow_inner"),!1);e.Mixins.Builder.updateModuleSort(a);e.Mixins.Builder.columnHover(a)},dragScroll:function(a,b){function c(a,b){m=!0;if(null===h){h=!0;var d=this!==n?this.id:null;d||(d=b);var e=("tb_toolbar"===d||"wpadminbar"===d?"-":"+")+("="+g*l+"px");f.stop().animate({scrollTop:e},{duration:500,complete:function(){!0===m&&(10>l&&++l,h=null,c(null,d))}})}}var d=k("body",t.document);"visual"===e.mode&&(d=d.add(u.body));this.top===
n&&(this.top=e.toolbar.$el,this.top=this.top.add(k("#tb_fixed_bottom_scroll",t.document)),"visual"!==e.mode&&(this.top=this.top.add("#wpadminbar")));if(!0===b)this.top.off("mouseenter mouseleave"),"row"===a&&"visual"===e.mode&&e.toolbar.$el.find('.tb_zoom[data-zoom="100"]').trigger("click"),d.removeClass("tb_drag_start tb_drag_"+a);else{var f=null,g=50,h=null,m=!0,l=1;"visual"!==e.mode&&(f=k(".edit-post-layout__content").first(),0===f.length?f=null:g/=2);null===f&&(f="desktop"===e.activeBreakPoint?
k("body,html"):k("body,html",t.document));d.addClass("tb_drag_start tb_drag_"+a);"row"===a&&"visual"===e.mode&&e.toolbar.$el.find('.tb_zoom[data-zoom="50"]').trigger("click");if(0<g)this.top.off("mouseenter").on("mouseenter",c).off("mouseleave").on("mouseleave",function(){l=1;h=m=null;f.stop()})}},columnSort:function(a){var b,c;a.find(".row_inner, .subrow_inner").sortable({items:"> .module_column",handle:"> .tb_column_action .tb_column_dragger",axis:"x",placeholder:"tb_state_highlight",tolerance:"pointer",
cursorAt:{top:20,left:20},beforeStart:function(a,e,g){u.body.addClass("tb_drag_start");b=q.clone(g.item.closest(".module_row"));c=g.item.siblings();c.css("marginLeft",0)},start:function(a,b){k(".tb_state_highlight").width(b.item.width())},stop:function(a,b){u.body.removeClass("tb_drag_start");c.css("marginLeft","")},update:function(a,c){var d=c.item.closest(".ui-sortable"),f=d.children(".module_column");f.removeClass("first last");d[0].classList.contains("direction-rtl")?(f.last().addClass("first"),
f.first().addClass("last")):(f.first().addClass("first"),f.last().addClass("last"));e.Utils.columnDrag(d,!1);e.Utils.setCompactMode(f);d=d.closest(".module_row");e.undoManager.push(d.data("cid"),b,d,"row")}})},rowSort:function(a){var b=this,c,d={items:">.module_row",handle:">.tb_row_action",axis:"y",placeholder:"tb_state_highlight",containment:"visual"===e.mode?"parent":"body",tolerance:"pointer",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!1,beforeStart:function(a,d,e){b.before||(c=!0,b.before=
e.item.next(".module_row"),0===b.before.length&&(b.before=e.item.prev(".module_row"),c=!1),b.before=b.before.data("cid"),b.dragScroll("row"))},start:function(){a.sortable("refreshPositions")},stop:function(a,d){b.before=c=null;b.dragScroll("row",!0)},update:function(a,d){if("visual"===e.mode&&!d.item[0].classList.contains("tb_row_grid")){var f="desktop"===e.activeBreakPoint?k("html,body"):k("body",t.document);f.scrollTop(d.item.offset().top);f=null}if("sortupdate"===a.type&&b.before){e.hasChanged=
!0;var f=d.item.next(".module_row"),g=!0;0===f.length&&(f=d.item.prev(".module_row"),c=g=!1);f=f.data("cid");e.undoManager.push(d.item.data("cid"),null,null,"row_sort",{bnext:c,before:b.before,anext:g,after:f})}else d.item[0].classList.contains("predesigned_row")||d.item[0].classList.contains("tb_page_break_module")||"row"===d.item.data("type")?"row"===d.item.data("type")?e.toolbar.libraryItems.get(d.item.data("id"),"row",function(a){Array.isArray(a)||(a=Array(a));b.rowDrop(a,d.item)}):d.item[0].classList.contains("tb_page_break_module")?
(b.rowDrop(e.toolbar.pageBreakModule.get(),d.item),e.toolbar.pageBreakModule.countModules()):e.toolbar.preDesignedRows.get(d.item.data("slug"),function(a){b.rowDrop(a,d.item)}):d.item[0].classList.contains("tb_row_grid")&&b.subRowDrop(d.item.data("slug"),d.item)}};"visual"===e.mode&&(d.helper=function(){return k('<div class="tb_sortable_helper"/>')});a.sortable(d)},updateModuleSort:function(a,b){var c=k(".tb_holder",a),d=this;if(b)return c.sortable(b),!1;c.each(function(){k(this).data({uiSortable:null,
sortable:null})});this.moduleHolderArgs={placeholder:"tb_state_highlight",items:">.active_module,>div>.active_module",connectWith:".tb_holder",revert:100,scroll:!1,cancel:".tb_disable_sorting",cursorAt:{top:10,left:90},beforeStart:function(a,b,c){d.before||(d.r=c.item.closest(".module_row"),0<d.r.length?(d.before=q.clone(d.r),d.zindex=d.r.css("zIndex"),"auto"===d.zindex&&(d.zindex=""),d.r.css("zIndex",2)):d.r=null,d.w=c.item[0].style.width,d.h=c.item[0].style.height,c.item.css({width:180,height:30}),
d.type="module",c.item[0].classList.contains("module_subrow")?d.type+=" tb_drag_subrow":c.item[0].classList.contains("tb_row_grid")&&(d.type="column"),d.dragScroll(d.type))},start:function(a,b){if(b.item[0].classList.contains("module_subrow")||b.item[0].classList.contains("tb_row_grid"))k(".tb_subrow_holder").sortable("disable"),k(".tb_holder").sortable("refresh")},stop:function(a,b){e.ActionBar.clear();"visual"===e.mode&&b.helper&&k(b.helper).remove();b.item.css({width:d.w,height:d.h});d.dragScroll(d.type,
!0);d.r&&d.r.css("zIndex",d.zindex);if(b.item[0].classList.contains("module_subrow")||b.item[0].classList.contains("tb_row_grid"))k(".tb_subrow_holder").sortable("enable"),k(".tb_holder").sortable("refresh");d.before=d.w=d.h=d.r=d.zindex=d.type=null},update:function(a,b){b.item.css({width:d.w,height:d.h});if(b.item[0].classList.contains("tb_module_dragging_helper")){var f=k(b.item.clone(!1));if(b.item.data("id")){var g=b.item.closest(".module_row");0<g.length&&(d.before=q.clone(g),d.before.find(".tb_module_dragging_helper").remove())}b.item.after(f);
d.moduleDrop(f,null,d.before)}else{if(b.sender&&(f=b.sender.closest(".module_row"),b.sender.closest(".module_row").toggleClass("tb_row_empty",0===f.find(".active_module").length),f=b.sender.closest(".module_subrow"),0<f.length&&f.toggleClass("tb_row_empty",0===f.find(".active_module").length),b.item[0].classList.contains("module_subrow")&&0<b.item.parent().closest(".module_subrow").length)){c.sortable("cancel");return}d.before&&(e.hasChanged=!0,b.item[0].classList.contains("module_subrow")||b.item.closest(".module_subrow").removeClass("tb_row_empty"),
f=b.item.closest(".module_row"),f.removeClass("tb_row_empty"),e.undoManager.push(b.item.data("cid"),d.before,f,"sort",{before:d.before.data("cid"),after:f.data("cid")}),d.before=null,u.body.triggerHandler("tb_"+d.type+"_sort",[b.item]))}}};"visual"===e.mode&&(this.moduleHolderArgs.helper=function(){return k('<div class="tb_sortable_helper"/>')});c.sortable(this.moduleHolderArgs)},initModuleDraggable:function(a,b){var c=this,d=k.extend(!0,{},this.moduleHolderArgs);d.update=!1;d.appendTo=l.body;d.items=
b;".tb_row_grid"===b&&(d.connectWith=[d.connectWith,"visual"===e.mode?"#themify_builder_content-"+themifyBuilder.post_ID:"#tb_row_wrapper"]);d.stop=function(b,d){k(this).sortable("cancel");d.item.removeClass("tb_sortable_helper tb_module_dragging_helper");c.moduleHolderArgs.stop(b,d);d.item[0].classList.contains("tb_row_grid")&&a.sortable("refresh")};d.start=function(b,d){d.item.addClass("tb_sortable_helper tb_module_dragging_helper");c.moduleHolderArgs.start(b,d);d.item[0].classList.contains("tb_row_grid")&&
a.sortable("refresh")};d.helper=function(a,b){return k('<div class="tb_sortable_helper tb_module_dragging_helper">'+b.text()+"</div>")};a.sortable(d)},initRowDraggable:function(a,b){var c=this;a.find(b).draggable({appendTo:u.body,helper:"clone",revert:"invalid",connectToSortable:"visual"===e.mode?"#themify_builder_content-"+themifyBuilder.post_ID:"#tb_row_wrapper",cursorAt:{top:10,left:40},start:function(a,b){c.dragScroll("row");b.helper.addClass("tb_module_dragging_helper tb_sortable_helper").find(".tb_predesigned_rows_image").remove()},
stop:function(a,b){c.dragScroll("row",!0)}})},initModuleVisualDrag:function(a){var b=this;e.toolbar.$el.find(a).ThemifyDraggable({iframe:"#tb_iframe",dropitems:".tb_holder",elements:".active_module",type:"module",onDrop:function(a,d,e){b.moduleDrop(d,!1,q.clone(e.closest(".module_row")))}})},initRowGridVisualDrag:function(){var a=this;e.toolbar.$el.find(".tb_row_grid").ThemifyDraggable({iframe:"#tb_iframe",dropitems:".tb_holder:not('.tb_subrow_holder'),.themify_builder_content:not('.not_editable_builder')>.module_row",
elements:".active_module",cancel:".tb_subrow_holder",append:!1,type:"column",onDrop:function(b,c,d){a.subRowDrop(c.data("slug"),c)}})},initRowVisualDrag:function(a){var b=this;e.toolbar.$el.find(a).ThemifyDraggable({iframe:"#tb_iframe",dropitems:".themify_builder_content:not('.not_editable_builder')>.module_row",append:!1,type:"row",onDragBefore:function(a,b){e.toolbar.$el.find('.tb_zoom[data-zoom="50"]').click()},onDrop:function(a,d,f){d.addClass("tb_state_highlight").find(".tb_predesigned_rows_image").remove();
d.show();e.Utils.setCompactMode(d.offset().top);"row"===d.data("type")?e.toolbar.libraryItems.get(d.data("id"),"row",function(a){Array.isArray(a)||(a=Array(a));b.rowDrop(a,d)}):d[0].classList.contains("tb_page_break_module")?(b.rowDrop(e.toolbar.pageBreakModule.get(),d),e.toolbar.pageBreakModule.countModules()):e.toolbar.preDesignedRows.get(d.data("slug"),function(a){b.rowDrop(a,d)})}})},subRowDrop:function(a,b){e.ActionBar.clear();var c=0<b.parent(".themify_builder_content,#tb_row_wrapper").length;
if(c||0===b.closest(".sub_column").length){a=e.Utils.grid(a);if(!c){var d=q.clone(b.closest(".module_row"));d.find(".tb_row_grid").remove();var f="row"}var g=(c?e.Views.init_row({cols:a[0].cols}):e.Views.init_subrow({cols:a[0].cols})).view.render().$el;if(c||b[0].parentNode.classList.contains("tb_holder")||b[0].parentNode.parentNode.classList.contains("tb_holder"))b[0].parentNode.replaceChild(g[0],b[0]),g[0].className+=" tb_element_selected",e.ActionBar.type="subrow";else{var h=b.next(".tb_holder");
0<h.length?h.prepend(g):(h=b.prev(".tb_holder"),h.append(g))}if(c){d=g.next(".module_row");var m=!0;0===d.length&&(m=!1,d=g.prev(".module_row"));d=d.data("cid");f="grid_sort"}e.Utils.setCompactMode(g[0].getElementsByClassName("module_column"));e.Mixins.Builder.update(g);b.remove();e.hasChanged=!0;h=g.closest(".module_row");c||h.removeClass("tb_row_empty");h.find(".tb_row_grid").remove();e.Utils.scrollToDropped(g[0]);e.undoManager.push(h.data("cid"),d,h,f,{next:m})}else b.remove()},rowDrop:function(a,
b,c,d){function f(){var a=b.prev(".module_row");if(0===a.length){var c="visual"===e.mode?b.closest(".themify_builder_content").data("postid"):null;a=!1}else a=a.data("cid");b[0].innerHTML="";e.ActionBar.type="row";b[0].parentNode.replaceChild(h,b[0]);e.hasChanged=!0;e.Instances.Builder[e.builderIndex].removeLayoutButton();e.undoManager.push("","","","predesign",{prev:a,rows:m,bid:c});a=0;for(c=m.length;a<c;++a){var d=m[a][0].getElementsByClassName("module_column");0===a&&m[a][0].classList.add("tb_element_selected");
e.Utils.setCompactMode(d);e.Mixins.Builder.update(m[a])}e.Utils.scrollToDropped(m[0][0]);q.showLoader("hide")}e.ActionBar.clear();var g=function(a){for(var b in a)if(a[b].styling&&0<Object.keys(a[b].styling).length||a[b].modules&&0<Object.keys(a[b].modules).length)return!0;return!1},h=l.createDocumentFragment(),m=[],k=[];d||e.Utils.clearLastEmptyRow(a);d=0;for(var p=a.length;d<p;++d)if(!0===c||a[d].styling&&0<Object.keys(a[d].styling).length||a[d].cols&&g(a[d].cols)){var n=e.Views.init_row(a[d]);
if(!1!==n){n=n.view.render();h.appendChild(n.el);if("visual"===e.mode){var v=n.el.querySelectorAll("[data-cid]");k[n.el.dataset.cid]=1;d=0;for(p=v.length;d<p;++d)k[v[d].dataset.cid]=1}m.push(n.$el)}}"visual"===e.mode?(e.bootstrap(k,f),k=null):f()},moduleDrop:function(a,b,c){function d(d){function f(d){h||m.model.set({is_new:1},{silent:!0});d=!0===d?m.model.getPreviewSettings():m.model.get("mod_settings");b?b.hasClass("tb_module_front")?b.after(k.el):b.append(k.el):a.replaceWith(k.el);h?e.activeModel=
m.model:m.model.trigger("edit",null);e.hasChanged=!0;if("visual"===e.mode&&1<Object.keys(d).length){var f=d.cid;if("part"===g||"ajax"===a.data("type")){var l=!0;m.model.trigger("custom:preview:refresh",d)}else"module"!==g?m.model.trigger("custom:preview:live",d):e.Utils.loadContentJs(k.$el,"module")}h&&(l&&(l=m.view.$el.find(".tb_preview_component").detach(),m.view.$el.prepend(l)),c&&(f=k.$el.closest(".module_row"),f.removeClass("tb_row_empty").find(".tb_module_dragging_helper").remove(),k.$el.closest(".module_subrow").removeClass("tb_row_empty"),
e.undoManager.push(f.data("cid"),c,f,"row"),f=f.data("cid"),e.Instances.Builder[e.builderIndex].removeLayoutButton(),e.activeModel=null));e.Utils.scrollToDropped(null,f)}var m=e.Views.init_module(d,!0),k=m.view.render();"visual"===e.mode&&h?(d=[],d[m.model.cid]=1,e.bootstrap(d,f)):f(!0);return k}e.ActionBar.clear();if(a[0].classList.contains("tb_row_grid"))this.subRowDrop(a.data("slug"),a);else{var f={mod_name:a.data("module-slug")},g=a.data("type"),h="part"===g||"module"===g;if(h)e.toolbar.libraryItems.get(a.data("id"),
g,d);else return d(f);"visual"!==e.mode&&k(".themify-wp-editor-holder").addClass("themify-active-holder")}},toJSON:function(a){var b={};a=a.children;for(var c=0,d=0,f=a.length;d<f;++d)if(a[d].classList.contains("module_row")){var g=e.Utils._getRowSettings(a[d]);0<Object.keys(g).length&&(b[c]=g,++c)}return b},columnHover:function(a){var b;a=a[0]!==n?a[0]:a;a=a.classList.contains("sub_column")?[a]:a.getElementsByClassName("sub_column");for(var c=null,d=function(a){if(null===c){c=!0;a=a.target;var d=
this.parentNode.closest(".module_column");b=a.getElementsByClassName("tb_column_action")[0];if(!d.classList.contains("tb_hover_sub_column")&&(d.classList.add("tb_hover_sub_column"),b!==n)){a=b.getBoundingClientRect();var e=!0,d=5>a.left?d.closest(".module_row").getElementsByClassName("tb_row_action")[0]:this.closest(".module_subrow").getElementsByClassName("tb_subrow_action")[0];d!==n&&(d=d.getBoundingClientRect(),e=Math.abs(a.left-d.left)<a.width?Math.abs(d.top-a.top)>a.height:!0);!0===e?b.classList.remove("tb_action_overlap"):
b.classList.add("tb_action_overlap")}}},e=function(a){!0===c&&(a=this.parentNode.closest(".module_column").classList,a.contains("tb_hover_sub_column")&&(a.remove("tb_hover_sub_column"),b!==n&&(b.classList.remove("tb_action_overlap"),b=n)),c=null)},g=a.length-1;-1<g;--g)a[g].removeEventListener("mouseenter",d,{passive:!0}),a[g].removeEventListener("mouseleave",e,{passive:!0}),a[g].addEventListener("mouseenter",d,{passive:!0}),a[g].addEventListener("mouseleave",e,{passive:!0})}};e.undoManager={stack:[],
is_working:!1,index:-1,btnUndo:null,btnRedo:null,compactBtn:null,init:function(){this.btnUndo=e.toolbar.el.getElementsByClassName("tb_undo_btn")[0];this.btnRedo=e.toolbar.el.getElementsByClassName("tb_redo_btn")[0];this.compactBtn=e.toolbar.el.getElementsByClassName("tb_compact_undo")[0];e.toolbar.$el.find(".tb_undo_redo").on("click",this.do_change.bind(this));if(!themifyBuilder.disableShortcuts&&(k(t.document).on("keydown",this.keypres.bind(this)),"visual"===e.mode))k(l).on("keydown",this.keypres.bind(this))},
push:function(a,b,c,d,f){e.hasChanged&&(e.editing=!1,c&&(c=q.clone(c)),"visual"!==e.mode||"duplicate"!==d&&"sort"!==d||k(y).triggerHandler("tfsmartresize.tfVideo"),this.stack.splice(this.index+1,this.stack.length-this.index),this.stack.push({cid:a,type:d,data:f,before:b,after:c}),this.index=this.stack.length-1,this.updateUndoBtns(),"visual"===e.mode&&(e.Forms.LayoutPart.isSaved=null,u.body.triggerHandler("builder_dom_changed",[d])))},set:function(a){var b=a[0].querySelectorAll("[data-cid]"),b=Array.prototype.slice.call(b);
b.unshift(a[0]);a=0;for(var c=b.length;a<c;++a){var d=e.Models.Registry.lookup(b[a].getAttribute("data-cid"));d&&d.trigger("change:view",b[a])}},doScroll:function(a){return a},keypres:function(a){if(90===a.which&&null===e.activeModel&&"INPUT"!==l.activeElement.tagName&&"TEXTAREA"!==l.activeElement.tagName)if(!0===a.ctrlKey&&!0===a.shiftKey||!0===a.metaKey&&!0===a.shiftKey)a.preventDefault(),this.hasRedo()&&this.changes(!1);else if(!0===a.ctrlKey||!0===a.metaKey)a.preventDefault(),this.hasUndo()&&
this.changes(!0)},changes:function(a){var b=this.stack[this.index+(a?0:1)];if(b!==n){this.is_working=!0;var c="";var d=b.type;var f=k(".tb_element_cid_"+b.cid);var g=!1;e.eventName=d;if("row"===d)a?(c=q.clone(b.before),g=b.cid):(c=q.clone(b.after),g=b.before.data("cid"),f=k(".tb_element_cid_"+g)),this.doScroll(f),this.set(c),c.toggleClass("tb_row_empty",0===c.find(".active_module").length),f.replaceWith(c);else if("duplicate"===d)a?this.doScroll(k(".tb_element_cid_"+b.after.data("cid"))).remove():
(this.doScroll(f),c=q.clone(b.after),g=b.before.data("cid"),this.set(c),f.after(c));else if("delete_row"===d)if(a){c=q.clone(b.before);g=b.cid;var h=k(".tb_element_cid_"+b.data.pos_cid);this.doScroll(h);this.set(c);"after"===b.data.pos?h.after(c):h.before(c)}else this.doScroll(f).remove();else if("sort"===d)g=b.cid,a?(h=b.data.before,c=q.clone(b.before)):(h=b.data.after,c=q.clone(b.after),"visual"===e.mode&&c.find(".active_module").css({display:"block",height:"auto"})),this.doScroll(c),this.set(c),
b=k(".tb_element_cid_"+g).closest(".module_row"),k(".tb_element_cid_"+g).remove(),b.toggleClass("tb_row_empty",0===b.find(".active_module").length),b=null,k(".tb_element_cid_"+h).replaceWith(c),b=c.closest(".module_row"),b.toggleClass("tb_row_empty",0===b.find(".active_module").length),b=null;else if("row_sort"===d)g=b.cid,h=b.data[a?"bnext":"anext"],b=k(".tb_element_cid_"+b.data[a?"before":"after"]),f=k(".tb_element_cid_"+g),c=q.clone(f),f.remove(),f=null,this.set(c),h?b.before(c):b.after(c),this.doScroll(c);
else if("save"===d){g=b.cid;var d=e.Models.Registry.lookup(g),m="module"===d.get("elType"),r=m?"mod_settings":"styling";if(m&&b.data.column)a?(b=k(".tb_element_cid_"+g).closest(".module_row"),g=!1,this.doScroll(f).remove()):(g=b.data.column.data("cid"),c=q.clone(b.data.column),f=k(".tb_element_cid_"+g),this.doScroll(f),this.set(c),f.replaceWith(c),b=c.closest(".module_row")),b.toggleClass("tb_row_empty",0===b.find(".active_module").length),b=null;else{this.doScroll(f);m={};a?(c=q.clone(b.before),
m[r]=b.data.bsettings):(c=q.clone(b.after),m[r]=b.data.asettings);if("visual"===e.mode){b=k.extend(!0,{},b.data.styles);for(var p in b)for(h in r=ThemifyStyles.getSheet(p),r=r.cssRules?r.cssRules:r.rules,b[p])if(r[h])for(var t in b[p][h])r[h].style["backgroundClip"===t||"background-clip"===t?"WebkitBackgroundClip":t]=a?b[p][h][t].b:b[p][h][t].a}d.set(m,{silent:!0});m=null;this.set(c);f.replaceWith(c)}}else if("predesign"===d)if(f=b.data.rows,a)for(this.doScroll(k(".tb_element_cid_"+f[0].data("cid"))),
h=0,p=f.length;h<p;++h)k(".tb_element_cid_"+f[h].data("cid")).remove();else{t=l.createDocumentFragment();c=[];h=0;for(p=f.length;h<p;++h)d=q.clone(f[h]),t.appendChild(d[0]),c.push(d);!1!==b.data.prev?this.doScroll(k(".tb_element_cid_"+b.data.prev)).after(t):this.doScroll("visual"===e.mode?k("#themify_builder_content-"+b.data.bid):k("#tb_row_wrapper")).prepend(t);h=0;for(p=c.length;h<p;++h)this.set(c[h]),e.Mixins.Builder.update(c[h])}else if("import"===d){h=k('[data-postid="'+b.data.bid+'"]');b=a?
b.data.before:b.data.after;var v=this;b=q.clone(b);h.children().remove();h.prepend(b);b.each(function(){v.set(k(this))})}else"grid_sort"===d&&(a?k(".tb_element_cid_"+b.cid).remove():(h=k(".tb_element_cid_"+b.before),c=q.clone(b.after),g=b.cid,b.data.next?h.before(c):h.after(c),this.set(c)));g&&e.Mixins.Builder.update(k(c));a?--this.index:++this.index;this.is_working=!1;this.updateUndoBtns();e.toolbar.pageBreakModule.countModules()}},hasRedo:function(){return this.index<this.stack.length-1},hasUndo:function(){return-1!==
this.index},disable:function(){this.btnUndo.classList.add("tb_disabled");this.btnRedo.classList.add("tb_disabled");this.compactBtn.classList.add("tb_disabled")},updateUndoBtns:function(){var a=this.hasUndo(),b=this.hasRedo();a?this.btnUndo.classList.remove("tb_disabled"):this.btnUndo.classList.add("tb_disabled");b?this.btnRedo.classList.remove("tb_disabled"):this.btnRedo.classList.add("tb_disabled");a||b?this.compactBtn.classList.remove("tb_disabled"):this.compactBtn.classList.add("tb_disabled")},
reset:function(){this.stack=[];this.index=-1;this.updateUndoBtns()},do_change:function(a){a.preventDefault();a.stopPropagation();!1!==this.is_working||a.currentTarget.classList.contains("tb_disabled")||this.changes(a.currentTarget.classList.contains("tb_undo_btn"))}};e.Views.Toolbar=z.View.extend({events:{"click .tb_import":"import","click .tb_load_layout":"loadLayout","click .tb_save_layout":"saveLayout","click .tb_dup_link":"duplicate","click .tb_toolbar_save":"save","click .tb_toolbar_backend_edit a":"save",
"click .tb_toolbar_close_btn":"panelClose","click .tb_breakpoint_switcher":"breakpointSwitcher","click .tb_float_minimize":"minimize","click .tb_float_close":"closeFloat","click .tb_toolbar_add_modules":"openFloat","click .tb_zoom":"zoom","click .tb_toolbar_zoom_menu_toggle":"zoom","click .tb_toolbar_builder_preview":"previewBuilder","click .js-tb_module_panel_acc":"toggleAccordion"},lightboxStorageKey:"tb_module_panel",render:function(){var a=this,b=l.createDocumentFragment();for(m in themifyBuilder.modules){var c=
l.createElement("div"),d=l.createElement("div"),f=l.createElement("span"),g=l.createElement("strong"),h=l.createElement("a");c.className="tb_module_outer tb-module-"+m;themifyBuilder.modules[m].favorite&&(c.className+=" favorited");d.className="tb_module tb-module-type-"+m;f.className="tb_favorite ti-star tb_disable_sorting";g.className="module_name";g.textContent=themifyBuilder.modules[m].name;h.href="#";h.className="add_module_btn tb_disable_sorting";h.dataset.type="module";h.title=themifyBuilder.i18n.add_module;
d.dataset.moduleSlug=m;themifyBuilder.modules[m].type&&(d.dataset.type=themifyBuilder.modules[m].type);d.appendChild(f);d.appendChild(g);d.appendChild(h);c.appendChild(d);b.appendChild(c)}var m=l.createElement("span");c=this.el.getElementsByClassName("tb_module_panel_tab_acc_content_module")[0];m.className="favorite-separator";b.appendChild(m);c.appendChild(b);"visual"===e.mode&&t.document.body.appendChild(this.el);b=function(){a.Panel.init();e.undoManager.init();new SimpleBar(a.el.getElementsByClassName("tb_module_panel_modules_wrap")[0]);
a.pageBreakModule.init();a.preDesignedRows.init();a.libraryItems.init();a.common.init();setTimeout(function(){a.help.init();setTimeout(function(){a.Revisions.init()},1200);"visual"===e.mode&&(e.Mixins.Builder.initModuleVisualDrag(".tb_module"),e.Mixins.Builder.initRowGridVisualDrag())},800);"visual"===e.mode&&(a.$el.on("click",".tb_favorite",a.toggleFavoriteModule),a.unload());u.body.on("click",".tb_favorite",a.toggleFavoriteModule);a.draggable();"true"===localStorage.getItem("tb_panel_closed")?a.closeFloat():
a.Panel.setFocus()};if("visual"===e.mode)t.jQuery("body").one("themify_builder_ready",b);else b()},getStorage:function(){var a=localStorage.getItem(this.lightboxStorageKey);return a?JSON.parse(a):null},updateStorage:function(){var a=this.$el.find("#tb_module_panel"),b=a.position(),c=a.outerHeight();0>=c&&(c=(c=this.getStorage())?c.height:"");a={top:b.top,left:b.left,width:a.outerWidth(),height:c};localStorage.setItem(this.lightboxStorageKey,JSON.stringify(a))},getPanelClass:function(a){return 195>=
a?"tb_float_xsmall":270>=a?"tb_float_small":400>=a?"tb_float_medium":"tb_float_large"},_setResponsiveTabs:function(a){for(var b=e.toolbar.el.getElementsByClassName("tb_module_types"),c=b.length-1;-1<c;--c)"tb_float_xsmall"===a?(b[c].classList.add("tb_ui_dropdown_items"),b[c].parentNode.classList.add("tb_compact_tabs")):(b[c].classList.remove("tb_ui_dropdown_items"),b[c].parentNode.classList.remove("tb_compact_tabs"))},resize:function(){for(var a=this.el.getElementsByClassName("tb_modules_panel_wrap")[0],
b=this,c,d,e,g,h=a.getElementsByClassName("tb_resizable"),m,l,p=null,n=function(f){var h=c+g-f.clientX,k=null;if("w"===l||"sw"===l||"nw"===l){var n=a.style.width;k=parseInt(a.style.left)+parseInt(n)-h}if("w"!==l){if("y"===l||"-y"===l||"sw"===l||"se"===l||"nw"===l||"ne"===l)if(n="-y"===l||"ne"===l||"nw"===l?d+e-f.clientY:e+f.clientY-d,50<=n&&n<=p){if("-y"===l||"ne"===l||"nw"===l)a.style.top=parseInt(a.style.top)+parseInt(a.style.height)-n+"px";a.style.height=n+"px"}"sw"!==l&&"nw"!==l&&(h=g+f.clientX-
c)}if("y"!==l&&"-y"!==l){if(500<h||120>h)n=h,h=120>h?120:500,null!==k&&(k=k+n-h);null!==k&&(a.style.left=k+"px");a.style.width=h+"px";f=b.getPanelClass(h);m!==f&&(m&&a.classList.remove(m),a.classList.add(f),m=f,b._setResponsiveTabs(f))}},q=function(){t.document.body.classList.remove("tb_start_animate");t.document.body.classList.remove("tb_panel_resize");t.document.removeEventListener("mousemove",n,{passive:!0});t.document.removeEventListener("mouseup",q,{passive:!0});c=g=l=m=null;b.updateStorage()},
w=h.length-1;-1<w;--w)h[w].addEventListener("mousedown",function(b){1===b.which&&(t.document.body.classList.add("tb_start_animate"),t.document.body.classList.add("tb_panel_resize"),l=this.dataset.axis,c=b.clientX,d=b.clientY,p=k(y).height()-50,e=parseInt(k(a).outerHeight(),10),g=parseInt(k(a).outerWidth(),10),t.document.addEventListener("mousemove",n,{passive:!0}),t.document.addEventListener("mouseup",q,{passive:!0}))},{passive:!0})},setFloat:function(){var a=this.Panel.el.find("#tb_module_panel");
a[0].classList.add("tb_panel_floating");var b=this.getStorage();b&&(a[0].style.width=b.width+"px",a[0].style.height=b.height+"px");b=this.getPanelClass(a.width());a[0].classList.add(b);this._setResponsiveTabs(b)},removeFloat:function(){this.Panel.el.find("#tb_module_panel").css({top:"",width:"",height:"",left:"",right:"",bottom:""}).removeClass("tb_panel_floating tb_float_xsmall tb_float_small tb_float_medium tb_float_large tb_is_minimize")},draggable:function(){var a=this.$el.find("#tb_module_panel"),
b=this;if(!q.Lightbox.dockMode.get()){a[0].classList.add("tb_panel_floating");var c=this.getStorage(),d=null;if(c){for(var f in c)a[0].style[f]=c[f]+"px";d=c.width}else d=a.width();c=this.getPanelClass(d);a[0].classList.add(c);this._setResponsiveTabs(c)}a.draggable({handle:".tb_drag_handle",cancel:".tb_module_types",scroll:!0,start:function(a,c){t.document.body.classList.add("tb_panel_drag");b.setFloat();q.Lightbox.dockMode.get()&&(q.Lightbox.dockMode.close(),setTimeout(function(){e.Utils._onResize(!0)},
100))},drag:function(a,b){"visual"===e.mode&&q.Lightbox.dockMode.drag(a,b)},stop:function(a,c){t.document.body.classList.remove("tb_panel_drag");q.Lightbox.dockMode.drag(a,c);if(q.Lightbox.dockMode.get())b.removeFloat(),b._setResponsiveTabs(!1);else{var d=k(t).height()-30,f=c.position.top,g={};0>f?g.top=0:f>d&&(g.top=d);for(var h in g)c.helper[0].style[h]=g[h]+"px";b.updateStorage()}"visual"===e.mode&&k(l).triggerHandler("mouseup")}});this.resize()},minimize:function(a){a.preventDefault();a.stopPropagation();
a=k(a.currentTarget).closest("#tb_module_panel");if(a.hasClass("tb_is_minimize")){a.removeClass("tb_is_minimize");var b=this.getStorage();a.css("height",b?b.height:"")}else a.addClass("tb_is_minimize");"visual"===e.mode&&k(l).triggerHandler("mouseup")},"import":function(a){a.preventDefault();a.stopPropagation();var b=a.currentTarget.getAttribute("data-component"),c=t.document.getElementsByTagName("body")[0],d={contructor:"file"!==b,dataType:"json",data:{action:"builder_import",type:b}};if("file"!==
b||confirm(themifyBuilder.i18n.importFileConfirm))if("file"===b){var f=t.document.getElementById("tb_import_filestb_plupload_browse_button");null===f?(f=l.createElement("input"),a=l.createElement("div"),b=l.createElement("span"),a.id="tb_import_filestb_plupload_upload_ui",a.style.display="none",f.type="button",f.id="tb_import_filestb_plupload_browse_button",b.className="ajaxnonceplu",b.id=themifyBuilder.import_nonce,a.appendChild(f),a.appendChild(b),c.appendChild(a),e.Utils.builderPlupload("",f.parentNode)):
f.click()}else{q.Lightbox.$lightbox[0].style.display="none";f=k(a.currentTarget.closest("ul"));var g=f.offset(),h=g.top+f.height()-40;u.body.off("themify_builder_lightbox_close.import");f.addClass("tb_current_menu_selected");null!==e.Forms.LayoutPart.id&&(h-=y.pageYOffset+60);q.Lightbox.open(d,function(){c.classList.add("tb_standalone_lightbox")},function(){this.$lightbox[0].classList.add("tb_import_post_lightbox");this.setStandAlone(g.left,h,!0);u.body.one("themify_builder_lightbox_close.import",
function(){c.classList.remove("tb_standalone_lightbox");q.Lightbox.$lightbox[0].classList.remove("tb_import_post_lightbox");f.removeClass("tb_current_menu_selected");c=null});k("#tb_submit_import_form",q.Lightbox.$lightbox).one("click",function(a){a.preventDefault();q.LiteLightbox.confirm(themifyBuilder.i18n.dialog_import_page_post,function(a){k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"builder_import_submit",nonce:themifyBuilder.tb_load_nonce,data:e.Forms.serialize("tb_options_import"),
importType:"no"===a?"replace":"append",importTo:themifyBuilder.post_ID},beforeSend:function(a){q.showLoader("show")},success:function(a){a.builder_data!==n?e.Forms.reLoad(a.builder_data,themifyBuilder.post_ID):q.showLoader("error");q.Lightbox.close()}})},{buttons:{no:{label:e.Constructor.label.replace_builder},yes:{label:e.Constructor.label.append_builder}}})})})}},unload:function(){"visual"===e.mode&&l.head.insertAdjacentHTML("afterbegin",'<base target="_parent">');t.onbeforeunload=function(){return e.editing||
!e.hasChanged&&!e.undoManager.hasUndo()?null:"Are you sure"}},panelClose:function(a){a.preventDefault();t.location.reload(!0)},loadLayout:function(a){a.preventDefault();a.stopPropagation();var b=this,c=t.document.body,d=k(a.currentTarget.closest("ul"));a=b.layoutsList?{loadMethod:"html",data:b.layoutsList}:{data:{action:"tb_load_layout"}};q.Lightbox.$lightbox[0].style.display="none";d.addClass("tb_current_menu_selected");u.body.off("themify_builder_lightbox_close.loadLayout");q.Lightbox.open(a,function(){c.classList.add("tb_load_layout_active");
c.classList.add("tb_standalone_lightbox")},function(){function a(){var a=h.find(".layout_preview_list");m.show().find("li").on("click",function(b){b.preventDefault();b.stopPropagation();this.classList.contains("current")||(b=a,this.classList.contains("all")||(a.hide(),b=a.filter('[data-category*="'+k(this).text()+'"]')),b.show(),n(b),k(this).addClass("current").siblings().removeClass("current"),m.parent().find(".tb_ui_dropdown_label").html(k(this).text()));e.Utils.hideOnClick(m)});g.on("click.loadLayout",
".layout_preview img",function(a){a.preventDefault();a.stopPropagation();var c=k(this).closest(".layout_preview");q.LiteLightbox.confirm(themifyBuilder.i18n.confirm_template_selected,function(a){var d=c.closest("ul").data("group"),f=function(c){if("no"!==a){var d="visual"!==e.mode?l.getElementById("tb_row_wrapper"):l.getElementsByClassName("themify_builder_content-"+themifyBuilder.post_ID)[0],d=e.Mixins.Builder.toJSON(d),f=[],g;for(g in d)f.push(d[g]);d=null;for(g in c)f.push(c[g]);c=f;f=null}!0!==
b.is_set&&k.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"set_layout_action",nonce:themifyBuilder.tb_load_nonce,mode:"no"!==a?1:0,id:themifyBuilder.post_ID},success:function(){b.is_set=!0}});e.Forms.reLoad(c,themifyBuilder.post_ID);q.Lightbox.close()};if("pre-designed"===d){q.showLoader("show");var g=c.data("slug"),h="https://themify.me/themify-layouts/"+g+".txt";if(!e.layouts_selected)e.layouts_selected={};else if(e.layouts_selected[g]){f(JSON.parse(e.layouts_selected[g]));return}k.get(h,
null,null,"text").done(function(a){e.layouts_selected[g]=a;f(JSON.parse(a))}).fail(function(a,b,c){q.LiteLightbox.alert("There was an error in loading layout, please try again later, or you can download this file: ("+h+") and then import manually (https://themify.me/docs/builder#import-export).")}).always(function(){q.showLoader()})}else k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_set_layout",nonce:themifyBuilder.tb_load_nonce,layout_slug:c.data("slug"),layout_group:d,
mode:"no"!==a?1:0},beforeSend:function(){"visual"===e.mode&&q.showLoader("show")},success:function(a){a.data?(f(a.data),q.showLoader()):(q.showLoader("error"),alert(a.msg),q.Lightbox.close())}})},{buttons:{no:{label:"Replace Layout"},yes:{label:"Append to Layout"}}})}).find("#tb_layout_search").on("keyup",function(){var b=k.trim(k(this).val()),c=a;""!==b&&(c=m.find("li.all"),c[0].classList.contains("current")||c.click(),a.hide(),c=a.find(".layout_title:contains("+b+")").closest(".layout_preview_list"));
c.show();n(c)})[0].focus();new SimpleBar(g[0]);new SimpleBar(m[0]);u.body.one("themify_builder_lightbox_close.loadLayout",function(){g.off("click.loadLayout")[0].classList.remove("tb_predesigned_lightbox");h.find("#tb_layout_search").off("keyup");h=g=null;c.classList.remove("tb_load_layout_active");c.classList.remove("tb_standalone_lightbox");d.removeClass("tb_current_menu_selected")})}var g=this.$lightbox,h=g.find("#tb_tabs_pre-designed");if(0===h.length)c.classList.remove("tb_load_layout_active"),
c.classList.remove("tb_standalone_lightbox"),d.removeClass("tb_current_menu_selected");else{g[0].classList.add("tb_predesigned_lightbox");this.setStandAlone(t.innerWidth/2,(t.document.documentElement.clientHeight-g.height())/2,!0);var m=h.find(".tb_ui_dropdown_items"),n=function(a){a.each(function(a){0===a%4?this.classList.add("layout-column-break"):this.classList.remove("layout-column-break")})};b.layoutsList?a():(q.showLoader("show"),k.getJSON("https://themify.me/themify-layouts/index.json").done(function(c){for(var d=
{},e=l.createDocumentFragment(),f=l.createDocumentFragment(),p=0,r=c.length;p<r;++p){var q=l.createElement("li"),t=l.createElement("div"),u=l.createElement("div"),y=l.createElement("img"),z=l.createElement("div"),E=l.createElement("div"),H=l.createElement("a"),C=l.createElement("i");q.className="layout_preview_list";q.dataset.category=c[p].category;t.className="layout_preview";t.dataset.id=c[p].id;t.dataset.slug=c[p].slug;u.className="thumbnail";y.src=c[p].thumbnail;y.alt=c[p].title;y.title=c[p].title;
z.className="layout_action";E.className="layout_title";E.textContent=c[p].title;H.className="layout-preview-link themify_lightbox";H.href=c[p].url;H.target="_blank";H.title=themifyBuilder.i18n.preview;C.className="ti-search";H.appendChild(C);z.appendChild(E);z.appendChild(H);u.appendChild(y);t.appendChild(u);t.appendChild(z);q.appendChild(t);e.appendChild(q);if(c[p].category)for(q=String(c[p].category).split(","),t=0,u=q.length;t<u;++t)""!==q[t]&&1!==d[q[t]]&&(y=l.createElement("li"),y.textContent=
q[t],f.appendChild(y),d[q[t]]=1)}m[0].appendChild(f);h[0].getElementsByClassName("tb_layout_lists")[0].appendChild(e);e=f=d=null;g.find(".tb_tab").each(function(){n(k(this).find(".layout_preview_list"))});b.layoutsList=g[0].getElementsByClassName("tb_options_tab_wrapper")[0].cloneNode(!0);a()}).fail(function(a,b,c){q.LiteLightbox.alert(k("#tb_load_layout_error",h).show().text())}).always(function(){q.showLoader("spinhide")}))}})},saveLayout:function(a){a.preventDefault();a.stopPropagation();var b=
{contructor:!0,loadMethod:"html",save:{},data:{save_as_layout:{options:[{id:"layout_img_field",type:"image",label:e.Constructor.label.image_preview},{id:"layout_img_field_id",type:"hidden"},{id:"layout_title_field",type:"text",label:e.Constructor.label.title},{id:"postid",type:"hidden",value:themifyBuilder.post_ID}]}}},c=k(a.currentTarget.closest("ul"));c.addClass("tb_current_menu_selected");q.Lightbox.$lightbox[0].style.display="none";q.Lightbox.open(b,function(){t.document.body.classList.add("tb_standalone_lightbox")},
function(){var b=this.$lightbox;b.find(".builder_save_button").one("click",function(a){a.stopPropagation();a.preventDefault();k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_save_custom_layout",nonce:themifyBuilder.tb_load_nonce,form_data:e.Forms.serialize(b[0])},beforeSend:function(){q.showLoader("show")},success:function(a){"success"===a.status?(q.showLoader(),q.Lightbox.close()):(q.showLoader("error"),alert(a.msg))}})});b.addClass("tb_savead_lightbox");this.setStandAlone(a.clientX,
a.clientY);u.body.one("themify_builder_lightbox_close",function(){b.removeClass("tb_savead_lightbox").find(".builder_save_button").off("click");t.document.body.classList.remove("tb_standalone_lightbox");c.removeClass("tb_current_menu_selected")})})},duplicate:function(a){function b(){c.Revisions.ajax({action:"tb_duplicate_page",tb_is_admin:"visual"!==e.mode},function(a){a&&(t.location.href=k("<div/>").html(a).text())})}a.preventDefault();a.stopPropagation();var c=this;confirm(themifyBuilder.i18n.confirm_on_duplicate_page)&&
e.Utils.saveBuilder(b)},Revisions:{init:function(){e.toolbar.$el.find(".tb_revision").on("click",this.revision.bind(this))},revision:function(a){a.preventDefault();a.stopPropagation();a.currentTarget.classList.contains("tb_save_revision")?this.save():this.load(a)},load:function(a){var b=this,c=k("body",t.document),d=k(a.currentTarget.closest("ul")),e=d.offset();d.addClass("tb_current_menu_selected");q.Lightbox.$lightbox[0].style.display="none";u.body.off("themify_builder_lightbox_close.revisions");
b.ajax({action:"tb_load_revision_lists"},function(a){q.Lightbox.open({contructor:!0,loadMethod:"html",data:{revision:{html:k(a)[0]}}},function(){c.addClass("tb_standalone_lightbox")},function(){this.$lightbox[0].classList.add("tb_revision_lightbox");this.setStandAlone(e.left,e.top,!0);c.on("click.revision",".js-builder-restore-revision-btn",b.restore.bind(b)).on("click.revision",".js-builder-delete-revision-btn",b["delete"].bind(b));u.body.one("themify_builder_lightbox_close.revisions",function(){d.removeClass("tb_current_menu_selected");
c.off(".revision").removeClass("tb_standalone_lightbox");q.Lightbox.$lightbox[0].classList.remove("tb_revision_lightbox");c=null})})})},ajax:function(a,b){a=k.extend({},a,{tb_load_nonce:themifyBuilder.tb_load_nonce,postid:themifyBuilder.post_ID});return k.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:a,beforeSend:function(){q.showLoader("show")},complete:function(){q.showLoader("hide")},success:function(a){k.isFunction(b)&&b.call(this,a)}})},save:function(a){var b=this;q.LiteLightbox.prompt(themifyBuilder.i18n.enterRevComment,
function(c){null!==c&&e.Utils.saveBuilder(function(){b.ajax({action:"tb_save_revision",rev_comment:c},a)},0,!0)})},restore:function(a){a.preventDefault();a.stopPropagation();var b=k(a.currentTarget).data("rev-id"),c=this,d=function(){c.ajax({action:"tb_restore_revision_page",revid:b},function(a){a.builder_data?(e.Forms.reLoad(a.builder_data,themifyBuilder.post_ID),q.Lightbox.close()):(q.showLoader("error"),alert(a.data))})};q.LiteLightbox.confirm(themifyBuilder.i18n.confirmRestoreRev,function(a){"yes"===
a?c.save(d):d()},{buttons:{no:{label:"Don't Save"},yes:{label:"Save"}}})},"delete":function(a){a.preventDefault();a.stopPropagation();if(confirm(themifyBuilder.i18n.confirmDeleteRev)){var b=k(a.currentTarget);a=b.data("rev-id");this.ajax({action:"tb_delete_revision",revid:a},function(a){a.success?b.closest("li").remove():(q.showLoader("error"),alert(a.data))})}}},save:function(a){a.preventDefault();a.stopPropagation();var b=0<k(a.currentTarget).closest(".tb_toolbar_backend_edit").length?k(a.currentTarget).prop("href"):
!1;themifyBuilder.is_gutenberg_editor&&!1!==b?(e.undoManager.reset(),e._backendSwitchFrontend(b)):e.Utils.saveBuilder(function(a,d){"success"!==d?alert(themifyBuilder.i18n.errorSaveBuilder):!1!==b&&("visual"===e.mode?(sessionStorage.setItem("focusBackendEditor",!0),t.location.href=b):(e.undoManager.reset(),e._backendSwitchFrontend(b)))})},libraryItems:{items:[],is_init:null,init:function(){k(l).one("tb_panel_tab_tb_module_panel_library_wrap",this.load.bind(this))},load:function(a,b){var c=this;b=
k(b).find(".tb_module_panel_library_wrap");b.addClass("tb_busy");k.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_get_library_items",nonce:themifyBuilder.tb_load_nonce,part:"all",pid:themifyBuilder.post_ID},success:function(a){c.setData(a);b.removeClass("tb_busy");c.is_init=!0},error:function(){b.removeClass("tb_busy");q.showLoader("error");c.init();e.toolbar.$el.find(".tb_library_item_list").html("<h3>Failed to load Library Items.</h3>")}})},get:function(a,b,c){if(this.items[a]!==
n)c(this.items[a]);else{var d=this;k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_library_item",nonce:themifyBuilder.tb_load_nonce,type:b,id:a},beforeSend:function(a){q.showLoader("show")},success:function(b){q.showLoader("hide");"success"===b.status?(d.items[a]=b.content,c(b.content)):q.showLoader("error")},error:function(){q.showLoader("error")}})}},template:function(a){for(var b="",c=0,d=a.length;c<d;++c){var e="part";-1!==a[c].post_type.indexOf("_rows",5)?
e="row":-1!==a[c].post_type.indexOf("_module",5)&&(e="module");b+='<div class="tb_library_item tb_item_'+e+'" data-type="'+e+'" data-id="'+a[c].id+'">';b+='<div class="tb_library_item_inner"><span>'+a[c].post_title+"</span>";b+='<a href="#" class="remove_item_btn tb_disable_sorting" title="Delete"></a></div></div>'}return b},bindEvents:function(a){"visual"===e.mode?(e.Mixins.Builder.initModuleVisualDrag(".tb_item_module,.tb_item_part"),e.Mixins.Builder.initRowVisualDrag(".tb_item_row")):(e.Mixins.Builder.initRowDraggable(e.toolbar.$el.find(".tb_module_panel_library_wrap").first(),
".tb_item_row"),e.Mixins.Builder.initModuleDraggable(e.toolbar.$el.find(".tb_library_item_list").first(),".tb_item_module,.tb_item_part"));if(e.toolbar.common.btn||"visual"===e.mode&&(e.toolbar.common.is_init||a))e.Mixins.Builder.initRowDraggable(e.toolbar.common.btn.find(".tb_module_panel_library_wrap").first(),".tb_item_row"),e.Mixins.Builder.initModuleDraggable(e.toolbar.common.btn.find(".tb_library_item_list").first(),".tb_item_module,.tb_item_part")},setData:function(a){a='<span class="tb_no_content" style="display:none">No library content found.</span>'+
this.template(a);var b=k(".tb_library_item_list");"visual"===e.mode&&(b=b.add(e.toolbar.$el.find(".tb_library_item_list")));for(var b=b.get(),c=b.length-1;-1<c;--c)b[c].insertAdjacentHTML("afterbegin",a),new SimpleBar(b[c]),b[c].previousElementSibling.getElementsByClassName("current")[0].click();u.body.on("click",".remove_item_btn",this["delete"].bind(this));if("visual"===e.mode)e.toolbar.$el.on("click",".remove_item_btn",this["delete"].bind(this));this.bindEvents()},"delete":function(a){a.preventDefault();
a.stopPropagation();var b=k(a.currentTarget).closest(".tb_library_item"),c=b.data("type");if(confirm(themifyBuilder.i18n[c+"LibraryDeleteConfirm"])){var d=b.data("id");k.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_remove_library_item",nonce:themifyBuilder.tb_load_nonce,id:d},beforeSend:function(a){q.showLoader("show")},success:function(a){q.showLoader("hide");if(a){var f=0<b.closest("#"+e.toolbar.common.btn.prop("id")).length?e.toolbar.$el.find(".tb_item_"+c+'[data-id="'+d+'"]'):
e.toolbar.common.btn.find(".tb_item_"+c+'[data-id="'+d+'"]');b=b.add(f);if("part"===c){b=b.add(k(".themify_builder_content-"+d).closest(".active_module"));for(var f=e.Constructor.layoutPart.data,h=f.length-1;-1<h;--h)if(f[h].post_name===a){e.Constructor.layoutPart.data.splice(h,1);break}}a=b.parent().siblings(".tb_library_types").find(".current");b.remove();a.trigger("click")}else q.showLoader("error")},error:function(){q.showLoader("error")}})}}},preDesignedRows:{is_init:null,rows:{},init:function(){setTimeout(function(){var a=
t.document.createElement("meta"),b=t.document.createDocumentFragment(),c={"//themify.me":"dns-prefetch preconnect","//fonts.googleapis.com":"dns-prefetch","//maps.googleapis.com":"dns-prefetch","https://themify.me/public-api/predesigned-rows/index.json":"prefetch","https://themify.me/themify-layouts/index.json":"prefetch"};a.content="on";a.setAttribute("http-equiv","x-dns-prefetch-control");b.appendChild(a);for(var d in c)a=t.document.createElement("link"),a.setAttribute("crossorigin",!0),a.rel=c[d],
a.href=d,b.appendChild(a);t.document.head.appendChild(b)},7E3);k(l).one("tb_panel_tab_tb_module_panel_rows_wrap",this.load.bind(this))},load:function(a,b){var c=this;b=k(b).find(".tb_predesigned_rows_list");b.addClass("tb_busy");k.getJSON("https://themify.me/public-api/predesigned-rows/index.json").done(function(a){c.setData(a,b)}).fail(function(a,f,g){c.setData({},b);c.is_init=null;q.showLoader("error");e.toolbar.$el.find(".tb_predesigned_rows_container").append("<h3>Failed to load Pre-Designed Rows from server.</h3>");
k(l).one("tb_panel_tab_tb_module_panel_rows_wrap",c.load.bind(c))})},setData:function(a){function b(a){new SimpleBar(a);a=k(a);!0!==B.is_init&&("visual"===e.mode?e.Mixins.Builder.initRowVisualDrag(".predesigned_row"):e.Mixins.Builder.initRowDraggable(e.toolbar.$el.find(".tb_predesigned_rows_container").first(),".predesigned_row"),e.toolbar.common.is_init&&e.Mixins.Builder.initRowDraggable(e.toolbar.common.btn.find(".tb_predesigned_rows_container").first(),".predesigned_row"),B.is_init=!0);new SimpleBar(a.closest(".tb_module_panel_tab").find(".tb_ui_dropdown_items")[0]);
a.closest(".tb_predesigned_rows_list").removeClass("tb_busy").closest(".tb_module_panel_tab").find(".tb_ui_dropdown").css("visibility","visible")}for(var c,d,f=[],g=l.createDocumentFragment(),h=l.createDocumentFragment(),m=0,r=a.length;m<r;++m){c=a[m].category.split(",");var p="";d=0;for(var q=c.length;d<q;++d)-1===f.indexOf(c[d])&&f.push(c[d]),p+=" tb"+u.hash(c[d]);0===(m+1)%4&&(p+=" tb_column_break");d=l.createElement("div");var q=l.createElement("figure"),v=l.createElement("div");c=new Image;var w=
l.createElement("a");d.className="predesigned_row"+p;d.setAttribute("data-slug",a[m].slug);q.className="tb_predesigned_rows_image";v.className="tb_predesigned_rows_title";v.textContent=c.alt=c.title=a[m].title;c.src=a[m].thumbnail===n||""===a[m].thumbnail?"https://placeholdit.imgix.net/~text?txtsize=24&txt="+encodeURI(a[m].title)+"&w=181&h=77":a[m].thumbnail;c.width=500;c.height=300;w.href="#";w.className="add_module_btn tb_disable_sorting";w.dataset.type="predesigned";q.appendChild(c);q.appendChild(w);
d.appendChild(q);d.appendChild(v);h.appendChild(d)}a=null;f.sort();m=0;for(r=f.length;m<r;++m)d=l.createElement("li"),d.setAttribute("data-slug",u.hash(f[m])),d.textContent=f[m],g.appendChild(d);a=k(".tb_module_panel_container .tb_ui_dropdown .tb_ui_dropdown_items");var f=k(".tb_predesigned_rows_container"),B=this;"visual"===e.mode&&(f=f.add(e.toolbar.$el.find(".tb_predesigned_rows_container")),a=a.add(e.toolbar.$el.find(".tb_module_panel_container .tb_ui_dropdown .tb_ui_dropdown_items")));a=a.get();
f=f.get();for(m=a.length-1;-1<m;--m)a[m].appendChild(g.cloneNode(!0)),f[m].appendChild(h.cloneNode(!0)),c=f[m].getElementsByTagName("img"),0<c.length?(c=c[c.length-1],k(c).one("load",function(){b(k(this).closest(".tb_predesigned_rows_container")[0])})):b(f[m]);u.body.on("click",".tb_module_panel_container .tb_ui_dropdown_items li",this.filter.bind(this));if("visual"===e.mode)k("body",t.document).on("click",".tb_module_panel_container .tb_ui_dropdown_items li",this.filter.bind(this))},get:function(a,
b){q.showLoader("show");if(this.rows[a]!==n)"function"===typeof b&&b(this.rows[a]);else{var c=this;k.getJSON("https://themify.me/public-api/predesigned-rows/"+a+".txt").done(function(d){c.rows[a]=d;"function"===typeof b&&b(d)}).fail(function(a,b,c){q.showLoader("error");alert("Failed to fetch row template")})}},filter:function(a){a.preventDefault();a.stopPropagation();a=k(a.currentTarget);var b=a.data("slug"),c=a.closest(".tb_module_panel_tab"),d=c.find(".tb_ui_dropdown_label"),f=c.find(".predesigned_row");
d.text(a.text());c.find(".tb_module_panel_search_text").val("");var g=b?"tb"+b:!1;d.data("active",g);a.addClass("current").siblings().removeClass("current");f.each(function(){!g||this.classList.contains(g)?k(this).show():k(this).hide()}).filter(":visible").each(function(a){0===(a+1)%4?k(this).addClass("tb_column_break"):k(this).removeClass("tb_column_break")});e.Utils.hideOnClick(c.find(".tb_ui_dropdown_items"))}},pageBreakModule:{init:function(){"visual"===e.mode?e.Mixins.Builder.initRowVisualDrag(".tb_page_break_module"):
e.Mixins.Builder.initRowDraggable(e.toolbar.$el.find(".tb_module_panel_modules_wrap").first(),".tb_page_break_module")},countModules:function(){for(var a="visual"===e.mode?l.getElementsByClassName("module-page-break"):l.getElementsByClassName("tb-page-break"),b=a.length-1;-1<b;--b)"visual"===e.mode?a[b].getElementsByClassName("page-break-order")[0].textContent=b+1:a[b].getElementsByClassName("page-break-overlay")[0].textContent="PAGE BREAK - "+(b+1)},get:function(){return[{cols:[{grid_class:"col-full first last",
modules:[{mod_name:"page-break"}]}],column_alignment:"col_align_middle",styling:{custom_css_row:"tb-page-break"}}]}},common:{btn:null,is_init:null,clicked:null,init:function(){var a=l.createElement("div"),b=e.toolbar.$el;a.className="tb_modules_panel_wrap";a.id="tb_module_panel_dropdown";this.btn=k(a);a=null;b=b.add(q.Lightbox.$lightbox);"visual"!==e.mode&&null!==l.querySelector(".edit-post-layout__content")?k(".edit-post-layout__content")[0].appendChild(this.btn[0]):u.body[0].appendChild(this.btn[0]);
var c=this;if("visual"===e.mode)e.toolbar.$el.find(".tb_module_types li").on("click",this.tabs.bind(this));u.body.on("click",".tb_module_types li",this.tabs.bind(this)).on("click",".tb_column_btn_plus",this.show.bind(this));b.on("click",".tb_clear_input",this.clear);e.toolbar.$el.find(".tb_module_panel_search_text").on("keyup",this.search.bind(this));this.btn.on("click",".add_module_btn,.js-tb_module_panel_acc",function(a){a.preventDefault();a.stopPropagation();var b=null,d=this.classList,h=this.dataset.type;
c.clicked||(c.clicked=e.Instances.Builder[e.builderIndex].newRowAvailable(1,!0),b=!0);if("module"===h){var m=c.clicked.hasClass("tb_module_btn_plus")?c.clicked.parent():c.clicked.closest(".module_column").find(".tb_holder").last();e.toolbar.Panel.add_module(a,m)}else if("row"===h)m=c.clicked.hasClass("tb_module_btn_plus")?c.clicked.parent():c.clicked.closest(".module_column").find(".tb_holder").first(),e.toolbar.Panel.click_add_sub_row(a,m);else if(d.contains("js-tb_module_panel_acc"))e.toolbar.toggleAccordion(a);
else if("predesigned"===h||"page_break"===h)m=c.clicked.closest(".module_row"),"page_break"===h?e.toolbar.Panel.click_add_page_break(a,m):e.toolbar.preDesignedRows.get(k(a.currentTarget).closest(".predesigned_row").data("slug"),function(a){e.Mixins.Builder.rowDrop(a,b?m:k("<div>").insertAfter(m),!0)});d.contains("js-tb_module_panel_acc")||c.hide(!0)}).on("keyup",".tb_module_panel_search_text",this.search.bind(this)).on("click",".tb_clear_input",this.clear)},run:function(){var a=e.toolbar.$el.find("#tb_module_panel");
this.btn[0].insertAdjacentHTML("beforeend",a[0].innerHTML);this.btn.find(".tb_module_outer").show();a=this.btn.find(".tb_module_types").closest("div")[0];a.parentNode.parentNode.insertBefore(a,a.parentNode);a.parentNode.removeChild(a.nextElementSibling);a=this.btn.find(".tb_compact_tabs").removeClass("tb_compact_tabs").find(".tb_ui_dropdown_items").removeClass("tb_ui_dropdown_items");this.btn.find(".tb_module_panel_search_text").val("");new SimpleBar(this.btn.find(".tb_module_panel_modules_wrap")[0]);
a.find(".simplebar-scroll-content").length&&(new SimpleBar(a[0])).recalculate();e.Mixins.Builder.initModuleDraggable(this.btn,".tb_module");e.Mixins.Builder.initModuleDraggable(this.btn.find(".tb_rows_grid").first(),".tb_row_grid");e.Mixins.Builder.initRowDraggable(this.btn,".tb_page_break_module");if(e.toolbar.libraryItems.is_init||"visual"===e.mode)e.Mixins.Builder.initModuleDraggable(this.btn.find(".tb_library_item_list").first(),".tb_item_module,.tb_item_part"),e.Mixins.Builder.initRowDraggable(this.btn.find(".tb_library_item_list").first(),
".tb_item_row");(e.toolbar.preDesignedRows.is_init||"visual"===e.mode)&&e.Mixins.Builder.initRowDraggable(this.btn.find(".tb_predesigned_rows_container").first(),".predesigned_row");this.is_init=!0;e.Mixins.Builder.initRowDraggable(this.btn.find(".tb_module_panel_rows_wrap").first(),".tb_page_break_module")},tabs:function(a){a.preventDefault();a.stopPropagation();a=k(a.currentTarget);var b=a.closest("ul"),c=a.data("target"),d=a.closest(".tb_modules_panel_wrap");d.find("."+a.data("hide")).hide();var f=
d.find("."+c),g=d.find(".tb_no_content");0<f.length?(g.hide(),f.show()):g.show();a.closest("li").addClass("current").siblings().removeClass("current");d.find(".tb_module_panel_search_text").val("").focus().trigger("keyup");k(l).triggerHandler("tb_panel_tab_"+c,d);c=b.parent().find(".tb_ui_dropdown_label");0<c.length&&c.text(a.text());e.Utils.hideOnClick(b)},show:function(a,b){a.preventDefault();a.stopPropagation();!e.activeModel&&t.document.body.classList.contains("tb_standalone_lightbox")&&q.Lightbox.close();
null===this.is_init&&this.run();this.clicked&&this.clicked[0].classList.remove("clicked");this.clicked=b?b:k(a.currentTarget);var c=this.clicked.offset(),d=u.body,f=c.left+this.clicked.width()/2,c=c.top,g="visual"!==e.mode?k(".edit-post-layout__content"):!1;!1!==g&&0<g.length&&(c+=g.scrollTop()-70,f=g.width()/2);f-=this.btn.outerWidth()/2;0>f&&(f=0);this.clicked.parents(".sub_column").length?this.btn[0].classList.add("tb_subrow_open"):this.btn[0].classList.remove("tb_subrow_open");this.btn.css({top:c,
left:f}).show();this.resize();"visual"===e.mode&&(d=d.add(k("body",t.document)),"desktop"!==e.activeBreakPoint&&(k("body",t.document).height(l.body.scrollHeight+this.btn.outerHeight(!0)),u.body.css("padding-bottom",180)));d.addClass("tb_panel_dropdown_openend");this.clicked.addClass("clicked");"desktop"===e.activeBreakPoint&&setTimeout(function(){this.btn.find(".tb_module_panel_search_text").focus()}.bind(this),50);this.hide();e.ActionBar.clear();null!==e.activeModel&&(d=q.Lightbox.$lightbox[0].getElementsByClassName("builder_save_button")[0],
d!==n&&d.click())},resize:function(){null!==this.btn&&e.Utils.addViewPortClass(this.btn[0])},hide:function(a){function b(){if(!0===a||!c.btn.is(":hover")){var d=u.body;null!==c.btn&&(c.btn.hide().css("width",""),c.clicked&&c.clicked[0].classList.remove("clicked"),c.clicked=null);k(l).off("click",b);k(t.document).off("click",b);"visual"===e.mode&&(d=d.add(k("body",t.document)),"desktop"!==e.activeBreakPoint&&(k("body",t.document).height(l.body.scrollHeight),u.body.css("padding-bottom","")));d.removeClass("tb_panel_dropdown_openend")}}
var c=this;if(!0===a)b();else{if("visual"===e.mode)k(t.document).on("click",b);k(l).on("click",b)}},search:function(a){var b=k(a.currentTarget);a=b.closest(".tb_modules_panel_wrap");var c=a.find(".tb_module_types .current").first().data("target"),d=!1,f=!1,g=!1,h=!1,b=k.trim(b.val());"tb_module_panel_modules_wrap"===c?(d=a.find(".tb_module_outer"),g=!0):"tb_module_panel_rows_wrap"===c&&e.toolbar.preDesignedRows.is_init?(f=a.find(".tb_ui_dropdown_label").data("active"),d=a.find(".predesigned_row")):
"tb_module_panel_library_wrap"===c&&(d=a.find(".tb_library_item"),f=a.find(".tb_library_types .current").data("target"),h=!0);if(!1!==d){var m=""===b,l=m?!1:new RegExp(b,"i");d.each(function(){if(f&&!this.classList.contains(f))return!0;var a=g?k(this).find(".module_name"):h?k(this).find(".tb_library_item_inner span"):k(this).find(".tb_predesigned_rows_title");m||l.test(a.text())?k(this).show():k(this).hide()});m?a.find(".tb_module_panel_tab_acc_title").show().end().find(".tb_module_panel_tab_acc_content:not(.tb_module_panel_tab_acc_content_module)").show():
a.find(".tb_module_panel_tab_acc_title").hide().end().find(".tb_module_panel_tab_acc_content:not(.tb_module_panel_tab_acc_content_module)").hide()}},clear:function(a){a.preventDefault();a.stopPropagation();a=k(this).parent().children("input").first();0<a.length&&(a.val(""),a[0].hasAttribute("data-search")?a.trigger("keyup").focus():(a.trigger("change"),u.triggerEvent(a[0],"change")))}},help:{init:function(){k(".tb_help_btn",e.toolbar.$el).on("click",this.show.bind(this))},show:function(a){a.preventDefault();
a.stopPropagation();var b=this;q.showLoader("show");return k.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{tb_load_nonce:themifyBuilder.tb_load_nonce,action:"tb_help"},complete:function(){q.showLoader("spinhide")},success:function(a){t.document.body.insertAdjacentHTML("beforeend",a);a=k("#tb_help_lightbox",t.document.body);k(".tb_player_btn",a).on("click",b.play.bind(b));k(".tb_help_menu a",a).on("click",b.tabs.bind(b));k(".tb_close_lightbox",a).on("click",b.close.bind(b));a.slideDown()}})},
play:function(a){a.preventDefault();a.stopPropagation();a=k(a.currentTarget).closest("a");var b=a.prop("href"),c=l.createElement("iframe");c.setAttribute("frameborder","0");c.setAttribute("allow","autoplay; fullscreen");c.setAttribute("src",b+"?rel=0&showinfo=0&autoplay=1&enablejsapi=1&html5=1&version=3");a.replaceWith(c)},tabs:function(a){a.preventDefault();a.stopPropagation();a=k(a.currentTarget);var b=k(".tb_help_video_wrapper",t.document),c=b.find(a.attr("href")),d=c.find(".tb_player_btn");b.find(".tb_player_wrapper").removeClass("current").hide();
c.addClass("current").show();a.closest("li").addClass("current").siblings().removeClass("current");this.stopPlay();0<d.length?d.trigger("click"):this.startPlay()},execute:function(a,b){a.contentWindow.postMessage('{"event":"command","func":"'+b+'","args":""}',"*")},stopPlay:function(){var a=this;k(".tb_player_wrapper",t.document).each(function(){if(!this.classList.contains("current")){var b=k(this).find("iframe");0<b.length&&a.execute(b[0],"pauseVideo")}})},startPlay:function(){var a=k(".tb_player_wrapper.current",
t.document).find("iframe");0<a.length&&this.execute(a[0],"playVideo")},close:function(a,b){a.preventDefault();a.stopPropagation();k(a.currentTarget).closest("#tb_help_lightbox").slideUp("normal",function(){k(this).next(".tb_overlay").remove();k(this).empty().remove();b&&b()})}},breakpointSwitcher:function(a){a.preventDefault();a.stopPropagation();var b=this,c="desktop",d=a.currentTarget,f=k("body",t.document),g="visual"===e.mode&&e.iframe[0].classList.contains("tb_resizing_start"),h=e.activeBreakPoint,
m=function(){b.responsive_grids(c,h);var a=function(){e.Utils.setCompactMode(l.getElementsByClassName("module_column"));e.toolbar.el.getElementsByClassName("tb_compact_switcher")[0].getElementsByTagName("i")[0].className=d.getElementsByTagName("i")[0].className;f.removeClass("tb_start_animate").toggleClass("tb_responsive_mode","desktop"!==c).removeClass("builder-breakpoint-"+h).addClass("builder-breakpoint-"+c);u.body.triggerHandler("themify_builder_change_mode",[h,c]);"visual"===e.mode&&(e.iframe[0].style.willChange=
"",setTimeout(function(){t.document.body.style.height="desktop"!==c?l.body.scrollHeight+"px":"";!g&&e.scrollTo&&(k(y).add(t.document).scrollTop(e.scrollTo.offset().top),e.scrollTo=!1)},150))};"visual"===e.mode?e.Utils._onResize(!0,function(){b.iframeScroll("desktop"!==c);"desktop"!==h&&"desktop"!==c||e.Mixins.Builder.updateModuleSort(null,"desktop"===c?"enable":"disable");setTimeout(a,g?1:100)}):a()};d.classList.contains("breakpoint-tablet")?c="tablet":d.classList.contains("breakpoint-tablet_landscape")?
c="tablet_landscape":d.classList.contains("breakpoint-mobile")&&(c="mobile");var r="desktop"!==c?e.Utils.getBPWidth(c)-1:"";if(h===c&&a.originalEvent!==n&&(r?r+"px":r)===e.iframe[0].style.width)return!1;e.ActionBar.clear();if("visual"===e.mode){if(!g&&!e.isPreview){a=e.Instances.Builder[0].el.children;var p=[];for(var x=y.innerHeight,v=function(a){if(null!==a&&a!==n){var b=a.getBoundingClientRect();if(0>b.bottom&&0>b.top||b.top>x)a.style.display="none",p.push(a)}},w=a.length-1;-1<w;--w)v(a[w]);v(l.getElementById("headerwrap"));
v(l.getElementById("footerwrap"));a=x=null}f=f.add(u.body)}e.activeBreakPoint=c;f.addClass("tb_start_animate");if("visual"===e.mode){e.iframe[0].style.willChange="width";a=t.document.getElementsByClassName("tb_toolbar_zoom_menu")[0];a.classList.remove("tb_toolbar_zoom_active");a.getElementsByClassName("tb_toolbar_zoom_menu_toggle")[0].dataset.zoom=100;"tablet_landscape"===c&&q.Lightbox.dockMode.get()&&(a=k(".tb_workspace_container",t.document).width(),a<r&&(r=a));if(e.isPreview&&(a={tablet_landscape:[1024,
768],tablet:[768,1024],mobile:[375,667]},a[c]!==n)){r=a[c][0];var B=a[c][1]}e.iframe[0].parentNode.classList.remove("tb_zoom_bg");g?m():(t.document.body.offsetHeight,e.iframe.one(e.Utils.transitionPrefix(),function(){if(!e.isPreview){for(var a=p.length-1;-1<a;--a)p[a].style.display="";p=null}setTimeout(m,10)}),e.iframe[0].style.width=r?r+"px":r,e.iframe[0].style.height=e.isPreview?B?B+"px":B:"")}else m()},iframeScroll:function(a){var b=k(t.document);b.off("scroll.themifybuilderresponsive");if(a)b.on("scroll.themifybuilderresponsive",
function(){y.scrollTo(0,k(this).scrollTop())})},responsive_grids:function(a,b){for(var c=l.querySelectorAll(".row_inner,.subrow_inner"),d="desktop"===a,e=d||"desktop"===b,g=c.length-1;-1<g;--g){var h=c[g].getAttribute("data-basecol");if(null!==h){var m=c[g].children,r=c[g].dataset["col_"+a],p=m[0],q=m[m.length-1];if(!d){if("desktop"!==b){c[g].classList.remove("tb_3col");var t=c[g].getAttribute("data-col_"+b);t&&c[g].classList.remove(k.trim(t.replace("tb_3col","").replace("mobile","column").replace("tablet",
"column")))}if(r&&"-auto"!==r){if(r=c[g].getAttribute("data-col_"+a))for(c[g].classList.add("tb_grid_classes"),c[g].classList.add("col-count-"+h),r=r.split(" "),h=0,t=r.length;h<t;++h)c[g].classList.add(k.trim(r[h].replace("mobile","column").replace("tablet","column")))}else c[g].classList.remove("tb_grid_classes"),c[g].classList.remove("col-count-"+h)}if(e)for(h=0,r=m.length;h<r;++h)t=k(m[h]).data("w"),t!==n&&(m[h].style.width=d?t+"%":"");"rtl"===c[g].getAttribute("data-"+a+"_dir")?(p.classList.remove("first"),
p.classList.add("last"),q.classList.remove("last"),q.classList.add("first"),c[g].classList.add("direction-rtl")):(p.classList.remove("last"),p.classList.add("first"),q.classList.remove("first"),q.classList.add("last"),c[g].classList.remove("direction-rtl"))}}},Panel:{el:null,init:function(){this.el=e.toolbar.$el.find(".tb_toolbar_add_modules_wrap");this.el.on("click",".add_module_btn",this.initEvents.bind(this));this.compactToolbar();"visual"===e.mode&&q.Lightbox.dockMode.setDoc()},initEvents:function(a){a.preventDefault();
a.stopPropagation();var b=a.currentTarget.dataset.type;"module"===b?this.add_module(a):"row"===b?this.click_add_sub_row(a):"page_break"===b?this.click_add_page_break(a):"predesigned"===b&&e.toolbar.preDesignedRows.get(a.currentTarget.closest(".predesigned_row").dataset.slug,function(a){var b=e.Instances.Builder[e.builderIndex].$el.find(".module_row").last();e.Mixins.Builder.rowDrop(a,k("<div>").insertAfter(b),!0)})},setFocus:function(){e.toolbar.el.getElementsByClassName("tb_module_panel_search_text")[0].focus()},
add_module:function(a,b){a.preventDefault();a.stopPropagation();b||(b=e.Instances.Builder[e.builderIndex].newRowAvailable(1,!0).find(".tb_holder").first());e.Mixins.Builder.moduleDrop(k(a.currentTarget).closest(".tb_module"),b)},click_add_sub_row:function(a,b){a.preventDefault();a.stopPropagation();var c=b?!0:!1;b=b||e.Instances.Builder[e.builderIndex].$el.find(".module_row").last();var d=k(a.currentTarget).closest(".tb_row_grid").data("slug");c?b.hasClass("tb_module_front")?e.Mixins.Builder.subRowDrop(d,
k("<div>").insertAfter(b)):e.Mixins.Builder.subRowDrop(d,k("<div>").appendTo(b)):e.Mixins.Builder.rowDrop(e.Utils.grid(d),k("<div>").insertAfter(b),!0,!0)},click_add_page_break:function(a,b){a.preventDefault();a.stopPropagation();b=b||e.Instances.Builder[e.builderIndex].$el.find(".module_row").last();e.Mixins.Builder.rowDrop(e.toolbar.pageBreakModule.get(),k("<div>").insertAfter(b),!0);e.toolbar.pageBreakModule.countModules()},compactToolbar:function(){function a(){e.toolbar.$el.outerWidth()<b?t.document.body.classList.add("tb_compact_toolbar"):
t.document.body.classList.remove("tb_compact_toolbar");e.toolbar.common.resize()}var b="visual"===e.mode?850:750;k(t).on("tfsmartresize.compact",a);if("visual"===e.mode)t.jQuery("body").one("themify_builder_ready",a);else a()}},toggleFavoriteModule:function(){var a=k(this),b=a.closest(".tb_module_outer"),c=a.parent().data("module-slug");k.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_module_favorite",module_name:c,module_state:+!b.hasClass("favorited")},beforeSend:function(a){function d(a,
b){function f(){a.removeAttr("style");if(b){var f=0<a.closest("#tb_module_panel_dropdown").length?e.toolbar.$el:k("#tb_module_panel_dropdown");d(f.find(".tb-module-type-"+c).closest(".tb_module_outer"),!1)}}if(a.is(":visible"))a.css({opacity:0,transform:"scale(0.5)"}).one(g,function(){a.toggleClass("favorited").css({opacity:1,transform:"scale(1)"}).one(g,f)});else a.toggleClass("favorited"),f()}var g=e.Utils.transitionPrefix();d(b,!0)}})},zoom:function(a){function b(){e.Utils._onResize(!0)}a.preventDefault();
if("desktop"!==e.activeBreakPoint)return!0;var c=k(a.currentTarget);a=c.data("zoom");var d=k(".tb_iframe",t.document),f=c.closest(".tb_toolbar_zoom_menu");c.hasClass("tb_toolbar_zoom_menu_toggle")?(a="100"==a?50:100,c.data("zoom",a),c=c.next("ul").find('[data-zoom="'+a+'"]')):f.find(".tb_toolbar_zoom_menu_toggle").data("zoom",a);d.removeClass("tb_zooming_50 tb_zooming_75");c.parent().addClass("selected-zoom-size").siblings().removeClass("selected-zoom-size");"50"==a||"75"==a?(c="50"==a?2:1.25,d.addClass("tb_zooming_"+
a).one(e.Utils.transitionPrefix(),b).parent().addClass("tb_zoom_bg").css("height",Math.max(t.innerHeight*c,600)),f.addClass("tb_toolbar_zoom_active"),e.zoomMeta.isActive=!0,e.zoomMeta.size=a,u.body.addClass("tb_zoom_only")):(d.addClass("tb_zooming_"+a).one(e.Utils.transitionPrefix(),b).parent().css("height",""),f.removeClass("tb_toolbar_zoom_active"),e.zoomMeta.isActive=!1,u.body.removeClass("tb_zoom_only"))},previewBuilder:function(a){a.preventDefault();k(a.currentTarget).toggleClass("tb_toolbar_preview_active");
e.isPreview=!e.isPreview;e.isPreview||(e.iframe[0].style.height="");u.body.toggleClass("tb_preview_only themify_builder_active");k("body",t.document).toggleClass("tb_preview_parent");if(e.isPreview){a=l.getElementsByClassName("row_inner");for(var b=a.length-1;-1<b;--b)if(a[b].classList.contains("col-count-1")&&0===a[b].getElementsByClassName("active_module").length){var c=a[b].getElementsByClassName("module_column")[0];if((c=e.Models.Registry.lookup(c.getAttribute("data-cid")))&&0===Object.keys(c.get("styling")).length){var c=
a[b].closest(".module_row"),d=e.Models.Registry.lookup(c.getAttribute("data-cid"));d&&0===Object.keys(d.get("styling")).length&&c.classList.add("tb_hide")}}}else k(".tb_hide.module_row").removeClass("tb_hide");"visual"===e.mode&&!t.document.body.classList.contains("tb_panel_minimized")&&q.Lightbox.dockMode.get()&&e.Utils._onResize(!0);e.vent.trigger("dom:preview")},toggleAccordion:function(a){k(a.currentTarget).closest(".tb_module_panel_tab_acc_component").toggleClass("tb_collapsed")},closeFloat:function(a){a&&
(a.preventDefault(),a.stopPropagation(),localStorage.setItem("tb_panel_closed",!0));t.document.body.classList.add("tb_panel_closed")},openFloat:function(a){a&&(a.preventDefault(),a.stopPropagation(),localStorage.removeItem("tb_panel_closed"));t.document.body.classList.remove("tb_panel_closed");e.toolbar.common.hide(!0);e.toolbar.Panel.setFocus()}});e.Forms={Data:{},Validators:{},parseSettings:function(a,b){var c="",d=a.classList;if(!d.contains("tb_row_js_wrapper")){var f=a.closest(".tb_field");if(null!==
f&&!f.classList.contains("_tb_hide_binding")&&("none"!==f.style.display||-1===f.className.indexOf("tb_group_element_"))&&(f=f.parentNode,f.classList.contains("tb_multi_fields")&&f.parentNode.classList.contains("_tb_hide_binding")))return!1}f=b?a.dataset.inputId:a.id;if(d.contains("tb_lb_wp_editor"))tinyMCE!==n?(c=a.id,d=tinyMCE.get(c),c=null!==d?!1===d.hidden?d.getContent():switchEditors.wpautop(tinymce.DOM.get(c).value):a.value):c=a.value;else if(d.contains("themify-checkbox")){c=[];var g=a.getElementsByClassName("tb-checkbox");
var h=d.contains("tb_switcher");for(var d=0,m=g.length;d<m;++d)!0!==h&&!0!==g[d].checked||""===g[d].value||c.push(g[d].value);c=0<c.length?c.join("|"):h?"":!1}else if(d.contains("themify-layout-icon"))c=a.getElementsByClassName("selected")[0],c=c!==n?c.id:"";else if(d.contains("tb_search_input"))c=a.getAttribute("data-value"),d.contains("query_category_single")&&(d=a.closest(".tb_input").getElementsByClassName("query_category_multiple")[0],d=d===n?"":d.value.trim(),c=""!==d?d+"|"+(-1!==d.indexOf(",")?
"multiple":"single"):c+"|single");else if(d.contains("tb_radio_input_container")){g=a.getElementsByTagName("input");h=null;d=0;for(m=g.length;d<m;++d)if(!0===g[d].checked){h=g[d];break}null===h||"desktop"!==e.activeBreakPoint&&h.classList.contains("responsive_disable")||(c=h.value)}else if(d.contains("tb_search_container"))c=a.previousElementSibling.dataset.value;else if(d.contains("tb_row_js_wrapper"))for(c=[],g=a.getElementsByClassName("tb_repeatable_field_content"),d=0,m=g.length;d<m;++d){h=g[d].getElementsByClassName("tb_lb_option_child");
c[d]={};for(var l=0,p=h.length;l<p;++l){var q=this.parseSettings(h[l],!0);q&&(c[d][q.id]=q.v)}}else d.contains("module-widget-form-container")?c=k(a).find(":input").themifySerializeObject():d.contains("tb_widget_select")?(c=a.getElementsByClassName("selected")[0],c=c!==n?c.dataset.value:""):(c=a.value,""!==c&&(d=a.getAttribute("data-opacity"),null!==d&&""!==d&&1!=d&&"0.99"!=d&&(c+="_"+d)));if(c===n||null===c)c="";return{id:f,v:c}},serialize:function(a,b,c){c=c||!1;var d={};a="object"===typeof a?a:
t.document.getElementById(a);if(null!==a){a=a.getElementsByClassName(c?"tb_lb_option_child":"tb_lb_option");for(var e=a.length-1;-1<e;--e){var g=this.parseSettings(a[e],c);!1===g||!0!==b&&""===g.v||(d[g.id]=g.v)}}return d},LayoutPart:{cache:[],undo:null,old_id:null,isReload:null,id:null,init:!1,html:null,el:null,options:null,isSaved:null,scrollTo:function(a,b){e.scrollTo=e.Forms.LayoutPart.el},edit:function(a){function b(a){l.getElementById("themify_builder_content-"+themifyBuilder.post_ID).insertAdjacentHTML("afterbegin",
'<div class="tb_overlay"></div>');f.addClass("tb_active_layout_part").closest(".row_inner").find(".active_module").each(function(){this.classList.contains("tb_active_layout_part")||this.insertAdjacentHTML("afterbegin",'<div class="tb_overlay"></div>')});var b="themify_builder_content-"+d.id;d.html=f[0].innerHTML;themifyBuilder.post_ID=d.id;f[0].insertAdjacentHTML("afterbegin",h.replace("#postID#",d.id));k("."+b).each(function(){k(this).closest(".active_module").find(".themify-builder-generated-css").first().prop("disabled",
!0)});f.removeClass("active_module module").closest(".tb_holder").removeClass("tb_holder").addClass("tb_layout_part_parent").closest(".module_row").addClass("tb_active_layout_part_row");g.attr("id",b).removeClass("not_editable_builder").empty();d.el=f;e.id=d.id;var c=[];e.builderIndex=1;e.Instances.Builder[e.builderIndex]=new e.Views.Builder({el:"#"+b,collection:new e.Collections.Rows(a),type:e.mode});a=e.Instances.Builder[e.builderIndex].render().el.querySelectorAll("[data-cid]");for(var b=0,m=a.length;b<
m;++b)c[a[b].dataset.cid]=1;a=null;e.bootstrap(c,function(){c=e.activeModel=null;e.Utils.loadContentJs(g);e.id=!1;u.body.on("themify_builder_change_mode",d.scrollTo);e.hasChanged=null;e.Instances.Builder[e.builderIndex].$el.triggerHandler("tb_init");f.find(".tb_toolbar_save").click(d.save.bind(d));f.find(".tb_toolbar_close_btn").click(d.close.bind(d));f.find(".tb_load_layout").click(e.Views.Toolbar.prototype.loadLayout);f.find(".tb_toolbar_import ul a").click(e.Views.Toolbar.prototype["import"]);
q.showLoader("hide");d.init=!1;d.undo=e.undoManager.stack;e.undoManager.btnUndo=f[0].getElementsByClassName("tb_undo_btn")[0];e.undoManager.btnRedo=f[0].getElementsByClassName("tb_redo_btn")[0];e.undoManager.reset();f.find(".tb_undo_redo").click(function(a){e.undoManager.do_change(a)});"desktop"!==e.activeBreakPoint&&e.Mixins.Builder.updateModuleSort(null,"disable");e.ActionBar.clear();"visual"===e.mode&&setTimeout(function(){e.Utils.checkAllimageSize()},500)})}q.showLoader("show");l.body.classList.add("tb_layout_part_edit");
if(null!==e.activeModel){var c=q.Lightbox.$lightbox[0].getElementsByClassName("builder_save_button")[0];c!==n&&c.click();c=null}t.document.body.classList.add("tb_layout_part_edit");var d=this,f=k(a).closest(".active_module"),g=f.find(".themify_builder_content"),h=q.templateCache.get("tmpl-small_toolbar");this.id=g.data("postid");this.old_id=themifyBuilder.post_ID;this.init=!0;this.isSaved=null;this.cache[this.id]!==n?b(this.cache[this.id]):k.ajax({type:"POST",dataType:"json",url:themifyBuilder.ajaxurl,
data:{action:"tb_layout_part_swap",nonce:themifyBuilder.tb_load_nonce,id:d.id},success:function(a){a&&(d.cache[d.id]=a,b(a))}})},close:function(a){function b(){c.el.removeClass("tb_active_layout_part").addClass("active_module module").closest(".tb_layout_part_parent").addClass("tb_holder").removeClass("tb_layout_part_parent").closest(".module_row").removeClass("tb_active_layout_part_row");k("#tb_small_toolbar",c.el).remove();for(var a=d[0].querySelectorAll("[data-cid]"),b=[],f=a.length-1;-1<f;--f){var r=
a[f].dataset.cid,p=e.Models.Registry.lookup(r);p&&(p.destroy(),e.Models.Registry.remove(r),b.push(r))}a=e.undoManager.stack;for(f=a.length-1;-1<f;--f)if("save"===a[f].type&&a[f].data!==n&&a[f].data.styles!==n&&-1!==b.indexOf(a[f].cid)){var r=a[f].data.styles,q;for(q in r){var p=ThemifyStyles.getSheet(q),v;for(v in r[q])p.deleteRule(v)}}d.removeAttr("id").addClass("not_editable_builder");l.body.classList.remove("tb_layout_part_edit");t.document.body.classList.remove("tb_layout_part_edit");k(".tb_overlay").remove();
e.undoManager.stack=c.undo;e.undoManager.index=c.undo.length-1;e.undoManager.btnUndo=e.toolbar.el.getElementsByClassName("tb_undo_btn")[0];e.undoManager.btnRedo=e.toolbar.el.getElementsByClassName("tb_redo_btn")[0];themifyBuilder.post_ID=c.old_id;c.undo=c.isSaved=c.old_id=c.html=c.id=c.options=c.isReload=c.el=e.Instances.Builder[e.builderIndex]=null;delete e.Instances.Builder[e.builderIndex];e.builderIndex=0;u.body.off("themify_builder_change_mode",c.scrollTo);e.Mixins.Builder.updateModuleSort();
e.undoManager.updateUndoBtns();"desktop"!==e.activeBreakPoint&&e.Mixins.Builder.updateModuleSort(null,"disable");e.ActionBar.clear();e.Instances.Builder[e.builderIndex].lastRowAddBtn()}a.preventDefault();a.stopPropagation();if(!e.hasChanged&&!e.undoManager.hasUndo()||null!==this.isSaved||confirm(themifyBuilder.i18n.layoutEditConfirm)){null!==e.activeModel&&q.Lightbox.close();var c=this,d=this.el.find(".themify_builder_content");if(null!==this.options){q.showLoader("show");a=e.Models.Registry.lookup(this.el.data("cid"));
this.cache[this.id]=this.options;k(l).ajaxComplete(function h(a,f,l){if(-1!==l.data.indexOf("tb_load_module_partial",3))if(k(this).off("ajaxComplete",h),200===f.status){c.el=e.liveStylingInstance.$liveStyledElmt;d=c.el.children(".themify_builder_content");var m=d[0].innerHTML,n="";c.el.children(".themify-builder-generated-css").each(function(){n+=this.outerHTML});k(".themify_builder_content-"+c.id).each(function(){var a=k(this).closest(".module");a.children("link.themify-builder-generated-css").remove();
""!==n&&a[0].insertAdjacentHTML("afterbegin",n);this.innerHTML=m;e.Utils.loadContentJs(k(this))});n=m=null;q.showLoader("hide");b()}else q.showLoader("error")});var f=k.extend(!0,{},a.get("mod_settings"));f.unsetKey=!0;a.trigger("custom:preview:refresh",f);f=null}else this.el[0].innerHTML=c.html,b(),k(".themify_builder_content-"+c.id).each(function(){k(this).closest(".active_module").find(".themify-builder-generated-css").removeAttr("disabled")}),e.Utils.loadContentJs(d)}},save:function(a,b){a.preventDefault();
a.stopPropagation();if(null!==e.activeModel){var c=q.Lightbox.$lightbox[0].getElementsByClassName("builder_save_button")[0];c!==n&&c.click();c=null}if(e.undoManager.hasUndo()||null!==this.isReload||b){var d=this;this.old_settings=this.html=null;q.showLoader("show");e.Utils.saveBuilder(function(c){c.success&&(d.options=c.data.builder_data,e.hasChanged=null,d.isSaved=!0,b&&d.close(a))},1)}else q.showLoader("show"),setTimeout(function(){q.showLoader("hide")},100)}},reLoad:function(a,b,c){function d(){"visual"===
e.mode&&(e.liveStylingInstance.setCss(e.Mixins.Builder.toJSON(e.Instances.Builder[g].el)),e.Utils.loadContentJs(e.Instances.Builder[g].$el),e.id=!1);e.Instances.Builder[e.builderIndex].$el.triggerHandler("tb_init");q.showLoader("hide");"visual"===e.mode&&"desktop"!==e.activeBreakPoint&&(k("body",t.document).height(l.body.scrollHeight),setTimeout(function(){k("body",t.document).height(l.body.scrollHeight)},2E3));c&&c();e.hasChanged=!0;"visual"===e.mode&&setTimeout(function(){e.Utils.checkAllimageSize()},
500)}var f=null!==e.Forms.LayoutPart.id,g=e.builderIndex,h=null,m="";e.Mixins.Builder.updateModuleSort(null,"destroy");f||(e.Models.Registry.destroy(),e.Instances.Builder={});"visual"===e.mode?(m="#themify_builder_content-"+b,e.id=b,f||(e.liveStylingInstance.reset(),e.editing=!1,u.body.addClass("sidebar-none full_width"),k("#sidebar,.page-title").remove())):m="#tb_row_wrapper";if(f){b=e.Instances.Builder[g].el.querySelectorAll("[data-cid]");e.Forms.LayoutPart.isReload=!0;for(var n=0,p=b.length;n<
p;++n){var x=b[n].dataset.cid,v=e.Models.Registry.lookup(x);v&&(v.destroy(),e.Models.Registry.remove(x))}b=null;e.Instances.Builder[g].$el.empty()}e.Instances.Builder[g]=new e.Views.Builder({el:m,collection:new e.Collections.Rows(a),type:e.mode});e.Instances.Builder[g].render();e.undoManager.reset();if(f){h=[];b=e.Instances.Builder[g].el.querySelectorAll("[data-cid]");n=0;for(p=b.length;n<p;++n)h[b[n].dataset.cid]=1;b=null}"visual"===e.mode?e.bootstrap(h,d):d()},isValidate:function(a){var b=a.getElementsByClassName("tb_must_validate"),
c=b.length;if(0===c)return!0;for(var d=!0,c=c-1;-1<c;--c){var f=b[c].getElementsByClassName("tb_lb_option")[0],g=b[c].getAttribute("data-validation"),h=f.value;if(e.Forms.get_validator(g)(h))for(f.classList.remove("tb_field_error"),f=b[c].getElementsByClassName("tb_field_error_msg"),g=f.length-1;-1<g;--g)f[g].parentNode.removeChild(f[g]);else f.classList.contains("tb_field_error")||(d=l.createElement("span"),d.className="tb_field_error_msg",d.textContent=b[c].getAttribute("data-error-msg"),f.classList.add("tb_field_error"),
f="SELECT"===f.tagName?f.parentNode:f,f.parentNode.insertBefore(d,f.nextSibling)),d=!1}!1===d&&(a=q.Lightbox.$lightbox.find('[href="#'+a.getAttribute("id")+'"]')[0],a.parentNode.classList.contains("current")||a.click());return d}};e.Utils={onResizeEvents:[],gridClass:"col-full col2-1 col3-1 col4-1 col5-1 col6-1 col4-2 col4-3 col3-2".split(" "),_onResize:function(a,b){var c=k._data(y,"events").resize;k(t).off("tfsmartresize.tb_visual").on("tfsmartresize.tb_visual",function(a){""===tbLocalScript.fullwidth_support&&
(k(y).triggerHandler("tfsmartresize.tbfullwidth"),k(y).triggerHandler("tfsmartresize.tfVideo"))}).off("tfsmartresize.zoom").on("tfsmartresize.zoom",function(){if(e.zoomMeta.isActive){var a="50"==e.zoomMeta.size?2:1.25;k(".tb_workspace_container",t.document).css("height",Math.max(t.innerHeight*a,600))}});if(c!==n)for(var d=0,f=c.length;d<f;++d)c[d].handler!==n&&this.onResizeEvents.push(c[d].handler);k(y).off("resize");if(a){c=k.Event("resize",{type:"resize",isTrigger:!1});d=0;for(f=this.onResizeEvents.length;d<
f;++d)try{this.onResizeEvents[d].apply(y,[c,k])}catch(g){}"function"===typeof b&&b()}},_addNewColumn:function(a,b){var c=e.Views.init_column({grid_class:a.newclass,component_name:a.component});b.appendChild(c.view.render().el)},filterClass:function(a){a=a.split(" ");for(var b=[],c=a.length-1;-1<c;--c)-1!==this.gridClass.indexOf(a[c])&&b.push(a[c]);return b.join(" ")},_getRowSettings:function(a,b){var c={};b=b||"row";var d={};var f,g=e.Models.Registry.lookup(a.getAttribute("data-cid"));if(g){var h=
a.getElementsByClassName(b+"_inner")[0];d=h.children;for(var k=this,l=function(a){a=a.children;for(var b=0,c=a.length;b<c;++b){a[b].classList.contains("active_module")||l(a[b]);var d=e.Models.Registry.lookup(a[b].getAttribute("data-cid"));d&&(f=d.get("mod_settings"),d=u.push({mod_name:d.get("mod_name"),element_id:d.get("element_id")})-1,f&&0<Object.keys(f).length&&(delete f.cid,u[d].mod_settings=f),a[b].classList.contains("module_subrow")&&(u[d]=k._getRowSettings(a[b],"subrow")))}},p=0,q=d.length;p<
q;++p){var t={};var w=e.Models.Registry.lookup(d[p].getAttribute("data-cid"));if(w){t=d[p].getElementsByClassName("tb_holder")[0];var u=[];t!==n&&l(t);c[p]={element_id:w.get("element_id"),grid_class:this.filterClass(d[p].className)};u&&0<u.length&&(c[p].modules=u);t=parseFloat(d[p].style.width);0<t&&!isNaN(t)&&(c[p].grid_width=t);(f=w.get("styling"))&&0<Object.keys(f).length&&(delete f.cid,c[p].styling=f)}}d={element_id:g.get("element_id"),cols:c,column_alignment:g.get("column_alignment"),gutter:g.get("gutter"),
column_h:g.get("column_h")};q={gutter:"gutter-default",column_alignment:I?"col_align_middle":"col_align_top"};c={desktop_dir:"ltr",tablet_dir:"ltr",tablet_landscape_dir:"ltr",mobile_dir:"ltr",col_tablet_landscape:"-auto",col_tablet:"-auto",col_mobile:"-auto"};for(p in d)""!==d[p]&&null!==d[p]&&d[p]!==q[p]||delete d[p];f=g.get("styling");for(p in c)g=h.getAttribute("data-"+p),null!==g&&""!==g&&g!==c[p]&&(d[p]=g.trim());f&&0<Object.keys(f).length&&(delete f.cid,d.styling=f)}return d},selectedGridMenu:function(a,
b){var c=e.Constructor.breakpointsReverse,d=e.Models.Registry.lookup(a.getAttribute("data-cid")),f=a.getElementsByClassName(b+"_inner")[0],g=d.get("gutter"),h=d.get("column_alignment"),k=d.get("column_h");var l=d.get("desktop_dir");var p="row"===b?d.get("styling"):null,q=[],t={};var w=f.children;for(var u=0,y=w.length;u<y;++u)w[u].className=w[u].className.replace(/first|last/ig,""),1!==y&&(0===u?w[u].className+="rtl"===l?" last":" first":u===y-1&&(w[u].className+="rtl"===l?" first":" last"));w=w.length;
q.push("col-count-"+w);t["data-basecol"]=w;null!==p&&p.row_anchor!==n&&""!==p.row_anchor&&(a.getElementsByClassName("tb_row_anchor")[0].textContent=p.row_anchor);"gutter-default"!==g&&q.push(g);k&&q.push("col_auto_height");"col_align_top"===h&&!0!==I||q.push(h);"ltr"!==l&&q.push("direction-rtl");for(g=c.length-1;-1<g;--g)l=d.get(c[g]+"_dir"),"ltr"!==l&&""!==l&&(t["data-"+c[g]+"_dir"]=l),"desktop"!==c[g]&&(w=d.get("col_"+c[g]),"-auto"!==w&&""!==w&&w!==n&&(t["data-col_"+c[g]]=w));for(u=q.length-1;-1<
u;--u)q[u]&&f.classList.add(q[u]);for(u in t)f.setAttribute(u,t[u])},clear:function(a,b,c){b=b?[]:{};for(var d in a)if(Array.isArray(a[d])){var e=this.clear(a[d],!0,1);0<e.length&&(b[d]=e)}else if("object"===typeof a[d])e=this.clear(a[d],!1,1),k.isEmptyObject(e)||(b[d]=e);else if(null!==a[d]&&a[d]!==n&&""!==a[d]&&""!==d&&"pixels"!==a[d]&&"default"!==a[d]&&"|"!==a[d]&&!("show"===a[d]&&0===d.indexOf("visibility_")||"unstick_when_condition"===d&&"hits"===a[d]||("stick_at_pos_val_unit"===d||"unstick_when_pos_val_unit"===
d)&&"px"===a[d]))if("custom_parallax_scroll_speed"!==d||a[d]&&"0"!=a[d])if("unstick_when_element"===d&&"builder_end"===a[d]||"stick_at_check"===d&&"stick_at_check"!==a[d])delete b.unstick_when_el_row_id,delete b.unstick_when_el_mod_id,delete b.unstick_when_condition,delete a.unstick_when_el_row_id,delete a.unstick_when_el_mod_id,delete a.unstick_when_condition,delete b.unstick_when_pos,delete b.unstick_when_pos_val,delete b.unstick_when_element,delete b.unstick_when_pos_val_unit,delete a.unstick_when_pos,
delete a.unstick_when_pos_val,delete a.unstick_when_pos_val_unit,delete a.unstick_when_element,"stick_at_check"===d&&(delete a[d],delete b[d],delete a.stick_at_position,delete b.stick_at_position);else if("background_gradient-css"!==d&&"cover_gradient-css"!==d&&"cover_gradient_hover-css"!==d&&"background_image-type_image"!==d&&"custom_parallax_scroll_reverse_reverse"!==d&&"|single"!==a[d]&&"|multiple"!==a[d]&&("custom_parallax_scroll_reverse"!==d&&"custom_parallax_scroll_fade"!==d&&"visibility_all"!==
d&&"sticky_visibility"!==d||a[d])){if(1===c){var g=[];if("image"!==a[d]||"background_type"!==d&&"b_t_h"!==d&&"background_image-type"!==d&&"b_i_h-type"!==d)if("px"===a[d]&&-1!==d.indexOf("_unit",2))e=d.replace("_unit",""),a[e]||g.push(d);else if(0===d.indexOf("checkbox_")&&-1!==d.indexOf("_apply_all",6)){a[d]?b[d]=a[d]:g.push(d);e=d.replace("_apply_all","").replace("checkbox_","");for(var h=["top","left","right","bottom"],m=3;-1<m;--m){var l=e+"_"+h[m]+"_unit";"px"===a[l]?g.push(l):a[l]!==n&&null!==
a[l]&&""!==a[l]&&(b[l]=a[l])}}else-1!==d.indexOf("gradient",3)?("180"==a[d]||"linear"===a[d]||a[d]===k.ThemifyGradient["default"]||!1===a[d]&&-1!==d.indexOf("-circle-radial",3))&&g.push(d):("background_zoom"===d&&""===a[d]||"solid"===a[d]||!1===a[d]&&(-1!==d.indexOf("_user_role",3)||-1!==d.indexOf("_appearance",3)))&&g.push(d);else g.push(d);if(0<g.length){for(m=g.length-1;-1<m;--m)delete b[g[m]],delete a[g[m]];g.length=0;continue}}b[d]=a[d]}else delete a[d],delete b[d];else delete b.custom_parallax_scroll_reverse,
delete b.custom_parallax_scroll_fade,delete b[d],delete a.custom_parallax_scroll_reverse,delete a.custom_parallax_scroll_fade,delete a[d];return b},clearElementId:function(a,b){for(var c in a){!0===b?a[c].element_id=e.Utils.generateUniqueID():delete a[c].element_id;var d=a[c].styling!==n?a[c].styling:a[c].mod_settings;if(d!==n&&d.custom_css_id!==n&&""!==d.custom_css_id)for(var f=2;;){var g=d.custom_css_id+"-"+f.toString(),h=l.getElementById(g);if(null===h||null===h.closest(".module_row")){d.custom_css_id=
g;break}++f}a[c].cols!==n?this.clearElementId(a[c].cols,b):a[c].modules!==n&&this.clearElementId(a[c].modules,b)}},clearLastEmptyRow:function(a){for(var b=a.length-1;-1<b;--b){var c=a[b].attributes!==n?a[b].attributes:a[b];if(c.styling===n||0===Object.keys(c.styling).length){var c=c.cols,d=!0,f;for(f in c)if(c[f].modules!==n&&(0<c[f].modules.length||0<Object.keys(c[f].modules).length)||c[f].styling!==n&&0<Object.keys(c[f].styling).length){d=!1;break}if(!0===d)a[b].cid!==n&&(e.Models.Registry.remove(a[b].cid),
a[b].destroy()),a.splice(b,1);else break}else break}},builderPlupload:function(a,b){var c=b?!0:!1,d=c?[b]:q.Lightbox.$lightbox[0].getElementsByClassName("tb_plupload_upload_uic"),f=d.length;if(0<f){var g=c?!1:"new_elemn"===a?".plupload-clone":!1;this.pconfig===n&&(this.pconfig=JSON.parse(JSON.stringify(themify_builder_plupload_init)),this.pconfig.multipart_params._ajax_nonce=themifyBuilder.tb_load_nonce,this.pconfig.multipart_params.topost=themifyBuilder.post_ID);for(--f;-1<f;--f)if(!d[f].classList.contains("tb_plupload_init")&&
(!1===g||d[f].classList.contains(g))){var h=d[f],m=h.getAttribute("id").replace("tb_plupload_upload_ui",""),l=k.extend(!0,{},this.pconfig),p=h.getAttribute("data-extensions"),x=["browse_button","container","drop_element","file_data_name"];l.multipart_params.imgid=m;for(var v=x.length-1;-1<v;--v)l[x[v]]=m+this.pconfig[x[v]];l.filters[0].extensions=null!==p?p:null!==e.activeModel?l.filters[0].extensions.replace(/\,zip|\,txt/,""):"zip,txt";m=new t.plupload.Uploader(l);h.classList.add("tb_plupload_init");
c&&m.bind("init",function(a){k(a.settings.browse_button).click()});m.bind("FilesAdded",function(a,b){a.refresh();a.start();q.showLoader("show")});m.bind("Error",function(a,b){var c=k(".prompt-box .show-error");k(".prompt-box .show-login").hide();c.show();0<c.length&&c.html('<p class="prompt-error">'+b.message+"</p>");k(".overlay, .prompt-box").fadeIn(500)});m.bind("FileUploaded",function(a,b,d){var f=JSON.parse(d.response);a=k("#tb_alert",t.document);d=200!==d.status||f.error?"error":"done";if(f.error)q.showLoader(d),
alert(f.error);else if(c){var g=k("#tb_row_wrapper").children().clone(!0);a.promise().done(function(){e.Forms.reLoad(f.builder_data,themifyBuilder.post_ID);var a=k("#tb_row_wrapper").children().clone(!0);q.Lightbox.close();e.undoManager.push("","","","import",{before:g,after:a,bid:themifyBuilder.post_ID})})}else q.showLoader(d),a=this.getOption().container.closest(".tb_input"),d=a.getElementsByClassName("tb_uploader_input")[0],a=a.getElementsByClassName("thumb_preview")[0],d.value=f.large_url?f.large_url:
f.url,a!==n&&e.Constructor.file.setImage(a,f.thumb),u.triggerEvent(d,"change")});m.init();h.classList.remove("plupload-clone")}}},columnDrag:function(a,b,c,d){var f=this;b&&(b=a?a.children(".module_column"):k(".module_column"),b.css("width",""),f.setCompactMode(b));if(c&&d){a=a.children(".module_column");var g=("gutter-narrow"===c?1.6:"gutter-none"===c?0:3.2)-("gutter-narrow"===d?1.6:"gutter-none"===d?0:3.2),g=parseFloat(g*(a.length-1)/a.length);a.each(function(a){k(this).prop("style").width&&(a=
parseFloat(k(this).prop("style").width)+g,k(this).css("width",a+"%"))})}else{var h={"col6-1":14,"col5-1":17.44,"col4-1":22.6,"col4-2":48.4,"col2-1":48.4,"col4-3":74.2,"col3-1":31.2,"col3-2":65.6},m={"col6-1":15.33,"col5-1":18.72,"col4-1":23.8,"col4-2":49.2,"col2-1":49.2,"col4-3":74.539,"col3-1":32.266,"col3-2":66.05},l={"col6-1":16.666,"col5-1":20,"col4-1":25,"col4-2":50,"col2-1":50,"col4-3":75,"col3-1":33.333,"col3-2":66.666};(a?a.children(".module_column").find(".tb_grid_drag"):k(".tb_grid_drag")).each(function(){var a,
b,c,d,g=0,n,r=!1,t=0,y=!1,z,C,E,H=null,I=null,L;k(this).draggable({axis:"x",cursor:"col-resize",distance:0,scroll:!1,snap:!1,containment:".row_inner",helper:function(c){a=k(c.currentTarget);b=a.closest(".subrow_inner");0===b.length&&(b=a.closest(".row_inner"));n=a[0].classList.contains("tb_drag_right")?"w":"e";z="w"===n?"tb_grid_drag_right_tooltip":"tb_grid_drag_left_tooltip";y=q.clone(b.closest(".module_row"));b.addClass("tb_drag_column_start");return k('<div class="ui-widget-header tb_grid_drag_tooltip '+
z+'"></div><div class="ui-widget-header tb_grid_drag_tooltip"></div>')},start:function(f,h){e.ActionBar.disable=!0;e.ActionBar.clear();c=b.children(".module_column");d=a.closest(".module_column");E=b[0].classList.contains("direction-rtl");"w"===n?(r=E?d.prev(".module_column"):d.next(".module_column"),g=a.outerWidth(),L=d.outerWidth()):(r=E?d.next(".module_column"):d.prev(".module_column"),L=g=d.outerWidth());g=parseInt(g);t=parseInt(r.outerWidth())-2;C=b.outerWidth();H=d.children("."+z)[0];I=d.children(".tb_grid_drag_tooltip").last()[0]},
stop:function(a,p){k(".tb_grid_drag_tooltip").remove();b.removeClass("tb_drag_column_start");var q=Math.ceil(100*(d.outerWidth()/C));d.css("width",q+"%");var v=h,q=3.2;b[0].classList.contains("gutter-narrow")?(v=m,q=1.6):b[0].classList.contains("gutter-none")&&(v=l,q=0);var w=q*(c.length-1);c.each(function(a){a!==r.index()&&(k(this).prop("style").width?a=parseFloat(k(this).prop("style").width):(a=k.trim(f.filterClass(k(this).attr("class")).replace("first","").replace("last","")),a=v[a]),w+=a)});r.css("width",
100-w+"%");r=r.add(d);f.setCompactMode(r);q=b.closest(".module_row");e.undoManager.push(q.data("cid"),y,q,"row");u.body.triggerHandler("tb_grid_changed",[q]);setTimeout(function(){e.ActionBar.disable=null},5);H=I=g=t=C=L=r=z=d=n=E=b=c=null},drag:function(a,b){if(r&&0<r.length){var c=parseInt(b.position.left),c=g+("e"===n?-c:c),e=parseFloat(100*c/C);if(5<=e&&100>e){var f=t,f=f+("w"===n?-(c-L):L-c),h=parseFloat(100*f/C);5<h&&100>h&&(r.css("width",f+"px"),d.css("width",c+"px"),H.innerHTML=e.toFixed(2)+
"%",I.innerHTML=h.toFixed(2)+"%")}}}})})}},grid:function(a){var b=[];a=parseInt(a);if(1===a)b.push({grid_class:"col-full"});else for(var c=0;c<a;++c)b.push({grid_class:"col"+a+"-1"});return[{cols:b}]},setCompactMode:function(a){a instanceof jQuery&&(a=a.get());for(var b=a.length-1;-1<b;--b)185>a[b].clientWidth?a[b].classList.add("compact-mode"):a[b].classList.remove("compact-mode")},initNewEditor:function(a){if(3<parseInt(tinyMCE.majorVersion)){var b=tinyMCEPreInit.mceInit.tb_lb_hidden_editor;b.elements=
a;b.selector="#"+a;a=new tinyMCE.Editor(a,b,tinyMCE.EditorManager);a.render();return a}},initQuickTags:function(a){"function"===typeof t.QTags&&(t.quicktags({id:a}),t.QTags._buttonsInit())},_getColClass:function(a){for(var b=0,c=a.length;b<c;++b)if(-1!==this.gridClass.indexOf(a[b]))return a[b].replace("col","")},saveBuilder:function(a,b,c){b=b||0;if(0===b){if(null!==e.activeModel){var d=q.Lightbox.$lightbox[0].getElementsByClassName("builder_save_button")[0];d!==n&&d.click();d=null}q.showLoader("show")}var f=
Object.keys(e.Instances.Builder).length,g=e.Instances.Builder[b],h=this,d=g.$el.data("postid"),g=e.Mixins.Builder.toJSON(g.el);(function(a,b){var d=ThemifyStyles.createCss(b,null,!0);b=e.Utils.clear(b);var f={action:"tb_save_data",tb_load_nonce:themifyBuilder.tb_load_nonce,id:a,data:JSON.stringify(b),sourceEditor:"visual"===e.mode?"frontend":"backend"};c&&(f.only_data=c);k.ajax({type:"POST",url:themifyBuilder.ajaxurl,cache:!1,data:{css:JSON.stringify(d),action:"tb_save_css",tb_load_nonce:f.tb_load_nonce,
id:f.id}});return k.ajax({type:"POST",url:themifyBuilder.ajaxurl,cache:!1,data:f})})(d,g).always(function(d,g){++b;f===b?(k.isFunction(a)&&a.call(h,d,g),"success"!==g?q.showLoader("error"):(q.showLoader("hide"),e.editing=!0,u.body.triggerHandler("themify_builder_save_data",[d,g]))):setTimeout(function(){h.saveBuilder(a,b,c)},50)})},loadContentJs:function(a,b){ThemifyBuilderModuleJs.loadOnAjax(a,b);if(!1===e.saving){var c=k("audio.wp-audio-shortcode, video.wp-video-shortcode",a);if(0<c.length){if(themifyBuilder.media_css){for(var d in themifyBuilder.media_css)u.LoadCss(themifyBuilder.media_css[d]);
themifyBuilder.media_css=null}c.each(function(){var a=k(this).closest(".mejs-mediaelement");0<a.length&&(this.removeAttribute("style"),this.setAttribute("id",this.getAttribute("id").replace("_html5","")),a.closest(".widget").html(this))});c.mediaelementplayer("undefined"!==typeof t._wpmejsSettings?t._wpmejsSettings:{})}}u.body.triggerHandler("builder_load_module_partial",[a,b])},createClearBtn:function(a){a.siblings(".tb_clear_btn").click(function(){k(this).hide();a.val("").trigger("keyup")})},toRGBA:function(a){return ThemifyStyles.toRGBA(a)},
getColor:function(a){var b=a.value;""!==b&&(null!==a.getAttribute("data-minicolors-initialized")?b=k(a).minicolors("rgbaString"):(a=a.getAttribute("data-opacity"),""!==a&&null!==a&&"1"!=a&&"0.99"!=a&&(b=this.toRGBA(b+"_"+a))));return b},getIcon:function(a){var b=a.split("-")[0].trim();return"fa"===b||"ti"===b?b+" "+a:"fas fa"===b||"far fa"===b||"fab fa"===b?a:!1},getBPWidth:function(a){a=Array.isArray(themifyBuilder.breakpoints[a])?themifyBuilder.breakpoints[a]:themifyBuilder.breakpoints[a].toString().split("-");
return a[a.length-1]},transitionPrefix:function(){if(this.transitionPrefix.pre===n){var a=l.createElement("fakeelement"),b={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},c;for(c in b)if(a.style[c]!==n){this.transitionPrefix.pre=b[c];break}}return this.transitionPrefix.pre},generateUniqueID:function(){return(Math.random().toString(36).substr(2,4)+(new Date).getUTCMilliseconds().toString()).substr(0,7)},getUIDList:function(a){a=
a||"row";var b=_.pluck(e.Models.Registry.items,"attributes");return _.where(b,{elType:a})||[]},scrollTo:function(a){("desktop"===e.activeBreakPoint?k("html,body"):k("body",t.document)).scrollTop(a)},scrollToDropped:function(a,b){a||(a=e.Instances.Builder[e.builderIndex].el.getElementsByClassName("tb_element_cid_"+b)[0]);if(a)if("visual"===e.mode)this.scrollTo(k(a).offset().top-120);else{var c=l.getElementsByClassName("edit-post-layout__content")[0];if(c!==n){if(a.classList.contains("module_row"))var d=
a.offsetTop;else d=a.closest(".module_row"),null!==d?(d=k(d),d=d.offset().top+200-d.offsetParent().offset().top):d=a.offsetTop;k(c).scrollTop(d)}}},addViewPortClass:function(a){this.removeViewPortClass(a);var b=this.isInViewport(a);if(!1!==b)for(var b=b.split(" "),c=b.length-1;-1<c;--c)""!==b[c]&&a.classList.add(b[c])},removeViewPortClass:function(a){for(var b=["top","left","bottom","right"],c=4;-1<c;--c)a.classList.remove("tb_touch_"+b[c])},isInViewport:function(a){a=a.getBoundingClientRect();var b=
"";0>a.left?b="tb_touch_left":a.right-1>=l.documentElement.clientWidth&&(b="tb_touch_right");0>a.top?b+=" tb_touch_top":a.bottom+1>=l.documentElement.clientHeight&&(b+=" tb_touch_bottom");return""===b?!1:b},checkImageSize:function(a){var b=a.getElementsByTagName("img")[0],c=function(c){b.width<c?a.classList.add("tb_disable_object_fit"):a.classList.remove("tb_disable_object_fit")};if(b!==n){var d=b.naturalWidth;if(d&&b.complete)c(d);else{var e=new Image;e.onload=function(){c(e.width)};e.src=b.src}}else a.classList.remove("tb_disable_object_fit")},
checkAllimageSize:function(){var a=e.Instances.Builder[e.builderIndex].el,b=e.Models.Registry.items,c;for(c in b)if("image"===b[c].attributes.mod_name){var d=a.getElementsByClassName("tb_element_cid_"+b[c].cid)[0];d!==n&&this.checkImageSize(d)}},hideOnClick:function(a){a[0]!==n&&(a=a[0]);if(a.classList.contains("tb_ui_dropdown_items")||a.classList.contains("tb_down"))a.classList.add("tb_hide_option"),a.previousElementSibling.blur(),setTimeout(function(){a.classList.remove("tb_hide_option")},500)},
changeOptions:function(a,b){var c="INPUT"===a.tagName?"keyup":"change",d=this;"keyup"===c&&a.setAttribute("data-prev",a.value);d.custom_css_id=function(a,b,c,d){a=l.getElementById(d);return null===a||c[0].getAttribute("id")===d||null===a.closest(".module_row")?(c[0].setAttribute("id",d),!0):!1};d.row_anchor=function(a,b,c,d){"visual"===e.mode&&(c.removeClass(e.liveStylingInstance.getRowAnchorClass(a.getAttribute("data-prev"))),""!==d&&c.addClass(e.liveStylingInstance.getRowAnchorClass(d)),c.data("anchor",
d).attr("data-anchor",d));e.hasChanged=!0;c.find(".tb_row_anchor").first().text(d.replace("#",""));return!0};d.custom_css=function(a,b,c,d){"visual"===e.mode&&c.removeClass(a.getAttribute("data-prev")).addClass(d);return!0};d.layout=function(a,b,c,d){"visual"===e.mode&&e.liveStylingInstance.bindRowWidthHeight(b,d,c);return!0};a.addEventListener(c,function(a){var f,h=null!==e.activeModel&&e.ActionBar.cid===e.activeModel.cid,m=!q.Lightbox.$lightbox[0].contains(this),r=this.id,p="custom_css_id"===r,
t=!0!==p||!1!==m&&!0!==h?n:q.Lightbox.$lightbox[0].getElementsByClassName("builder_save_button")[0];var v=!0===m&&!1===h?k(".tb_element_cid_"+e.ActionBar.cid):"visual"===e.mode?e.liveStylingInstance.$liveStyledElmt:k(".tb_element_cid_"+e.activeModel.cid);"keyup"===c?((f=this.value.trim())&&"custom_css"!==b&&(f=f.replace(/[^a-zA-Z0-9\-\_]+/gi,"")),this.value=f):"layout"===b&&(f=a.detail.val);if(d[b].call(d,this,r,v,f)){p&&(k(this).next(".tb_field_error_msg").remove(),t!==n&&t.classList.remove("tb_disable_save"));
if(!0===m){var u=function(){var a=f;"keyup"===c&&(this.removeEventListener("change",u,{passive:!0,once:!0}),this.removeAttribute("data-isInit"),a=this.value);var b=e.Models.Registry.lookup(v.data("cid")),d=b.get("styling");d||(d={});d[r]=a;b.set({styling:d},{silent:!0})};"keyup"===c?this.getAttribute("data-isInit")||(this.setAttribute("data-isInit",1),this.addEventListener("change",u,{passive:!0,once:!0})):u()}e.hasChanged=!0}else p&&(a=l.createElement("span"),a.className="tb_field_error_msg",a.textContent=
e.Constructor.label.errorId,this.parentNode.insertBefore(a,this.nextSibling),t!==n&&t.classList.add("tb_disable_save"));!0===h&&(h=m?q.Lightbox.$lightbox.find("#"+r):k("#"+e.ActionBar.el.id).find("#"+r),"keyup"===c?h.val(f).attr("data-prev",f):"layout"===b&&(h.find(".selected").removeClass("selected"),""!==f?h.find("#"+f).addClass("selected"):h.children().first().addClass("selected")));"keyup"===c&&this.setAttribute("data-prev",f)},{passive:!0})}};e.ActionBar={cid:null,topH:null,type:null,disable:null,
prevExpand:null,needClear:!0,el:null,breadCrumbs:null,disablePosition:null,isInit:null,init:function(){if(null===this.isInit){this.isInit=!0;this.el=l.createElement("div");this.breadCrumbs=l.createElement("ul");this.el.id="tb_component_bar";this.breadCrumbs.className="tb_action_breadcrumb";l.addEventListener("click",this.click.bind(this));l.addEventListener("dblclick",this.click.bind(this));"visual"===e.mode&&t.document.addEventListener("click",this.click.bind(this));var a="visual"===e.mode?null:
l.getElementById("tb_canvas_block");null===a?(l.addEventListener("keyup",this.actions.bind(this)),t.document.addEventListener("keyup",this.actions.bind(this))):a.addEventListener("keyup",this.actions.bind(this));this.el.addEventListener("click",this.actions.bind(this));this.el.addEventListener("mousedown",this.mouseDown.bind(this));this.topH=e.toolbar.$el.height();"visual"===e.mode?l.body.appendChild(this.el):e.Instances.Builder[e.builderIndex].el.parentNode.appendChild(this.el)}},mouseDown:function(a){if(1===
a.which&&("row"===this.type||"subrow"===this.type)&&a.target.classList.contains("ti-move")){a.preventDefault();a.stopPropagation();var b=e.Instances.Builder[e.builderIndex].$el.find(".tb_element_cid_"+this.cid);if(b!==n){a="row"===this.type?b[0].getElementsByClassName("tb_row_action")[0]:b[0];var b=b.offset();this.clear();if("function"===typeof Event)var c=new Event("mousedown",{bubbles:!0,cancelable:!1});else c=l.createEvent("Event"),c.initEvent("mousedown",!0,!1);c.pageX=b.left;c.pageY=b.top;c.which=
1;a.dispatchEvent(c)}}},click:function(a){if(e.isPreview||!0===this.disable)return!0;var b=a.target,c=b.tagName,d=e.Instances.Builder[e.builderIndex].lastRow,f=k(b).closest("[data-cid]")[0];if(t.document.body.classList.contains("tb_standalone_lightbox")&&!t.document.body.classList.contains("modal-open")){e.toolbar.el.contains(b)||q.Lightbox.$lightbox[0].contains(b)||q.Lightbox.$lightbox[0].classList.contains("tb_predesigned_lightbox")||q.Lightbox.close();var g=t.document.getElementsByClassName("tb_current_menu_selected")[0];
g!==n&&g.classList.remove("tb_current_menu_selected");g=null}d&&!d.contains(b)&&d.classList.remove("expanded");if("dblclick"===a.type&&null!==e.Forms.LayoutPart.id&&b.classList.contains("tb_overlay"))e.Forms.LayoutPart.save(a,!0);else if(f===n||"dblclick"!==a.type&&b.classList.contains("tb_disable_sorting")||f.classList.contains("tb_active_layout_part"))this.el.contains(b)||this.clear();else{"visual"!==e.mode||"A"!==c&&null===b.closest("a")||a.preventDefault();var h=f.getAttribute("data-cid"),d=e.Models.Registry.lookup(h),
m=f.classList.contains("tb-page-break");if(d){if("dblclick"===a.type){if("INPUT"===c||null!==b.closest(".tb_clicked")||m)return;a.preventDefault();a.stopPropagation();f.classList.remove("tb_element_selected");if(!b.classList.contains("tb_row_settings")){d.trigger("edit",a,b);return}}var r=null!==this.cid,g=d.get("elType"),c="module"!==g&&b.classList.contains("tb_action_wrap");this.cid=h;this.type=g;if(!0===m&&"row"===g)this.clear(),b.classList.contains("tb_row_anchor")&&(a.preventDefault(),a.stopPropagation(),
d.trigger("delete",a,b));else if(!1===c&&null!==b.closest(".tb_action_wrap"))this.actions(a);else if(this.clear(),!0===r&&!0===this.needClear){u.body[0].classList.add("tb_action_active");var p=this,x=function(){l.removeEventListener("mousemove",x,{passive:!0,once:!0});null===p.cid&&u.body[0].classList.remove("tb_action_active")};l.addEventListener("mousemove",x,{passive:!0,once:!0})}else this.cid=h,this.type=g,h="tmpl-builder_"+g+"_action",h=q.is_template_support?l.getElementById(h).content.cloneNode(!0):
q.templateCache.get(h),!0===c?(this.prevExpand=b,q.is_template_support?this.prevExpand.appendChild(h):this.prevExpand.insertAdjacentHTML("beforeend",h),this.prevExpand.closest(".tb_action_wrap").classList.add("tb_clicked"),this.prevExpand.setAttribute("id",this.el.id)):("row"!==g&&this.setBreadCrumbs(f),this.el.className="tb_show_toolbar tb_"+g+"_action",b=l.createElement("div"),b.className="tb_action_label_wrap",q.is_template_support?b.appendChild(h):b.insertAdjacentHTML("beforeend",h),"visual"===
e.mode&&("module"===g?(h=d.get("mod_name"),this.el.className+=" tb_"+h+"_action",h=themifyBuilder.modules[h].name):(h=g,"row"===g&&(d=d.get("styling").row_anchor,d!==n&&(d=d.trim(),""!==d&&(h+=" #"+d)))),d=l.createElement("div"),d.className="tb_data_mod_name",d.textContent=h.charAt(0).toUpperCase()+h.slice(1),b.appendChild(d)),this.el.appendChild(b)),u.body[0].classList.add("tb_action_active"),f.classList.add("tb_element_selected"),!1===c&&null===this.disablePosition&&(f=a.pageX,c=a.pageY,"visual"!==
e.mode&&(c=e.Instances.Builder[0].el.getBoundingClientRect(),f=a.clientX-c.left,c=a.clientY-c.top+30),this.setPosition(this.el,{left:f,top:c}))}else this.clear()}},setBreadCrumbs:function(a){for(;this.breadCrumbs.firstChild;)this.breadCrumbs.removeChild(this.breadCrumbs.firstChild);for(var b=l.createDocumentFragment(),c=[];;){a=a.parentNode;var d=a.getAttribute("data-cid");d&&c.push(d);if(a.classList.contains("module_row"))break}for(a=c.length-1;-1<a;--a){var d=l.createElement("li"),f=e.Models.Registry.lookup(c[a]),
g=f.get("elType");d.textContent="column"===g?f.get("component_name"):g;d.className="tb_bread_"+g;d.setAttribute("data-id",c[a]);b.appendChild(d)}this.breadCrumbs.appendChild(b);null===this.el.firstChild?this.el.appendChild(this.breadCrumbs):this.el.insertBefore(this.breadCrumbs,this.el.firstChild)},actions:function(a){var b;var c=a.target;var d=c.tagName;if("keyup"===a.type)if(c=l.activeElement.tagName,"INPUT"!==c&&"TEXTAREA"!==c){var f=a.keyCode;c=n;d=(b=0<l.getElementsByClassName("tb_element_selected").length)?
this.el.classList.contains("tb_show_toolbar")?this.el:l.getElementById(this.el.id):null;46===f||8===f?(b&&(c=d.getElementsByClassName("tb_delete")[0]),"visual"!==e.mode&&themifyBuilder.is_gutenberg_editor&&(f=l.getElementById("tb_canvas_block"),null!==f&&f.closest(".wp-block").classList.contains("is-selected")&&(a.preventDefault(),a.stopPropagation()))):b&&(a.ctrlKey||a.metaKey)&&(67===f?c=d.getElementsByClassName("tb_copy_component")[0]:86===f&&(c=a.shiftKey?d.getElementsByClassName("tb_paste_style")[0]:
d.getElementsByClassName("tb_paste_component")[0]));if(c===n)return;a.preventDefault();a.stopPropagation();d=c.tagName}else return;else a.preventDefault(),a.stopPropagation();if(null!==this.cid&&("LI"===d||"SPAN"===d||"A"===d)){var g=(f=c.parentNode.classList.contains("tb_action_breadcrumb"))?c.getAttribute("data-id"):this.cid;b=e.Models.Registry.lookup(g);var h=c.classList;if(b)if(u.body[0].classList.remove("tb_component_menu_active"),!0===f)this.needClear=null,this.disablePosition=!0,l.getElementsByClassName("tb_element_cid_"+
g)[0].click(),this.disablePosition=null,"visual"===e.mode&&(c=this.el.getBoundingClientRect(),c.right>=l.body.clientWidth&&this.setPosition(this.el,{left:c.left,top:this.el.offsetTop+55})),this.needClear=!0;else if(f=c.getAttribute("data-href"))for(a=c.parentNode.getElementsByTagName("li"),c=a.length-1;-1<c;--c)h=(d=a[c].getAttribute("data-href"))?l.getElementById(d):null,b=a[c].classList.contains("selected"),a[c].classList.remove("selected"),null!==h&&h.classList.remove("selected"),d!==f||b||("tb_row_options"===
d||"tb_rgrids"===d?this.gridMenu(h):"tb_roptions"===d&&0===h.children.length&&this.setRowOptions(h),h.classList.add("selected"),a[c].classList.add("selected"),e.Utils.addViewPortClass(h),u.body[0].classList.add("tb_component_menu_active"));else{if(h.contains("tb_edit")||h.contains("tb_styling")||h.contains("tb_visibility_component")||h.contains("tb_swap"))f="edit";else if(h.contains("tb_duplicate"))f="duplicate";else if(h.contains("tb_save_component"))f="save";else if(h.contains("tb_delete"))f="delete";
else if(h.contains("ti-import")||h.contains("ti-export"))f="importExport";else if(h.contains("tb_copy_component"))f="copy";else if(h.contains("tb_paste_component")||h.contains("tb_paste_style"))f="paste";else{if("LI"===d||"SPAN"===d||h.contains("tb_action_more")||h.contains("tb_inner_action_more")){a=c.closest("li");if(null===a)return;h=a.parentNode;f=h.classList;b=f.contains("tb_grid_list")||f.contains("tb_column_alignment")||f.contains("tb_column_gutter")||f.contains("tb_column_direction")||f.contains("tb_column_height")||
f.contains("grid_tabs");d=c.classList.contains("selected");h=h.children;if(b&&d)return;for(c=h.length-1;-1<c;--c)if(h[c].classList.remove("selected"),!1===b)for(var g=h[c].getElementsByClassName("selected"),k=g.length-1;-1<k;--k)g[k].classList.remove("selected");d||(a.classList.add("selected"),u.body[0].classList.add("tb_component_menu_active"));if(b)f.contains("tb_column_alignment")?this._columnAlignmentClicked(a):f.contains("tb_column_gutter")?this._gutterChange(a):f.contains("tb_column_direction")?
this._columnDirectionClicked(a):f.contains("tb_column_height")?this._columnHeight(a):f.contains("grid_tabs")?this._switchGridTabs(a):f.contains("tb_grid_list")&&this._gridClicked(a);else{h=null!==this.prevExpand?this.prevExpand.children:this.el.getElementsByClassName("tb_action_label_wrap")[0].children;for(c=h.length-1;-1<c;--c)h[c].classList.remove("selected");d||null!==this.prevExpand&&"column"!==this.type||(h=a.getElementsByTagName("ul")[0],h!==n&&e.Utils.addViewPortClass(h))}}return}this.clear();
b.trigger(f,a,c)}}},_switchGridTabs:function(a){e.scrollTo=k(l.getElementsByClassName("tb_element_cid_"+this.cid)[0]);e.Constructor.lightboxSwitch(a.getAttribute("data-id"))},_gridClicked:function(a){var b=k(a),c=b.data("grid"),d=this.type,f=k(".tb_element_cid_"+this.cid).first(),g=!1,h=e.activeBreakPoint,m="desktop"===h;a=q.clone(f.closest(".module_row"));g="subrow"===d;var r=f.find("."+d+"_inner").first();if(m){d=r;var p=b.data("col");d=d.add(k("#tb_rgrids"));p===n&&(p=1,b.data("col",p));for(h=
6;0<h;--h)d.removeClass("col-count-"+h);d.addClass("col-count-"+p);r.attr("data-basecol",p);m&&b.closest(".tb_grid_menu").find(".tb_grid_reposnive .tb_grid_list").each(function(){var a=k(this).find(".selected"),b=k(this).data("type"),c=a.data("col");c!==n&&(c>p||4===p&&3===c||4<=p&&4<=c&&p!=c)&&(a.removeClass("selected"),r.removeClass("tb_grid_classes col-count-"+r.attr("data-basecol")+" "+r.attr("data-col_"+b)).attr("data-col_"+b,""),k(this).closest(".tb_grid_list").find("."+b+"-auto").addClass("selected"))})}else return"-auto"!==
c[0]?(a="column"+c.join("-"),p=b.data("col"),3===p&&r.attr("data-basecol")>p&&(a+=" tb_3col"),r.removeClass(r.attr("data-col_tablet")+" "+r.attr("data-col_tablet_landscape")+" "+r.attr("data-col_mobile")).addClass(a+" tb_grid_classes col-count-"+r.attr("data-basecol")).attr("data-col_"+h,a)):r.removeClass("tb_grid_classes tb_3col col-count-"+r.attr("data-basecol")+" "+r.attr("data-col_"+h)).attr("data-col_"+h,""),"visual"===e.mode&&k("body",t.document).height(l.body.scrollHeight),e.Utils.setCompactMode(r.children(".module_column")),
!1;b=r.children(".module_column");m=c.length;d="module_column"+(g?" sub_column":"")+" col";for(h=0;h<m;++h)f=b.eq(h),0<f.length?f.removeClass(e.Utils.gridClass.join(" ")).addClass(d+c[h]):e.Utils._addNewColumn({newclass:d+c[h],component:g?"sub-column":"column"},r[0]);m<r.children().length&&r.children(".module_column").eq(m-1).nextAll().each(function(){k(this).find(".tb_holder").first().children().appendTo(k(this).prev().find(".tb_holder").first());k(this).remove()});c=r.children();c.removeClass("first last");
r.hasClass("direction-rtl")?(c.last().addClass("first"),c.first().addClass("last")):(c.first().addClass("first"),c.last().addClass("last"));e.Utils.columnDrag(r,!0);f=r.closest(".module_row");e.hasChanged=!0;e.Mixins.Builder.updateModuleSort(f);e.undoManager.push(f.data("cid"),a,f,"row");u.body.triggerHandler("tb_grid_changed",[f])},_columnHeight:function(a){a=k(a).data("value");if(a!==n){var b=k(".tb_element_cid_"+this.cid).first(),c=e.Models.Registry.lookup(this.cid),d=q.clone(b),b=b.find("."+this.type+
"_inner").first();""===a?b.removeClass("col_auto_height"):b.addClass("col_auto_height");c.set({column_h:a},{silent:!0});e.undoManager.push(this.cid,d,k(".tb_element_cid_"+this.cid).first(),"row")}},_columnAlignmentClicked:function(a){a=k(a);if(a=a.data("alignment")){var b=k(".tb_element_cid_"+this.cid).first(),c=e.Models.Registry.lookup(this.cid),d=q.clone(b);b.find("."+this.type+"_inner").first().removeClass(c.get("column_alignment")).addClass(a);c.set({column_alignment:a},{silent:!0});e.undoManager.push(this.cid,
d,k(".tb_element_cid_"+this.cid).first(),"row")}},_columnDirectionClicked:function(a){a=k(a);if(a=a.data("dir")){var b=k(".tb_element_cid_"+this.cid).first().find("."+this.type+"_inner").first(),c=b.children(".module_column"),d=c.first(),c=c.last(),f=e.Models.Registry.lookup(this.cid),g={};g[e.activeBreakPoint+"_dir"]=a;f.set(g,{silent:!0});"rtl"===a?(d.removeClass("first").addClass("last"),c.removeClass("last").addClass("first"),b.addClass("direction-rtl")):(d.removeClass("last").addClass("first"),
c.removeClass("first").addClass("last"),b.removeClass("direction-rtl"));b.attr("data-"+e.activeBreakPoint+"_dir",a)}},_gutterChange:function(a){if(a=k(a).data("value")){var b=k(".tb_element_cid_"+this.cid).first(),c=e.Models.Registry.lookup(this.cid),d=c.get("gutter"),f=q.clone(b),b=b.find("."+this.type+"_inner").first();e.Utils.columnDrag(b,!1,d,a);b.removeClass(d).addClass(a);c.set({gutter:a},{silent:!0});e.undoManager.push(this.cid,f,k(".tb_element_cid_"+this.cid).first(),"row")}},gridMenu:function(a){for(var b=
e.activeBreakPoint,c="desktop"===b,d=e.Models.Registry.lookup(this.cid),f=!0===c?n:d.get("col_"+b),g=d.get(b+"_dir"),h=d.get("column_alignment"),m=d.get("column_h"),q=d.get("gutter"),p=l.getElementsByClassName("tb_element_cid_"+this.cid)[0].getElementsByClassName(this.type+"_inner")[0].children,t=p.length,u=[],d=0;d<t;++d)u.push(e.Utils._getColClass(p[d].className.split(" ")));p="tb_rgrids"===a.id?a:k(a).find("#tb_rgrids")[0];for(d=6;-1<d;--d)p.classList.remove("col-count-"+d);p.classList.add("col-count-"+
t);u="grid-layout-"+u.join("-");a=a.getElementsByClassName("tb_grid_"+b)[0];p=a.getElementsByClassName("tb_grid_list")[0].getElementsByTagName("li");f="-auto"!==f&&f!==n&&""!==f?"grid-layout-"+f.replace(/column|tb_3col/ig,"").trim():!1;!1===c&&1===t&&(f=b+"-auto");for(d=p.length-1;-1<d;--d)!0===c&&p[d].classList.contains(u)||!1===c&&!1!==f&&p[d].classList.contains(f)?p[d].classList.add("selected"):p[d].classList.remove("selected");if("ltr"!==g)for(p=a.getElementsByClassName("tb_column_direction")[0].getElementsByTagName("li"),
d=p.length-1;-1<d;--d)p[d].getAttribute("data-dir")===g?p[d].classList.add("selected"):p[d].classList.remove("selected");if(!0===c){if("col_align_top"!==h||!0===I)for(b=a.getElementsByClassName("tb_column_alignment")[0].getElementsByTagName("li"),d=b.length-1;-1<d;--d)b[d].getAttribute("data-alignment")===h?b[d].classList.add("selected"):b[d].classList.remove("selected");if("gutter-default"!==q)for(h=a.getElementsByClassName("tb_column_gutter")[0].getElementsByTagName("li"),d=h.length-1;-1<d;--d)h[d].getAttribute("data-value")===
q?h[d].classList.add("selected"):h[d].classList.remove("selected");if(m)for(h=a.getElementsByClassName("tb_column_height")[0].getElementsByTagName("li"),d=h.length-1;-1<d;--d)h[d].getAttribute("data-value")==m?h[d].classList.add("selected"):h[d].classList.remove("selected")}},setRowOptions:function(a){var b=null,c=e.activeModel,d=e.Constructor.component,f=e.Models.Registry.lookup(this.cid),g=f.get("styling");g||(g={});null!==c&&(b="module"===e.activeModel.get("elType")?"mod_settings":"styling",b=
e.activeModel.get(b));if(a.children[0]!==n)for(;a.firstChild;)a.removeChild(a.firstChild);e.Constructor.values=g;e.Constructor.component=this.type;e.activeModel=f;a.appendChild(e.Constructor.create(e.Constructor.data.row.setting.options.slice(0,5)));e.Constructor.values=b;e.activeModel=c;e.Constructor.component=d},clear:function(){if(null!==this.type){this.cid=this.type=null;for(this.el.classList.remove("tb_show_toolbar");this.el.firstChild;)this.el.removeChild(this.el.firstChild);if(null!==this.prevExpand){for(;this.prevExpand.firstChild;)this.prevExpand.removeChild(this.prevExpand.firstChild);
this.prevExpand.closest(".tb_action_wrap").classList.remove("tb_clicked");this.prevExpand.removeAttribute("id");this.prevExpand=null}this.clearSelected();u.body[0].classList.remove("tb_action_active");u.body[0].classList.remove("tb_component_menu_active")}},clearSelected:function(){for(var a=l.getElementsByClassName("tb_element_selected"),b=a.length-1;-1<b;--b)a[b].classList.remove("tb_element_selected")},setPosition:function(a,b){var c=a.getBoundingClientRect();var d=c.width,f=c.height+40,g="visual"===
e.mode?y.pageYOffset:e.toolbar.el.offsetTop+this.topH,h="visual"===e.mode?l.body:e.Instances.Builder[0].el,m=h.clientWidth;c=b.nodeType!==n?k(b).offset():b;a.removeAttribute("data-top");c.right=c.bottom="";c.left-=parseFloat(d/2);c.top-=f;c.left+d>m?(c.left="auto",c.right=10):0>c.left&&(c.left=30);c.top>h.clientHeight?"visual"!==e.mode&&(c.top="auto",c.bottom=50):g>c.top&&(a.dataset.top=!0,c.top+=2*f-25,"visual"!==e.mode&&(c.top-=f/2));for(var q in c)a.style[q]="auto"!==c[q]&&""!==c[q]?c[q]+"px":
c[q]}};e.Forms.register_validator=function(a,b){this.Validators[a]=b};e.Forms.get_validator=function(a){return this.Validators[a]!==n?this.Validators[a]:this.Validators.not_empty};e.Forms.register_validator("email",function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a=a.split(",");for(var c=a.length-1;-1<c;--c)if(!b.test(a[c]))return!1;return!0});e.Forms.register_validator("not_empty",
function(a){return!(!a||""===a.trim())})})(jQuery,Backbone,Themify,window,window.top,document,ThemifyBuilderCommon,void 0);
